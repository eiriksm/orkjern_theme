(function e$$0(k,q,n){function h(e,X){if(!q[e]){if(!k[e]){var b="function"==typeof require&&require;if(!X&&b)return b(e,!0);if(g)return g(e,!0);b=Error("Cannot find module '"+e+"'");throw b.code="MODULE_NOT_FOUND",b;}b=q[e]={exports:{}};k[e][0].call(b.exports,function(b){var g=k[e][1][b];return h(g?g:b)},b,b.exports,e$$0,k,q,n)}return q[e].exports}for(var g="function"==typeof require&&require,e=0;e<n.length;e++)h(n[e]);return h})({1:[function(c,k,q){c=c("./src/app");if(k=document.getElementsByTagName("style")[0]){q=
c.getLsOrKickOut(window);var n={};n["{{cache_key}}"]=k.innerHTML;q.setItem("orkjern_theme_cache",JSON.stringify(n));document.cookie="ORKJERN_THEME_CACHE={{ cache_key }}"}c.init(window)},{"./src/app":2}],2:[function(c,k,q){var n=c("mithril"),h=c("./booter"),g=c("./disqus"),e=c("./gist"),p=c("./controllers/node"),X=c("./controllers/index"),b=c("./controllers/taxonomy");k.exports={appendCss:function(b,h){var e=h.document,g=e.getElementsByTagName("head")[0],p=e.createElement("style");p.type="text/css";
p.styleSheet?p.styleSheet.cssText=b:p.appendChild(e.createTextNode(b));return g.appendChild(p)},getLsOrKickOut:function(b){var e=b.localStorage;return e?e:(b.alert("Your browser is bad, and you should feel bad. You are not welcome here. You will be redirected to a place where you can upgrade your browser."),b.location.href="http://browsehappy.com/")},init:function(c){var C={window:c,m:n};c.test&&n.deps(c);var k=c.document;n.route.mode="pathname";C.controllers={index:new X(C),node:p,taxonomy:new b(C)};
C.booter=new h(C);C.booter.attach();g(C.window);e(C.window);c.disqus_shortname="{{ disqus_shortname }}";if(!c.disqus_shortname||!c.disqus_shortname.length)return C;c.DISQUSWIDGETS=void 0;if(k.querySelectorAll&&0===k.querySelectorAll("a[data-disqus-identifier]").length)for(var t=k.querySelectorAll(".views-field-view-node a"),q=0,S=t.length;q<S;q++){var M=k.createElement("div");M.className="comment-count";var J=k.createElement("a");J.href=t[q].pathname;J.setAttribute("data-disqus-identifier",t[q].pathname);
M.appendChild(J);t[q].parentNode.parentNode.parentNode.insertBefore(M,t[q].parentNode.parentNode.nextSibling)}t=k.createElement("script");t.async=!0;t.type="text/javascript";t.src="//"+c.disqus_shortname+".disqus.com/count.js";(k.getElementsByTagName("HEAD")[0]||k.getElementsByTagName("BODY")[0]).appendChild(t);return C}}},{"./booter":3,"./controllers/index":4,"./controllers/node":5,"./controllers/taxonomy":6,"./disqus":7,"./gist":8,mithril:12}],3:[function(c,k,q){function n(h){this.app=h;this.window=
h.window;var g=h.controllers.index,e=h.controllers.node;h=h.controllers.taxonomy;this.booted=!1;this.routeConf={};this.routeConf["/"]=g;this.routeConf["/node"]=g;this.routeConf["/:alias"]=e;this.routeConf["/node/:nid"]=e;this.routeConf["/taxonomy/term/:tid"]=h;var p=this.app.m;this.m=p;var g=this.window.document,n=this;this.startFunction=function(){var b=this.getAttribute("href");n.navigate(b);return!1};if(g=g.getElementById("logo"))g.onclick=function(){"/"!==p.route()&&n.navigate("/");return!1}}
k.exports=n;n.prototype.attach=function(h){var g=this.window.document;if(g&&g.querySelectorAll){h=g.querySelectorAll(h||"#main-wrapper a");for(var g=0,e=h.length;g<e;g++)h[g].onclick=this.startFunction}};n.prototype.navigate=function(h){var g=this.window;!this.booted&&g&&g.document&&(this.m.route(g.document.getElementById("main-wrapper"),h,this.routeConf),this.booted=!0);this.m.route(h)};n.prototype.navigateEl=function(h,g){var e=h.getAttribute("href");g.navigate(e);return!1}},{}],4:[function(c,k,
q){q=c("../views/index");var n=c("../http"),h={},g=function(e){var h=e.m;return function(){var g=e.window,b=this;this.nodes=h.prop([]);n("node").then(function(h){b.nodes=h;setTimeout(function(){e.booter.attach(".field-type-taxonomy-term-reference a")},2);var p=e.window.document;g.DISQUSWIDGETS=void 0;g.disqus_shortname&&function(){var b=p.createElement("script");b.async=!0;b.type="text/javascript";b.src="//"+g.disqus_shortname+".disqus.com/count.js";(p.getElementsByTagName("HEAD")[0]||p.getElementsByTagName("BODY")[0]).appendChild(b)}()});
this.navigate=function(b){e.booter.navigateEl(b,e.booter)}}};h.view=q;k.exports=function(e){h.app=e;h.controller=new g(e);return h}},{"../http":9,"../views/index":10}],5:[function(c,k,q){var n=c("mithril");q=c("../views/node");var h=c("../http"),g=c("../gist"),e=c("../disqus");c={controller:function(){var p=this;this.title=n.prop("");this.body=n.prop("Loading...");this.raw=n.prop({});this.image=n.prop("about:blank");p.submitted=n.prop("");var c;this.imageClass=n.prop("noplay");this.toggleImageClass=
function(){n.startComputation();p.imageClass("play");c&&p.image(c);n.endComputation()};var b=n.route.param("alias"),k=n.route.param("nid");if(!b){if(!k){n.route("/");return}b="node/"+k}h(b).then(function(b){if(b){var h=new Date(1E3*b.created[0].value);p.title(b.title[0].value);p.body(b.body[0].value);p.submitted("Submitted "+h.toLocaleDateString());for(var n in b._links)1>n.indexOf("image")||!b._links.hasOwnProperty(n)||!n.indexOf("image")||(c=b._links[n][0].href);p.raw=b;setTimeout(function(){g(window)},
200);window.disqus_shortname="{{ disqus_shortname }}";setTimeout(function(){e(window)},200)}},function(b){404===b&&(p.title("404 not found!"),p.body("The page you are looking for is nowhere to be found. Real sorry about that!"),p.imageClass("hide"));403===b&&(p.title("403 Forbidden!"),p.body("You are not allowed to access this page. I am guessing you already knew that!"))})}};c.view=q;k.exports=c},{"../disqus":7,"../gist":8,"../http":9,"../views/node":11,mithril:12}],6:[function(c,k,q){q=c("../views/index");
var n=c("../http"),h={},g=function(h){var g=h.m;return function(){var c=this;this.nodes=g.prop([]);var b=g.route.param("tid");n("taxonomy/term/"+b).then(function(b){b.map(function(b){b.body=""});c.nodes=b;window.disqus_shortname="{{ disqus_shortname }}";setTimeout(function(){h.booter.attach(".field-type-taxonomy-term-reference a")},2);window.disqus_shortname&&window.disqus_shortname.length&&(window.DISQUSWIDGETS=void 0,function(){var b=document.createElement("script");b.async=!0;b.type="text/javascript";
b.src="//"+window.disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(b)}())});this.navigate=function(b){h.booter.navigateEl(b,h.booter)}}};h.view=q;k.exports=function(e){h.controller=new g(e);return h}},{"../http":9,"../views/index":10}],7:[function(c,k,q){var n=c("mithril");k.exports=function(h){var g=h.document;"undefined"===typeof n&&(n=h.m);var e=function(){if(h.disqus_shortname)if(h.disqus_identifier=n.route(),
h.disqus_identifier||(h.disqus_identifier=h.location.pathname),h.disqus_loaded)h.DISQUS.reset({reload:!0,config:function(){this.page.identifier=h.disqus_identifier;this.page.url=h.location.origin+h.disqus_identifier}});else{h.disqus_loaded=!0;var b=g.createElement("script");b.type="text/javascript";b.async=!0;b.src="//"+h.disqus_shortname+".disqus.com/embed.js?url="+h.disqus_identifier;(g.getElementsByTagName("head")[0]||g.getElementsByTagName("body")[0]).appendChild(b)}},c=g.getElementById("disqus_thread"),
k=!1;h.onscroll=function(){c||(c=g.getElementById("disqus_thread"));!k&&h.scrollY&&c&&c.offsetTop&&h.innerHeight&&h.scrollY+h.innerHeight+50>c.offsetTop&&(k=!0,e())}}},{mithril:12}],8:[function(c,k,q){k.exports=function(c){for(var h=c.document,g=function(b,e){var g="gist_callback"+Math.floor(1E3*Math.random()),k=h.createElement("script");k.setAttribute("src","https://gist.github.com/"+e+".json?callback="+g);c[g]=function(h){delete c[g];var e='<link href="'+h.stylesheet+'" rel="stylesheet">',e=e+h.div;
b.innerHTML=e;k.parentNode.removeChild(k);b.className+="processed"};h.body.appendChild(k)},e=h.getElementsByTagName("gist"),p=0,k=e.length;p<k;p++){var b=e[p];b.className&&-1<b.className.indexOf("processed")||g(b,b.innerHTML)}}},{}],9:[function(c,k,q){k.exports=function(h){return n.request({method:"GET",url:"/"+h+"?json",config:function(h){h.setRequestHeader("Accept","application/hal+json")},extract:function(h){return 200===h.status?h.responseText:JSON.stringify(h.status)},deserialize:function(h){var e;
try{e=JSON.parse(h)}catch(c){e=""}return e}})};var n=c("mithril")},{mithril:12}],10:[function(c,k,q){var n=c("mithril");k.exports=function(h){var c=function(e){return{tag:"article",attrs:{class:"node node--view-mode-teaser clearfix",about:"/aa-cc",typeof:"schema:Article"},children:[{tag:"h2",attrs:{class:"node__title "},children:[{tag:"a",attrs:{href:e.path,onclick:function(){h.navigate(this);return!1}},children:[e.title]}]},{tag:"div",attrs:{class:"node__meta"},children:["Post date: ",e.created]},
{tag:"div",attrs:{class:"read-more"},children:[{tag:"a",attrs:{href:e.path,onclick:function(){h.navigate(this);return!1}},children:["Read more"]}]},{tag:"div",attrs:{class:"comment-count"},children:[{tag:"a",attrs:{"data-disqus-identifier":e.path,href:e.path,onclick:function(){h.navigate(this);return!1}}}]},n.trust(e.field_tags)]}};return{tag:"main",attrs:{id:"content",class:"column",role:"main"},children:[{tag:"section",attrs:{class:"section"},children:[{tag:"div",attrs:{class:"content"},children:[{tag:"div",
attrs:{},children:[h.nodes.map?h.nodes.map(c):""]}]}]}]}}},{mithril:12}],11:[function(c,k,q){var n=c("mithril");k.exports=function(h){return{tag:"main",attrs:{id:"content",class:"column",role:"main"},children:[{tag:"section",attrs:{class:"section"},children:[{tag:"div",attrs:{class:"content"},children:[{tag:"article",attrs:{class:"node node--view-mode-full clearfix",about:"/aa-cc",typeof:"schema:Article"},children:[{tag:"h1",attrs:{class:"title",id:"page-title"},children:[h.title()]},{tag:"div",attrs:{class:"node__meta"},
children:[h.submitted()]},{tag:"div",attrs:{class:"node__content clearfix "},children:[{tag:"p",attrs:{},children:[n.trust(h.body())]}]},{tag:"div",attrs:{class:h.imageClass()+" image",onclick:h.toggleImageClass},children:[{tag:"img",attrs:{src:h.image()}},{tag:"h2",attrs:{},children:["Play"]}]}]},{tag:"div",attrs:{class:"twitter"},children:["This blog is written by me, ",{tag:"a",attrs:{href:"https://twitter.com/orkj"},children:["eiriksm. Feel free to say hi on twitter."]}]},{tag:"div",attrs:{id:"disqus_thread"}}]}]}]}}},
{mithril:12}],12:[function(c,k,q){var n=function g(e,c){function k(a){s=a.document;D=a.location;ea=a.cancelAnimationFrame||a.clearTimeout;T=a.requestAnimationFrame||a.setTimeout}function b(){var a=[].slice.call(arguments),b=null!=a[1]&&v.call(a[1])===K&&!("tag"in a[1])&&!("subtree"in a[1]),l=b?a[1]:{},fa="class"in l?"class":"className",f={tag:"div",attrs:{}},d,c=[];if(v.call(a[0])!=N)throw Error("selector in m(selector, attrs, children) should be a string");for(;d=pa.exec(a[0]);)""===d[1]&&d[2]?f.tag=
d[2]:"#"===d[1]?f.attrs.id=d[2]:"."===d[1]?c.push(d[2]):"["===d[3][0]&&(d=qa.exec(d[3]),f.attrs[d[1]]=d[3]||(d[2]?"":!0));0<c.length&&(f.attrs[fa]=c.join(" "));c=b?a[2]:a[1];v.call(c)===E?f.children=c:f.children=b?a.slice(2):a.slice(1);for(var e in l)e===fa?""!==l[e]&&(f.attrs[e]=(f.attrs[e]||"")+" "+l[e]):f.attrs[e]=l[e];return f}function n(a,b,l,e,f,d,k,g,F,u,U){if(null==f||null==f.toString())f="";if("retain"===f.subtree)return d;var G=v.call(d),m=v.call(f);if(null==d||G!==m)null!=d&&(l&&l.nodes?
(e=g-e,d=e+(m===E?f:d.nodes).length,t(l.nodes.slice(e,d),l.slice(e,d))):d.nodes&&t(d.nodes,d)),d=new f.constructor,d.tag&&(d={}),d.nodes=[];if(m===E){for(var m=0,w=f.length;m<w;m++)v.call(f[m])===E&&(f=f.concat.apply([],f),m--);l=[];e=d.length===f.length;for(var G=0,r={},B=[],w=!1,m=0;m<d.length;m++)d[m]&&d[m].attrs&&null!=d[m].attrs.key&&(w=!0,r[d[m].attrs.key]={action:1,index:m});if(w){-1<f.indexOf(null)&&(f=f.filter(function(a){return null!=a}));w=!1;if(f.length!=d.length)w=!0;else for(var m=0,
z,x;z=d[m],x=f[m];m++)if(z.attrs&&x.attrs&&z.attrs.key!=x.attrs.key){w=!0;break}if(w){m=0;for(w=f.length;m<w;m++)f[m]&&f[m].attrs&&(null!=f[m].attrs.key?(z=f[m].attrs.key,r[z]=r[z]?{action:3,index:m,from:r[z].index,element:d.nodes[r[z].index]||s.createElement("div")}:{action:2,index:m}):B.push({index:m,element:a.childNodes[m]||s.createElement("div")}));var m=[],y;for(y in r)m.push(r[y]);w=m.sort(q);y=Array(d.length);for(m=0;r=w[m];m++)1===r.action&&(t(d[r.index].nodes,d[r.index]),y.splice(r.index,
1)),2===r.action&&(z=s.createElement("div"),z.key=f[r.index].attrs.key,a.insertBefore(z,a.childNodes[r.index]||null),y.splice(r.index,0,{attrs:{key:f[r.index].attrs.key},nodes:[z]})),3===r.action&&(a.childNodes[r.index]!==r.element&&null!==r.element&&a.insertBefore(r.element,a.childNodes[r.index]||null),y[r.index]=d[r.from]);m=0;for(w=B.length;m<w;m++)r=B[m],a.insertBefore(r.element,a.childNodes[r.index]||null),y[r.index]=d[r.index];d=y;d.nodes=Array(a.childNodes.length);for(m=0;y=a.childNodes[m];m++)d.nodes[m]=
y}}y=m=0;for(w=f.length;m<w;m++)B=n(a,b,d,g,f[m],d[y],k,g+G||G,F,u,U),B!==c&&(B.nodes.intact||(e=!1),G=B.$trusted?G+(B.match(/<[^\/]|\>\s*[^<]/g)||[]).length:G+(v.call(B)===E?B.length:1),d[y++]=B);if(!e){m=0;for(w=f.length;m<w;m++)null!=d[m]&&l.push.apply(l,d[m].nodes);for(m=0;b=d.nodes[m];m++)null!=b.parentNode&&0>l.indexOf(b)&&t([b],[d[m]]);f.length<d.length&&(d.length=f.length);d.nodes=l}}else if(null!=f&&m===K){f.attrs||(f.attrs={});d.attrs||(d.attrs={});b=Object.keys(f.attrs);l=b.length>("key"in
f.attrs?1:0);if(f.tag!=d.tag||b.join()!=Object.keys(d.attrs).join()||f.attrs.id!=d.attrs.id)if(d.nodes.length&&t(d.nodes),d.configContext&&typeof d.configContext.onunload===A)d.configContext.onunload();if(v.call(f.tag)!=N)return;m=0===d.nodes.length;f.attrs.xmlns?u=f.attrs.xmlns:"svg"===f.tag?u="http://www.w3.org/2000/svg":"math"===f.tag&&(u="http://www.w3.org/1998/Math/MathML");m?(b=f.attrs.is?u===c?s.createElement(f.tag,f.attrs.is):s.createElementNS(u,f.tag,f.attrs.is):u===c?s.createElement(f.tag):
s.createElementNS(u,f.tag),d={tag:f.tag,attrs:l?Y(b,f.tag,f.attrs,{},u):f.attrs,children:null!=f.children&&0<f.children.length?n(b,f.tag,c,c,f.children,d.children,!0,0,f.attrs.contenteditable?b:F,u,U):f.children,nodes:[b]},d.children&&!d.children.nodes&&(d.children.nodes=[]),"select"===f.tag&&f.attrs.value&&Y(b,f.tag,{value:f.attrs.value},{},u),a.insertBefore(b,a.childNodes[g]||null)):(b=d.nodes[0],l&&Y(b,f.tag,f.attrs,d.attrs,u),d.children=n(b,f.tag,c,c,f.children,d.children,!1,0,f.attrs.contenteditable?
b:F,u,U),d.nodes.intact=!0,!0===k&&null!=b&&a.insertBefore(b,a.childNodes[g]||null));typeof f.attrs.config===A&&(a=d.configContext=d.configContext||{},U.push(function(a,b){return function(){return a.attrs.config.apply(a,b)}}(f,[b,!m,a,d])))}else if(typeof m!=A)if(0===d.nodes.length)f.$trusted?l=S(a,g,f):(l=[s.createTextNode(f)],a.nodeName.match(ra)||a.insertBefore(l[0],a.childNodes[g]||null)),d=-1<"string number boolean".indexOf(typeof f)?new f.constructor(f):f,d.nodes=l;else if(d.valueOf()!==f.valueOf()||
!0===k){l=d.nodes;if(!F||F!==s.activeElement)if(f.$trusted)t(l,d),l=S(a,g,f);else if("textarea"===b)a.value=f;else if(F)F.innerHTML=f;else{if(1===l[0].nodeType||1<l.length)t(d.nodes,d),l=[s.createTextNode(f)];a.insertBefore(l[0],a.childNodes[g]||null);l[0].nodeValue=f}d=new f.constructor(f);d.nodes=l}else d.nodes.intact=!0;return d}function q(a,b){return a.action-b.action||a.index-b.index}function Y(a,b,l,e,f){for(var d in l){var c=l[d],g=e[d];if(d in e&&g===c)"value"===d&&"input"===b&&a.value!=c&&
(a.value=c);else{e[d]=c;try{if("config"!==d&&"key"!=d)if(typeof c===A&&0===d.indexOf("on"))a[d]=M(c,a);else if("style"===d&&null!=c&&v.call(c)===K){for(var k in c)if(null==g||g[k]!==c[k])a.style[k]=c[k];for(k in g)k in c||(a.style[k]="")}else if(null!=f)"href"===d?a.setAttributeNS("http://www.w3.org/1999/xlink","href",c):"className"===d?a.setAttribute("class",c):a.setAttribute(d,c);else if(d in a&&"list"!==d&&"style"!==d&&"form"!==d&&"type"!==d){if("input"!==b||a[d]!==c)a[d]=c}else a.setAttribute(d,
c)}catch(n){if(0>n.message.indexOf("Invalid argument"))throw n;}}}return e}function t(a,b){for(var l=a.length-1;-1<l;l--)if(a[l]&&a[l].parentNode){try{a[l].parentNode.removeChild(a[l])}catch(c){}b=[].concat(b);b[l]&&Z(b[l])}0!=a.length&&(a.length=0)}function Z(a){if(a.configContext&&typeof a.configContext.onunload===A)a.configContext.onunload();if(a.children)if(v.call(a.children)===E)for(var b=0,l;l=a.children[b];b++)Z(l);else a.children.tag&&Z(a.children)}function S(a,b,l){var c=a.childNodes[b];
if(c){var f=1!=c.nodeType,d=s.createElement("span");f?(a.insertBefore(d,c||null),d.insertAdjacentHTML("beforebegin",l),a.removeChild(d)):c.insertAdjacentHTML("beforebegin",l)}else a.insertAdjacentHTML("beforeend",l);for(l=[];a.childNodes[b]!==c;)l.push(a.childNodes[b]),b++;return l}function M(a,c){return function(l){l=l||event;b.redraw.strategy("diff");b.startComputation();try{return a.call(c,l)}finally{ga()}}}function J(a){var b=ha.indexOf(a);return 0>b?ha.push(a)-1:b}function sa(a){var b=function(){arguments.length&&
(a=arguments[0]);return a};b.toJSON=function(){return a};return b}function ia(){for(var a="all"===b.redraw.strategy(),c=0,l;l=V[c];c++)H[c]&&b.render(l,$[c].view?$[c].view(H[c]):"",a);O&&(O(),O=null);I=null;ja=new Date;b.redraw.strategy("diff")}function ta(a,c,l){P={};var e=l.indexOf("?");-1!==e&&(P=aa(l.substr(e+1,l.length)),l=l.substr(0,e));for(var f in c){if(f===l)return b.module(a,c[f]),!0;e=new RegExp("^"+f.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(e.test(l))return l.replace(e,
function(){for(var d=f.match(/:[^\/]+/g)||[],l=[].slice.call(arguments,1,-2),e=0,g=d.length;e<g;e++)P[d[e].replace(/:|\./g,"")]=decodeURIComponent(l[e]);b.module(a,c[f])}),!0}}function ka(a){a=a||event;if(!a.ctrlKey&&!a.metaKey&&2!==a.which){a.preventDefault?a.preventDefault():a.returnValue=!1;a=a.currentTarget||this;var c="pathname"===b.route.mode&&a.search?aa(a.search.slice(1)):{};b.route(a[b.route.mode].slice(L[b.route.mode].length),c)}}function la(){"hash"!=b.route.mode&&D.hash?D.hash=D.hash:
e.scrollTo(0,0)}function W(a,b){var l=[],c;for(c in a){var f=b?b+"["+c+"]":c,d=a[c],e=v.call(d),d=null!=d&&e===K?W(d,f):e===E?d.map(function(a){return encodeURIComponent(f+"[]")+"="+encodeURIComponent(a)}).join("&"):encodeURIComponent(f)+"="+encodeURIComponent(d);l.push(d)}return l.join("&")}function aa(a){a=a.split("&");for(var b={},c=0,e=a.length;c<e;c++){var f=a[c].split("=");b[decodeURIComponent(f[0])]=f[1]?decodeURIComponent(f[1]):""}return b}function ba(a){var c=b.prop();a.then(c);c.then=function(b,
c){return ba(a.then(b,c))};return c}function ma(a,c){function l(a){q=a||n;m.map(function(a){q===k&&a.resolve(p)||a.reject(p)})}function e(a,d,c,f){if((null!=p&&v.call(p)===K||typeof p===A)&&typeof a===A)try{var l=0;a.call(p,function(a){l++||(p=a,d())},function(a){l++||(p=a,c())})}catch(g){b.deferred.onerror(g),p=g,c()}else f()}function f(){var m;try{m=p&&p.then}catch(n){return b.deferred.onerror(n),p=n,q=g,f()}e(m,function(){q=d;f()},function(){q=g;f()},function(){try{q===d&&typeof a===A?p=a(p):q===
g&&"function"===typeof c&&(p=c(p),q=d)}catch(f){return b.deferred.onerror(f),p=f,l()}p===u?(p=TypeError(),l()):e(m,function(){l(k)},l,function(){l(q===d&&k)})})}var d=1,g=2,k=3,n=4,u=this,q=0,p=0,m=[];u.promise={};u.resolve=function(a){q||(p=a,q=d,f());return this};u.reject=function(a){q||(p=a,q=g,f());return this};u.promise.then=function(a,b){var d=new ma(a,b);q===k?d.resolve(p):q===n?d.reject(p):m.push(d);return d.promise}}function ca(a){return a}function ua(a){if(a.dataType&&"jsonp"===a.dataType.toLowerCase()){var b=
"mithril_callback_"+(new Date).getTime()+"_"+Math.round(1E16*Math.random()).toString(36),l=s.createElement("script");e[b]=function(d){l.parentNode.removeChild(l);a.onload({type:"load",target:{responseText:d}});e[b]=c};l.onerror=function(d){l.parentNode.removeChild(l);a.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}});e[b]=c;return!1};l.onload=function(a){return!1};l.src=a.url+(0<a.url.indexOf("?")?"&":"?")+(a.callbackKey?a.callbackKey:"callback")+
"="+b+"&"+W(a.data||{});s.body.appendChild(l)}else{var g=new e.XMLHttpRequest;g.open(a.method,a.url,!0,a.user,a.password);g.onreadystatechange=function(){if(4===g.readyState)if(200<=g.status&&300>g.status)a.onload({type:"load",target:g});else a.onerror({type:"error",target:g})};a.serialize===JSON.stringify&&a.data&&"GET"!==a.method&&g.setRequestHeader("Content-Type","application/json; charset=utf-8");a.deserialize===JSON.parse&&g.setRequestHeader("Accept","application/json, text/*");if(typeof a.config===
A){var f=a.config(g,a);null!=f&&(g=f)}if((f="GET"!==a.method&&a.data?a.data:"")&&v.call(f)!=N&&f.constructor!=e.FormData)throw"Request data should be either be a string or FormData. Check the `serialize` option in `m.request`";g.send(f);return g}}function va(a,b,c){"GET"===a.method&&"jsonp"!=a.dataType?(c=0>a.url.indexOf("?")?"?":"&",b=W(b),a.url+=b?c+b:""):a.data=c(b);return a}function wa(a,b){var c=a.match(/:[a-z]\w+/gi);if(c&&b)for(var e=0;e<c.length;e++){var f=c[e].slice(1);a=a.replace(c[e],b[f]);
delete b[f]}return a}var K="[object Object]",E="[object Array]",N="[object String]",A="function",v={}.toString,pa=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g,qa=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/,ra=/^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/,s,D,T,ea;k(e);var na,xa={appendChild:function(a){na===c&&(na=s.createElement("html"));s.documentElement&&s.documentElement!==a?s.replaceChild(a,s.documentElement):s.appendChild(a);this.childNodes=s.childNodes},insertBefore:function(a){this.appendChild(a)},
childNodes:[]},ha=[],Q={};b.render=function(a,b,e){var g=[];if(!a)throw Error("Please ensure the DOM element exists before rendering a template into it.");var f=J(a),d=a===s,k=d||a===s.documentElement?xa:a;d&&"html"!=b.tag&&(b={tag:"html",attrs:{},children:b});Q[f]===c&&t(k.childNodes);!0===e&&(e=J(a),t(a.childNodes,Q[e]),Q[e]=c);Q[f]=n(k,null,c,c,b,Q[f],!1,0,null,c,g);a=0;for(b=g.length;a<b;a++)g[a]()};b.trust=function(a){a=new String(a);a.$trusted=!0;return a};b.prop=function(a){return(null!=a&&
v.call(a)===K||typeof a===A)&&typeof a.then===A?ba(a):sa(a)};var V=[],$=[],H=[],I=null,ja=0,O=null,oa;b.module=function(a,c){if(!a)throw Error("Please ensure the DOM element exists before rendering a template into it.");var e=V.indexOf(a);0>e&&(e=V.length);var g=!1;if(H[e]&&typeof H[e].onunload===A)H[e].onunload({preventDefault:function(){g=!0}});if(!g){b.redraw.strategy("all");b.startComputation();V[e]=a;var f=oa=c=c||{},d=new (c.controller||function(){});f===oa&&(H[e]=d,$[e]=c);ga();return H[e]}};
b.redraw=function(a){if(I&&!0!==a){if(16<new Date-ja||T===e.requestAnimationFrame)0<I&&ea(I),I=T(ia,16)}else ia(),I=T(function(){I=null},16)};b.redraw.strategy=b.prop();var R=0;b.startComputation=function(){R++};b.endComputation=function(){R=Math.max(R-1,0);0===R&&b.redraw()};var ga=function(){"none"==b.redraw.strategy()?(R--,b.redraw.strategy("diff")):b.endComputation()};b.withAttr=function(a,b){return function(c){c=c||event;c=c.currentTarget||this;b(a in c?c[a]:c.getAttribute(a))}};var L={pathname:"",
hash:"#",search:"?"},da=function(){},P,x;b.route=function(){if(0===arguments.length)return x;if(3===arguments.length&&v.call(arguments[1])===N){var a=arguments[0],c=arguments[1],g=arguments[2];da=function(d){d=x=d.slice(L[b.route.mode].length);ta(a,g,d)||b.route(c,!0)};var k="hash"===b.route.mode?"onhashchange":"onpopstate";e[k]=function(){var a=D[b.route.mode];"pathname"===b.route.mode&&(a+=D.search);x!=a.slice(L[b.route.mode].length)&&da(a)};O=la;e[k]()}else if(arguments[0].addEventListener)k=arguments[0],
k.href=("pathname"!==b.route.mode?D.pathname:"")+L[b.route.mode]+this.attrs.href,k.removeEventListener("click",ka),k.addEventListener("click",ka);else if(v.call(arguments[0])===N){k=x;x=arguments[0];var f=arguments[1]||{},d=x.indexOf("?"),n=-1<d?aa(x.slice(d+1)):{},p;for(p in f)n[p]=f[p];f=W(n);d=-1<d?x.slice(0,d):x;f&&(x=d+(-1===d.indexOf("?")?"?":"&")+f);var q=!0===(3===arguments.length?arguments[2]:arguments[1])||k===arguments[0];e.history.pushState?(O=function(){e.history[q?"replaceState":"pushState"](null,
s.title,L[b.route.mode]+x);la()},da(L[b.route.mode]+x)):D[b.route.mode]=x}};b.route.param=function(a){if(!P)throw Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");return P[a]};b.route.mode="search";b.deferred=function(){var a=new ma;a.promise=ba(a.promise);return a};b.deferred.onerror=function(a){if("[object Error]"===v.call(a)&&!a.constructor.toString().match(/ Error/))throw a;};b.sync=function(a){function c(a,b){return function(c){d[a]=c;b||(e="reject");
0===--f&&(g.promise(d),g[e](d));return c}}var e="resolve",g=b.deferred(),f=a.length,d=Array(f);if(0<a.length)for(var k=0;k<a.length;k++)a[k].then(c(k,!0),c(k,!1));else g.resolve([]);return g.promise};b.request=function(a){!0!==a.background&&b.startComputation();var c=b.deferred(),e=a.dataType&&"jsonp"===a.dataType.toLowerCase(),g=a.serialize=e?ca:a.serialize||JSON.stringify,f=a.deserialize=e?ca:a.deserialize||JSON.parse,d=a.extract||function(a){return 0===a.responseText.length&&f===JSON.parse?null:
a.responseText};a.url=wa(a.url,a.data);a=va(a,a.data,g);a.onload=a.onerror=function(e){try{e=e||event;var g=(("load"===e.type?a.unwrapSuccess:a.unwrapError)||ca)(f(d(e.target,a)));if("load"===e.type)if(v.call(g)===E&&a.type)for(var k=0;k<g.length;k++)g[k]=new a.type(g[k]);else a.type&&(g=new a.type(g));c["load"===e.type?"resolve":"reject"](g)}catch(l){b.deferred.onerror(l),c.reject(l)}!0!==a.background&&b.endComputation()};ua(a);c.promise(a.initialValue);return c.promise};b.deps=function(a){k(e=a||
e);return e};b.deps.factory=g;return b}("undefined"!=typeof window?window:{});"undefined"!=typeof k&&null!==k&&k.exports?k.exports=n:"function"===typeof define&&define.amd&&define(function(){return n})},{}]},{},[1]);
