(function e$$0(p,q,l){function k(f,da){if(!q[f]){if(!p[f]){var b="function"==typeof require&&require;if(!da&&b)return b(f,!0);if(g)return g(f,!0);b=Error("Cannot find module '"+f+"'");throw b.code="MODULE_NOT_FOUND",b;}b=q[f]={exports:{}};p[f][0].call(b.exports,function(b){var g=p[f][1][b];return k(g?g:b)},b,b.exports,e$$0,p,q,l)}return q[f].exports}for(var g="function"==typeof require&&require,f=0;f<l.length;f++)k(l[f]);return k})({1:[function(h,p,q){h=h("./src/app");if(p=document.getElementsByTagName("style")[0]){q=
h.getLsOrKickOut(window);var l={};l["{{cache_key}}"]=p.innerHTML;q.setItem("orkjern_theme_cache",JSON.stringify(l));document.cookie="ORKJERN_THEME_CACHE={{ cache_key }}"}h.init(window)},{"./src/app":2}],2:[function(h,p,q){var l=h("mithril"),k=h("./booter"),g=h("./disqus"),f=h("./gist"),n=h("./controllers/node"),da=h("./controllers/index"),b=h("./controllers/taxonomy");p.exports={appendCss:function(b,k){var f=k.document,g=f.getElementsByTagName("head")[0],n=f.createElement("style");n.type="text/css";
n.styleSheet?n.styleSheet.cssText=b:n.appendChild(f.createTextNode(b));return g.appendChild(n)},getLsOrKickOut:function(b){var f=b.localStorage;return f?f:(b.alert("Your browser is bad, and you should feel bad. You are not welcome here. You will be redirected to a place where you can upgrade your browser."),b.location.href="http://browsehappy.com/")},init:function(h){var C={window:h,m:l};h.test&&l.deps(h);var p=h.document;l.route.mode="pathname";C.controllers={index:new da(C),node:n,taxonomy:new b(C)};
C.booter=new k(C);C.booter.attach();g(C.window);f(C.window);h.disqus_shortname="{{ disqus_shortname }}";if(!h.disqus_shortname||!h.disqus_shortname.length)return C;h.DISQUSWIDGETS=void 0;if(p.querySelectorAll&&0===p.querySelectorAll("a[data-disqus-identifier]").length)for(var w=p.querySelectorAll(".views-field-view-node a"),q=0,W=w.length;q<W;q++){var Q=p.createElement("div");Q.className="comment-count";var L=p.createElement("a");L.href=w[q].pathname;L.setAttribute("data-disqus-identifier",w[q].pathname);
Q.appendChild(L);w[q].parentNode.parentNode.parentNode.insertBefore(Q,w[q].parentNode.parentNode.nextSibling)}w=p.createElement("script");w.async=!0;w.type="text/javascript";w.src="//"+h.disqus_shortname+".disqus.com/count.js";(p.getElementsByTagName("HEAD")[0]||p.getElementsByTagName("BODY")[0]).appendChild(w);return C}}},{"./booter":3,"./controllers/index":4,"./controllers/node":5,"./controllers/taxonomy":6,"./disqus":7,"./gist":8,mithril:12}],3:[function(h,p,q){function l(k){this.app=k;this.window=
k.window;var g=k.controllers.index,f=k.controllers.node;k=k.controllers.taxonomy;this.booted=!1;this.routeConf={};this.routeConf["/"]=g;this.routeConf["/node"]=g;this.routeConf["/:alias"]=f;this.routeConf["/node/:nid"]=f;this.routeConf["/taxonomy/term/:tid"]=k;var n=this.app.m;this.m=n;var g=this.window.document,l=this;this.startFunction=function(){var b=this.getAttribute("href");l.navigate(b);return!1};if(g=g.getElementById("logo"))g.onclick=function(){"/"!==n.route()&&l.navigate("/");return!1}}
p.exports=l;l.prototype.attach=function(k){var g=this.window.document;if(g&&g.querySelectorAll){k=g.querySelectorAll(k||"#main-wrapper a");for(var g=0,f=k.length;g<f;g++)k[g].onclick=this.startFunction}};l.prototype.navigate=function(k){var g=this.window;!this.booted&&g&&g.document&&(this.m.route(g.document.getElementById("main-wrapper"),k,this.routeConf),this.booted=!0);this.m.route(k)};l.prototype.navigateEl=function(k,g){var f=k.getAttribute("href");g.navigate(f);return!1}},{}],4:[function(h,p,
q){q=h("../views/index");var l=h("../http"),k={},g=function(f){var k=f.m;return function(){var g=f.window,b=this;this.nodes=k.prop([]);l("node").then(function(k){b.nodes=k;setTimeout(function(){f.booter.attach(".field-type-taxonomy-term-reference a")},2);var n=f.window.document;g.DISQUSWIDGETS=void 0;g.disqus_shortname&&function(){var b=n.createElement("script");b.async=!0;b.type="text/javascript";b.src="//"+g.disqus_shortname+".disqus.com/count.js";(n.getElementsByTagName("HEAD")[0]||n.getElementsByTagName("BODY")[0]).appendChild(b)}()});
this.navigate=function(b){f.booter.navigateEl(b,f.booter)}}};k.view=q;p.exports=function(f){k.app=f;k.controller=new g(f);return k}},{"../http":9,"../views/index":10}],5:[function(h,p,q){var l=h("mithril");q=h("../views/node");var k=h("../http"),g=h("../gist"),f=h("../disqus");h={controller:function(){var n=this;this.title=l.prop("");this.body=l.prop("Loading...");this.raw=l.prop({});this.image=l.prop("about:blank");n.submitted=l.prop("");var h;this.imageClass=l.prop("noplay");this.toggleImageClass=
function(){l.startComputation();n.imageClass("play");h&&n.image(h);l.endComputation()};var b=l.route.param("alias"),p=l.route.param("nid");if(!b){if(!p){l.route("/");return}b="node/"+p}k(b).then(function(b){if(b){var k=new Date(1E3*b.created[0].value);n.title(b.title[0].value);n.body(b.body[0].value);n.submitted("Submitted "+k.toLocaleDateString());for(var l in b._links)1>l.indexOf("image")||!b._links.hasOwnProperty(l)||!l.indexOf("image")||(h=b._links[l][0].href);n.raw=b;setTimeout(function(){g(window)},
200);window.disqus_shortname="{{ disqus_shortname }}";setTimeout(function(){f(window)},200)}},function(b){404===b&&(n.title("404 not found!"),n.body("The page you are looking for is nowhere to be found. Real sorry about that!"),n.imageClass("hide"));403===b&&(n.title("403 Forbidden!"),n.body("You are not allowed to access this page. I am guessing you already knew that!"))})}};h.view=q;p.exports=h},{"../disqus":7,"../gist":8,"../http":9,"../views/node":11,mithril:12}],6:[function(h,p,q){q=h("../views/index");
var l=h("../http"),k={},g=function(k){var g=k.m;return function(){var h=this;this.nodes=g.prop([]);var b=g.route.param("tid");l("taxonomy/term/"+b).then(function(b){b.map(function(b){b.body=""});h.nodes=b;window.disqus_shortname="{{ disqus_shortname }}";setTimeout(function(){k.booter.attach(".field-type-taxonomy-term-reference a")},2);window.disqus_shortname&&window.disqus_shortname.length&&(window.DISQUSWIDGETS=void 0,function(){var b=document.createElement("script");b.async=!0;b.type="text/javascript";
b.src="//"+window.disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(b)}())});this.navigate=function(b){k.booter.navigateEl(b,k.booter)}}};k.view=q;p.exports=function(f){k.controller=new g(f);return k}},{"../http":9,"../views/index":10}],7:[function(h,p,q){var l=h("mithril");p.exports=function(k){var g=k.document;"undefined"===typeof l&&(l=k.m);var f=function(){if(k.disqus_shortname)if(k.disqus_identifier=l.route(),
k.disqus_identifier||(k.disqus_identifier=k.location.pathname),k.disqus_loaded)k.DISQUS.reset({reload:!0,config:function(){this.page.identifier=k.disqus_identifier;this.page.url=k.location.origin+k.disqus_identifier}});else{k.disqus_loaded=!0;var b=g.createElement("script");b.type="text/javascript";b.async=!0;b.src="//"+k.disqus_shortname+".disqus.com/embed.js?url="+k.disqus_identifier;(g.getElementsByTagName("head")[0]||g.getElementsByTagName("body")[0]).appendChild(b)}},n=g.getElementById("disqus_thread"),
h=!1;k.onscroll=function(){n||(n=g.getElementById("disqus_thread"));!h&&k.scrollY&&n&&n.offsetTop&&k.innerHeight&&k.scrollY+k.innerHeight+50>n.offsetTop&&(h=!0,f())}}},{mithril:12}],8:[function(h,p,q){p.exports=function(h){for(var k=h.document,g=function(b,f){var g="gist_callback"+Math.floor(1E3*Math.random()),n=k.createElement("script");n.setAttribute("src","https://gist.github.com/"+f+".json?callback="+g);h[g]=function(k){delete h[g];var f='<link href="'+k.stylesheet+'" rel="stylesheet">',f=f+k.div;
b.innerHTML=f;n.parentNode.removeChild(n);b.className+="processed"};k.body.appendChild(n)},f=k.getElementsByTagName("gist"),n=0,p=f.length;n<p;n++){var b=f[n];b.className&&-1<b.className.indexOf("processed")||g(b,b.innerHTML)}}},{}],9:[function(h,p,q){p.exports=function(k){return l.request({method:"GET",url:"/"+k+"?json",config:function(k){k.setRequestHeader("Accept","application/hal+json")},extract:function(k){return 200===k.status?k.responseText:JSON.stringify(k.status)},deserialize:function(k){var f;
try{f=JSON.parse(k)}catch(h){f=""}return f}})};var l=h("mithril")},{mithril:12}],10:[function(h,p,q){var l=h("mithril");p.exports=function(k){var h=function(f){return{tag:"article",attrs:{class:"node node--view-mode-teaser clearfix",about:"/aa-cc",typeof:"schema:Article"},children:[{tag:"h2",attrs:{class:"node__title "},children:[{tag:"a",attrs:{href:f.path,onclick:function(){k.navigate(this);return!1}},children:[f.title]}]},{tag:"div",attrs:{class:"node__meta"},children:["Post date: ",f.created]},
{tag:"div",attrs:{class:"read-more"},children:[{tag:"a",attrs:{href:f.path,onclick:function(){k.navigate(this);return!1}},children:["Read more"]}]},{tag:"div",attrs:{class:"comment-count"},children:[{tag:"a",attrs:{"data-disqus-identifier":f.path,href:f.path,onclick:function(){k.navigate(this);return!1}}}]},l.trust(f.field_tags)]}};return{tag:"main",attrs:{id:"content",class:"column",role:"main"},children:[{tag:"section",attrs:{class:"section"},children:[{tag:"div",attrs:{class:"content"},children:[{tag:"div",
attrs:{},children:[k.nodes.map?k.nodes.map(h):""]}]}]}]}}},{mithril:12}],11:[function(h,p,q){var l=h("mithril");p.exports=function(k){return{tag:"main",attrs:{id:"content",class:"column",role:"main"},children:[{tag:"section",attrs:{class:"section"},children:[{tag:"div",attrs:{class:"content"},children:[{tag:"article",attrs:{class:"node node--view-mode-full clearfix",about:"/aa-cc",typeof:"schema:Article"},children:[{tag:"h1",attrs:{class:"title",id:"page-title"},children:[k.title()]},{tag:"div",attrs:{class:"node__meta"},
children:[k.submitted()]},{tag:"div",attrs:{class:"node__content clearfix "},children:[{tag:"p",attrs:{},children:[l.trust(k.body())]}]},{tag:"div",attrs:{class:k.imageClass()+" image",onclick:k.toggleImageClass},children:[{tag:"img",attrs:{src:k.image()}},{tag:"h2",attrs:{},children:["Play"]}]}]},{tag:"div",attrs:{class:"twitter"},children:["This blog is written by me, ",{tag:"a",attrs:{href:"https://twitter.com/orkj"},children:["eiriksm. Feel free to say hi on twitter."]}]},{tag:"div",attrs:{id:"disqus_thread"}}]}]}]}}},
{mithril:12}],12:[function(h,p,q){var l=function g(f,h){function l(a){v=a.document;H=a.location;la=a.cancelAnimationFrame||a.clearTimeout;X=a.requestAnimationFrame||a.setTimeout}function b(){var a=[].slice.call(arguments),b=null!=a[1]&&x.call(a[1])===M&&!("tag"in a[1]||"view"in a[1])&&!("subtree"in a[1]),c=b?a[1]:{},m="class"in c?"class":"className",e={tag:"div",attrs:{}},d,f=[];if(x.call(a[0])!=R)throw Error("selector in m(selector, attrs, children) should be a string");for(;d=ta.exec(a[0]);)""===
d[1]&&d[2]?e.tag=d[2]:"#"===d[1]?e.attrs.id=d[2]:"."===d[1]?f.push(d[2]):"["===d[3][0]&&(d=ua.exec(d[3]),e.attrs[d[1]]=d[3]||(d[2]?"":!0));a=b?a.slice(2):a.slice(1);1===a.length&&x.call(a[0])===E?e.children=a[0]:e.children=a;for(var h in c)c.hasOwnProperty(h)&&(h===m&&null!=c[h]&&""!==c[h]?(f.push(c[h]),e.attrs[h]=""):e.attrs[h]=c[h]);0<f.length&&(e.attrs[m]=f.join(" "));return e}function p(a,D,c,m,e,d,f,g,l,B,Y){try{if(null==e||null==e.toString())e=""}catch(Da){e=""}if("retain"===e.subtree)return d;
var s=x.call(d),t=x.call(e);if(null==d||s!==t)null!=d&&(c&&c.nodes?(m=g-m,d=m+(t===E?e:d.nodes).length,w(c.nodes.slice(m,d),c.slice(m,d))):d.nodes&&w(d.nodes,d)),d=new e.constructor,d.tag&&(d={}),d.nodes=[];if(t===E){c=0;for(var r=e.length;c<r;c++)x.call(e[c])===E&&(e=e.concat.apply([],e),c--,r=e.length);t=[];m=d.length===e.length;var s=0,u={},y=!1;for(c=0;c<d.length;c++)d[c]&&d[c].attrs&&null!=d[c].attrs.key&&(y=!0,u[d[c].attrs.key]={action:1,index:c});var z=0;c=0;for(r=e.length;c<r;c++)if(e[c]&&
e[c].attrs&&null!=e[c].attrs.key){c=0;for(r=e.length;c<r;c++)e[c]&&e[c].attrs&&null==e[c].attrs.key&&(e[c].attrs.key="__mithril__"+z++);break}if(y){r=!1;if(e.length!=d.length)r=!0;else for(c=0;y=d[c],z=e[c];c++)if(y.attrs&&z.attrs&&y.attrs.key!=z.attrs.key){r=!0;break}if(r){c=0;for(r=e.length;c<r;c++)e[c]&&e[c].attrs&&null!=e[c].attrs.key&&(y=e[c].attrs.key,u[y]=u[y]?{action:3,index:c,from:u[y].index,element:d.nodes[u[y].index]||v.createElement("div")}:{action:2,index:c});c=[];for(var F in u)c.push(u[F]);
F=c.sort(q);u=Array(d.length);u.nodes=d.nodes.slice();for(c=0;r=F[c];c++)1===r.action&&(w(d[r.index].nodes,d[r.index]),u.splice(r.index,1)),2===r.action&&(y=v.createElement("div"),y.key=e[r.index].attrs.key,a.insertBefore(y,a.childNodes[r.index]||null),u.splice(r.index,0,{attrs:{key:e[r.index].attrs.key},nodes:[y]}),u.nodes[r.index]=y),3===r.action&&(a.childNodes[r.index]!==r.element&&null!==r.element&&a.insertBefore(r.element,a.childNodes[r.index]||null),u[r.index]=d[r.from],u.nodes[r.index]=r.element);
d=u}}F=c=0;for(r=e.length;c<r;c++)u=p(a,D,d,g,e[c],d[F],f,g+s||s,l,B,Y),u!==h&&(u.nodes.intact||(m=!1),s=u.$trusted?s+(u.match(/<[^\/]|\>\s*[^<]/g)||[0]).length:s+(x.call(u)===E?u.length:1),d[F++]=u);if(!m){c=0;for(r=e.length;c<r;c++)null!=d[c]&&t.push.apply(t,d[c].nodes);for(c=0;m=d.nodes[c];c++)null!=m.parentNode&&0>t.indexOf(m)&&w([m],[d[c]]);e.length<d.length&&(d.length=e.length);d.nodes=t}}else if(null!=e&&t===M){t=[];for(D=[];e.view;){c=e.view.$original||e.view;m="diff"==b.redraw.strategy()&&
d.views?d.views.indexOf(c):-1;s=-1<m?d.controllers[m]:new (e.controller||I);y=e&&e.attrs&&e.attrs.key;e=0==J||d&&d.controllers&&-1<d.controllers.indexOf(s)?e.view(s):{tag:"placeholder"};if("retain"===e.subtree)return d;y&&(e.attrs||(e.attrs={}),e.attrs.key=y);s.onunload&&Z.push({controller:s,handler:s.onunload});t.push(c);D.push(s)}if(!e.tag&&D.length)throw Error("Component template must return a virtual element, not an array, string, etc.");e.attrs||(e.attrs={});d.attrs||(d.attrs={});c=Object.keys(e.attrs);
u=c.length>("key"in e.attrs?1:0);if(e.tag!=d.tag||c.sort().join()!=Object.keys(d.attrs).sort().join()||e.attrs.id!=d.attrs.id||e.attrs.key!=d.attrs.key||"all"==b.redraw.strategy()&&(!d.configContext||!0!==d.configContext.retain)||"diff"==b.redraw.strategy()&&d.configContext&&!1===d.configContext.retain){d.nodes.length&&w(d.nodes);if(d.configContext&&typeof d.configContext.onunload===A)d.configContext.onunload();if(d.controllers)for(c=0;s=d.controllers[c];c++)if(typeof s.onunload===A)s.onunload({preventDefault:I})}if(x.call(e.tag)!=
R)return;F=0===d.nodes.length;e.attrs.xmlns?B=e.attrs.xmlns:"svg"===e.tag?B="http://www.w3.org/2000/svg":"math"===e.tag&&(B="http://www.w3.org/1998/Math/MathML");if(F){m=e.attrs.is?B===h?v.createElement(e.tag,e.attrs.is):v.createElementNS(B,e.tag,e.attrs.is):B===h?v.createElement(e.tag):v.createElementNS(B,e.tag);d={tag:e.tag,attrs:u?ea(m,e.tag,e.attrs,{},B):e.attrs,children:null!=e.children&&0<e.children.length?p(m,e.tag,h,h,e.children,d.children,!0,0,e.attrs.contenteditable?m:l,B,Y):e.children,
nodes:[m]};if(D.length)for(d.views=t,d.controllers=D,c=0;s=D[c];c++)s.onunload&&s.onunload.$old&&(s.onunload=s.onunload.$old),J&&s.onunload&&(f=s.onunload,s.onunload=I,s.onunload.$old=f);d.children&&!d.children.nodes&&(d.children.nodes=[]);"select"===e.tag&&"value"in e.attrs&&ea(m,e.tag,{value:e.attrs.value},{},B);a.insertBefore(m,a.childNodes[g]||null)}else m=d.nodes[0],u&&ea(m,e.tag,e.attrs,d.attrs,B),d.children=p(m,e.tag,h,h,e.children,d.children,!1,0,e.attrs.contenteditable?m:l,B,Y),d.nodes.intact=
!0,D.length&&(d.views=t,d.controllers=D),!0===f&&null!=m&&a.insertBefore(m,a.childNodes[g]||null);typeof e.attrs.config===A&&(a=d.configContext=d.configContext||{},Y.push(function(a,c){return function(){return a.attrs.config.apply(a,c)}}(e,[m,!F,a,d])))}else if(typeof e!=A)if(0===d.nodes.length)e.$trusted?t=W(a,g,e):(t=[v.createTextNode(e)],a.nodeName.match(va)||a.insertBefore(t[0],a.childNodes[g]||null)),d=-1<"string number boolean".indexOf(typeof e)?new e.constructor(e):e,d.nodes=t;else if(d.valueOf()!==
e.valueOf()||!0===f){t=d.nodes;if(!l||l!==v.activeElement)if(e.$trusted)w(t,d),t=W(a,g,e);else if("textarea"===D)a.value=e;else if(l)l.innerHTML=e;else{if(1===t[0].nodeType||1<t.length)w(d.nodes,d),t=[v.createTextNode(e)];a.insertBefore(t[0],a.childNodes[g]||null);t[0].nodeValue=e}d=new e.constructor(e);d.nodes=t}else d.nodes.intact=!0;return d}function q(a,b){return a.action-b.action||a.index-b.index}function ea(a,b,c,m,e){for(var d in c){var f=c[d],h=m[d];if(d in m&&h===f)"value"===d&&"input"===
b&&a.value!=f&&(a.value=f);else{m[d]=f;try{if("config"!==d&&"key"!=d)if(typeof f===A&&0===d.indexOf("on"))a[d]=Q(f,a);else if("style"===d&&null!=f&&x.call(f)===M){for(var g in f)if(null==h||h[g]!==f[g])a.style[g]=f[g];for(g in h)g in f||(a.style[g]="")}else if(null!=e)"href"===d?a.setAttributeNS("http://www.w3.org/1999/xlink","href",f):"className"===d?a.setAttribute("class",f):a.setAttribute(d,f);else if(d in a&&"list"!==d&&"style"!==d&&"form"!==d&&"type"!==d&&"width"!==d&&"height"!==d){if("input"!==
b||a[d]!==f)a[d]=f}else a.setAttribute(d,f)}catch(l){if(0>l.message.indexOf("Invalid argument"))throw l;}}}return m}function w(a,b){for(var c=a.length-1;-1<c;c--)if(a[c]&&a[c].parentNode){try{a[c].parentNode.removeChild(a[c])}catch(m){}b=[].concat(b);b[c]&&fa(b[c])}0!=a.length&&(a.length=0)}function fa(a){a.configContext&&typeof a.configContext.onunload===A&&(a.configContext.onunload(),a.configContext.onunload=null);if(a.controllers)for(var b=0,c;c=a.controllers[b];b++)if(typeof c.onunload===A)c.onunload({preventDefault:I});
if(a.children)if(x.call(a.children)===E)for(b=0;c=a.children[b];b++)fa(c);else a.children.tag&&fa(a.children)}function W(a,b,c){var m=a.childNodes[b];if(m){var e=1!=m.nodeType,d=v.createElement("span");e?(a.insertBefore(d,m||null),d.insertAdjacentHTML("beforebegin",c),a.removeChild(d)):m.insertAdjacentHTML("beforebegin",c)}else a.insertAdjacentHTML("beforeend",c);for(c=[];a.childNodes[b]!==m;)c.push(a.childNodes[b]),b++;return c}function Q(a,f){return function(c){c=c||event;b.redraw.strategy("diff");
b.startComputation();try{return a.call(f,c)}finally{ma()}}}function L(a){var b=na.indexOf(a);return 0>b?na.push(a)-1:b}function wa(a){var b=function(){arguments.length&&(a=arguments[0]);return a};b.toJSON=function(){return a};return b}function xa(a,b){var c=function(c){1<arguments.length&&(b=b.concat([].slice.call(arguments,1)));return a.view.apply(a,b?[c].concat(b):[c])};c.$original=a.view;c={controller:function(){return(a.controller||I).apply(this,b)||this},view:c};b[0]&&null!=b[0].key&&(c.attrs=
{key:b[0].key});return c}function oa(){N&&(N(),N=null);for(var a=0,f;f=$[a];a++)if(G[a]){var c=O[a].controller&&O[a].controller.$$args?[G[a]].concat(O[a].controller.$$args):[G[a]];b.render(f,O[a].view?O[a].view(G[a],c):"")}S&&(S(),S=null);K=null;pa=new Date;b.redraw.strategy("diff")}function ya(a,f,c){T={};var m=c.indexOf("?");-1!==m&&(T=aa(c.substr(m+1,c.length)),c=c.substr(0,m));var m=Object.keys(f),e=m.indexOf(c);if(-1!==e)return b.mount(a,f[m[e]]),!0;for(var d in f){if(d===c)return b.mount(a,
f[d]),!0;m=new RegExp("^"+d.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(m.test(c))return c.replace(m,function(){for(var c=d.match(/:[^\/]+/g)||[],e=[].slice.call(arguments,1,-2),m=0,h=c.length;m<h;m++)T[c[m].replace(/:|\./g,"")]=decodeURIComponent(e[m]);b.mount(a,f[d])}),!0}}function ba(a){a=a||event;if(!a.ctrlKey&&!a.metaKey&&2!==a.which){a.preventDefault?a.preventDefault():a.returnValue=!1;a=a.currentTarget||a.srcElement;for(var f="pathname"===b.route.mode&&a.search?
aa(a.search.slice(1)):{};a&&"A"!=a.nodeName.toUpperCase();)a=a.parentNode;b.route(a[b.route.mode].slice(P[b.route.mode].length),f)}}function qa(){"hash"!=b.route.mode&&H.hash?H.hash=H.hash:f.scrollTo(0,0)}function U(a,b){var c={},f=[],e;for(e in a){var d=b?b+"["+e+"]":e,g=a[e],l=x.call(g),l=null===g?encodeURIComponent(d):l===M?U(g,d):l===E?g.reduce(function(a,b){c[d]||(c[d]={});return c[d][b]?a:(c[d][b]=!0,a.concat(encodeURIComponent(d)+"="+encodeURIComponent(b)))},[]).join("&"):encodeURIComponent(d)+
"="+encodeURIComponent(g);g!==h&&f.push(l)}return f.join("&")}function aa(a){"?"===a.charAt(0)&&(a=a.substring(1));a=a.split("&");for(var b={},c=0,f=a.length;c<f;c++){var e=a[c].split("="),d=decodeURIComponent(e[0]),e=2==e.length?decodeURIComponent(e[1]):null;null!=b[d]?(x.call(b[d])!==E&&(b[d]=[b[d]]),b[d].push(e)):b[d]=e}return b}function ca(a,f){var c=b.prop(f);a.then(c);c.then=function(c,b){return ca(a.then(c,b),f)};return c}function ga(a,f){function c(a){n=a||l;s.map(function(a){n===g&&a.resolve(q)||
a.reject(q)})}function m(a,c,d,e){if((null!=q&&x.call(q)===M||typeof q===A)&&typeof a===A)try{var f=0;a.call(q,function(a){f++||(q=a,c())},function(a){f++||(q=a,d())})}catch(m){b.deferred.onerror(m),q=m,d()}else e()}function e(){var l;try{l=q&&q.then}catch(r){return b.deferred.onerror(r),q=r,n=h,e()}m(l,function(){n=d;e()},function(){n=h;e()},function(){try{n===d&&typeof a===A?q=a(q):n===h&&"function"===typeof f&&(q=f(q),n=d)}catch(e){return b.deferred.onerror(e),q=e,c()}q===p?(q=TypeError(),c()):
m(l,function(){c(g)},c,function(){c(n===d&&g)})})}var d=1,h=2,g=3,l=4,p=this,n=0,q=0,s=[];p.promise={};p.resolve=function(a){n||(q=a,n=d,e());return this};p.reject=function(a){n||(q=a,n=h,e());return this};p.promise.then=function(a,c){var b=new ga(a,c);n===g?b.resolve(q):n===l?b.reject(q):s.push(b);return b.promise}}function ha(a){return a}function za(a){if(a.dataType&&"jsonp"===a.dataType.toLowerCase()){var b="mithril_callback_"+(new Date).getTime()+"_"+Math.round(1E16*Math.random()).toString(36),
c=v.createElement("script");f[b]=function(d){c.parentNode.removeChild(c);a.onload({type:"load",target:{responseText:d}});f[b]=h};c.onerror=function(d){c.parentNode.removeChild(c);a.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}});f[b]=h;return!1};c.onload=function(a){return!1};c.src=a.url+(0<a.url.indexOf("?")?"&":"?")+(a.callbackKey?a.callbackKey:"callback")+"="+b+"&"+U(a.data||{});v.body.appendChild(c)}else{var m=new f.XMLHttpRequest;
m.open(a.method,a.url,!0,a.user,a.password);m.onreadystatechange=function(){if(4===m.readyState)if(200<=m.status&&300>m.status)a.onload({type:"load",target:m});else a.onerror({type:"error",target:m})};a.serialize===JSON.stringify&&a.data&&"GET"!==a.method&&m.setRequestHeader("Content-Type","application/json; charset=utf-8");a.deserialize===JSON.parse&&m.setRequestHeader("Accept","application/json, text/*");if(typeof a.config===A){var e=a.config(m,a);null!=e&&(m=e)}if((e="GET"!==a.method&&a.data?a.data:
"")&&x.call(e)!=R&&e.constructor!=f.FormData)throw"Request data should be either be a string or FormData. Check the `serialize` option in `m.request`";m.send(e);return m}}function Aa(a,b,c){"GET"===a.method&&"jsonp"!=a.dataType?(c=0>a.url.indexOf("?")?"?":"&",b=U(b),a.url+=b?c+b:""):a.data=c(b);return a}function Ba(a,b){var c=a.match(/:[a-z]\w+/gi);if(c&&b)for(var f=0;f<c.length;f++){var e=c[f].slice(1);a=a.replace(c[f],b[e]);delete b[e]}return a}var M="[object Object]",E="[object Array]",R="[object String]",
A="function",x={}.toString,ta=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g,ua=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/,va=/^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/,I=function(){},v,H,X,la;l(f);var ra,Ca={appendChild:function(a){ra===h&&(ra=v.createElement("html"));v.documentElement&&v.documentElement!==a?v.replaceChild(a,v.documentElement):v.appendChild(a);this.childNodes=v.childNodes},insertBefore:function(a){this.appendChild(a)},childNodes:[]},na=[],V={};b.render=
function(a,b,c){var f=[];if(!a)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var e=L(a),d=a===v,g=d||a===v.documentElement?Ca:a;d&&"html"!=b.tag&&(b={tag:"html",attrs:{},children:b});V[e]===h&&w(g.childNodes);!0===c&&(c=L(a),w(a.childNodes,V[c]),V[c]=h);V[e]=p(g,null,h,h,b,V[e],!1,0,null,h,f);a=0;for(b=f.length;a<b;a++)f[a]()};b.trust=function(a){a=new String(a);a.$trusted=!0;return a};b.prop=function(a){return(null!=a&&x.call(a)===M||typeof a===
A)&&typeof a.then===A?ca(a):wa(a)};var $=[],O=[],G=[],K=null,pa=0,N=null,S=null,sa,Z=[];b.component=function(a){return xa(a,[].slice.call(arguments,1))};b.mount=b.module=function(a,f){if(!a)throw Error("Please ensure the DOM element exists before rendering a template into it.");var c=$.indexOf(a);0>c&&(c=$.length);for(var h=!1,e={preventDefault:function(){h=!0;N=S=null}},d=0,g;g=Z[d];d++)g.handler.call(g.controller,e),g.controller.onunload=null;if(h)for(d=0;g=Z[d];d++)g.controller.onunload=g.handler;
else Z=[];if(G[c]&&typeof G[c].onunload===A)G[c].onunload(e);if(!h)return b.redraw.strategy("all"),b.startComputation(),$[c]=a,2<arguments.length&&(f=subcomponent(f,[].slice.call(arguments,2))),e=sa=f=f||{controller:function(){}},d=new (f.controller||I),e===sa&&(G[c]=d,O[c]=f),ma(),G[c]};var ia=!1;b.redraw=function(a){if(!ia){ia=!0;if(K&&!0!==a){if(X===f.requestAnimationFrame||16<new Date-pa)0<K&&la(K),K=X(oa,16)}else oa(),K=X(function(){K=null},16);ia=!1}};b.redraw.strategy=b.prop();var J=0;b.startComputation=
function(){J++};b.endComputation=function(){J=Math.max(J-1,0);0===J&&b.redraw()};var ma=function(){"none"==b.redraw.strategy()?(J--,b.redraw.strategy("diff")):b.endComputation()};b.withAttr=function(a,b){return function(c){c=c||event;c=c.currentTarget||this;b(a in c?c[a]:c.getAttribute(a))}};var P={pathname:"",hash:"#",search:"?"},ja=I,T,z,ka=!1;b.route=function(){if(0===arguments.length)return z;if(3===arguments.length&&x.call(arguments[1])===R){var a=arguments[0],h=arguments[1],c=arguments[2];ja=
function(d){d=z=d.slice(P[b.route.mode].length);if(!ya(a,c,d)){if(ka)throw Error("Ensure the default route matches one of the routes defined in m.route");ka=!0;b.route(h,!0);ka=!1}};var g="hash"===b.route.mode?"onhashchange":"onpopstate";f[g]=function(){var a=H[b.route.mode];"pathname"===b.route.mode&&(a+=H.search);z!=a.slice(P[b.route.mode].length)&&ja(a)};N=qa;f[g]()}else if(arguments[0].addEventListener||arguments[0].attachEvent)g=arguments[0],g.href=("pathname"!==b.route.mode?H.pathname:"")+P[b.route.mode]+
arguments[3].attrs.href,g.addEventListener?(g.removeEventListener("click",ba),g.addEventListener("click",ba)):(g.detachEvent("onclick",ba),g.attachEvent("onclick",ba));else if(x.call(arguments[0])===R){g=z;z=arguments[0];var e=arguments[1]||{},d=z.indexOf("?"),l=-1<d?aa(z.slice(d+1)):{},n;for(n in e)l[n]=e[n];e=U(l);d=-1<d?z.slice(0,d):z;e&&(z=d+(-1===d.indexOf("?")?"?":"&")+e);var p=!0===(3===arguments.length?arguments[2]:arguments[1])||g===arguments[0];f.history.pushState?(N=qa,S=function(){f.history[p?
"replaceState":"pushState"](null,v.title,P[b.route.mode]+z)}):H[b.route.mode]=z;ja(P[b.route.mode]+z)}};b.route.param=function(a){if(!T)throw Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");return T[a]};b.route.mode="search";b.route.buildQueryString=U;b.route.parseQueryString=aa;b.deferred=function(){var a=new ga;a.promise=ca(a.promise);return a};b.deferred.onerror=function(a){if("[object Error]"===x.call(a)&&!a.constructor.toString().match(/ Error/))throw a;
};b.sync=function(a){function f(a,b){return function(f){d[a]=f;b||(c="reject");0===--e&&(g.promise(d),g[c](d));return f}}var c="resolve",g=b.deferred(),e=a.length,d=Array(e);if(0<a.length)for(var h=0;h<a.length;h++)a[h].then(f(h,!0),f(h,!1));else g.resolve([]);return g.promise};b.request=function(a){!0!==a.background&&b.startComputation();var f=new ga,c=a.dataType&&"jsonp"===a.dataType.toLowerCase(),g=a.serialize=c?ha:a.serialize||JSON.stringify,e=a.deserialize=c?ha:a.deserialize||JSON.parse,d=c?
function(a){return a.responseText}:a.extract||function(a){return 0===a.responseText.length&&e===JSON.parse?null:a.responseText};a.method=(a.method||"GET").toUpperCase();a.url=Ba(a.url,a.data);a=Aa(a,a.data,g);a.onload=a.onerror=function(c){try{c=c||event;var g=(("load"===c.type?a.unwrapSuccess:a.unwrapError)||ha)(e(d(c.target,a)),c.target);if("load"===c.type)if(x.call(g)===E&&a.type)for(var h=0;h<g.length;h++)g[h]=new a.type(g[h]);else a.type&&(g=new a.type(g));f["load"===c.type?"resolve":"reject"](g)}catch(l){b.deferred.onerror(l),
f.reject(l)}!0!==a.background&&b.endComputation()};za(a);f.promise=ca(f.promise,a.initialValue);return f.promise};b.deps=function(a){l(f=a||f);return f};b.deps.factory=g;return b}("undefined"!=typeof window?window:{});"undefined"!=typeof p&&null!==p&&p.exports?p.exports=l:"function"===typeof define&&define.amd&&define(function(){return l})},{}]},{},[1]);
