(function e$$0(k,q,p){function b(n,ia){if(!q[n]){if(!k[n]){var u="function"==typeof require&&require;if(!ia&&u)return u(n,!0);if(c)return c(n,!0);u=Error("Cannot find module '"+n+"'");throw u.code="MODULE_NOT_FOUND",u;}u=q[n]={exports:{}};k[n][0].call(u.exports,function(c){var d=k[n][1][c];return b(d?d:c)},u,u.exports,e$$0,k,q,p)}return q[n].exports}for(var c="function"==typeof require&&require,n=0;n<p.length;n++)b(p[n]);return b})({1:[function(h,k,q){h=h("./src/app");k=h.getLsOrKickOut(window);try{var p=
k.getItem("orkjern_theme_cache");if(!p)throw Error("Have no cache data");var b=JSON.parse(p);if(!b)throw Error("Can not parse data");if(!b["{{cache_key}}"])throw Error("Have old cache");h.appendCss(b["{{cache_key}}"],window)}catch(c){k.clear("orkjern_theme_cache"),document.cookie="ORKJERN_THEME_CACHE=123",window.location.reload()}h.init(window)},{"./src/app":2}],2:[function(h,k,q){var p=h("mithril"),b=h("./booter"),c=h("./disqus"),n=h("./gist"),v=h("./controllers/node"),ia=h("./controllers/index"),
u=h("./controllers/taxonomy");k.exports={appendCss:function(b,d){var c=d.document,n=c.getElementsByTagName("head")[0],v=c.createElement("style");v.type="text/css";v.styleSheet?v.styleSheet.cssText=b:v.appendChild(c.createTextNode(b));return n.appendChild(v)},getLsOrKickOut:function(b){var d=b.localStorage;if(!d){if(b.navigator&&b.navigator.userAgent&&b.navigator.userAgent.match(/Twitter/))return!1;b.alert("Your browser is bad, and you should feel bad. You are not welcome here. You will be redirected to a place where you can upgrade your browser.");
b.location.href="http://browsehappy.com/";return!1}return d},init:function(h){var d={window:h,m:p};h.test&&p.deps(h);var w=h.document;p.route.mode="pathname";d.controllers={index:new ia(d),node:v,taxonomy:new u(d)};d.booter=new b(d);d.booter.attach();c(d.window);n(d.window);h.disqus_shortname="{{ disqus_shortname }}";if(!h.disqus_shortname||!h.disqus_shortname.length)return d;h.DISQUSWIDGETS=void 0;if(w.querySelectorAll&&0===w.querySelectorAll("a[data-disqus-identifier]").length)for(var k=w.querySelectorAll(".views-field-view-node a"),
q=0,M=k.length;q<M;q++){var R=w.createElement("div");R.className="comment-count";var S=w.createElement("a");S.href=k[q].pathname;S.setAttribute("data-disqus-identifier",k[q].pathname);R.appendChild(S);k[q].parentNode.parentNode.parentNode.insertBefore(R,k[q].parentNode.parentNode.nextSibling)}k=w.createElement("script");k.async=!0;k.type="text/javascript";k.src="//"+h.disqus_shortname+".disqus.com/count.js";(w.getElementsByTagName("HEAD")[0]||w.getElementsByTagName("BODY")[0]).appendChild(k);return d}}},
{"./booter":3,"./controllers/index":4,"./controllers/node":5,"./controllers/taxonomy":6,"./disqus":7,"./gist":8,mithril:12}],3:[function(h,k,q){function p(b){this.app=b;this.window=b.window;var c=b.controllers.index,n=b.controllers.node;b=b.controllers.taxonomy;this.booted=!1;this.routeConf={};this.routeConf["/"]=c;this.routeConf["/node"]=c;this.routeConf["/:alias"]=n;this.routeConf["/node/:nid"]=n;this.routeConf["/taxonomy/term/:tid"]=b;var v=this.app.m;this.m=v;var c=this.window.document,p=this;
this.startFunction=function(){var b=this.getAttribute("href");p.navigate(b);return!1};if(c=c.querySelector(".site-name a"))c.onclick=function(){"/"!==v.route()&&p.navigate("/");return!1}}k.exports=p;p.prototype.attach=function(b){console.log(b);var c=this.window.document;if(c&&c.querySelectorAll){b=c.querySelectorAll(b||"#main-wrapper a");for(var c=0,n=b.length;c<n;c++){var v=!1;0===b[c].href.indexOf(window.location.protocol+"//"+window.location.hostname)&&(v=!0);0===b[c].href.indexOf("/")&&(v=!0);
v&&(b[c].onclick=this.startFunction)}}};p.prototype.navigate=function(b){var c=this.window;!this.booted&&c&&c.document&&(this.m.route(c.document.getElementById("main-wrapper"),b,this.routeConf),this.booted=!0);this.m.route(b)};p.prototype.navigateEl=function(b,c){var n=b.getAttribute("href");c.navigate(n);return!1}},{}],4:[function(h,k,q){q=h("../views/index");var p=h("../http"),b={},c=function(b){var c=b.m;return function(){var h=b.window,k=this;this.nodes=c.prop([]);p("api/node").then(function(c){k.nodes=
c;setTimeout(function(){b.booter.attach(".field-type-taxonomy-term-reference a")},2);var d=b.window.document;h.DISQUSWIDGETS=void 0;h.disqus_shortname&&function(){var b=d.createElement("script");b.async=!0;b.type="text/javascript";b.src="//"+h.disqus_shortname+".disqus.com/count.js";(d.getElementsByTagName("HEAD")[0]||d.getElementsByTagName("BODY")[0]).appendChild(b)}()});this.navigate=function(c){b.booter.navigateEl(c,b.booter)}}};b.view=q;k.exports=function(n){b.app=n;b.controller=new c(n);return b}},
{"../http":9,"../views/index":10}],5:[function(h,k,q){var p=h("mithril");q=h("../views/node");var b=h("../http"),c=h("../gist"),n=h("../disqus");h={controller:function(){var v=this;this.title=p.prop("");this.body=p.prop("Loading...");this.raw=p.prop({});this.tags=p.prop([]);this.image=p.prop("about:blank");v.submitted=p.prop("");var h;this.imageClass=p.prop("noplay");this.toggleImageClass=function(){p.startComputation();v.imageClass("play");h&&v.image(h);p.endComputation()};var k=p.route.param("alias"),
q=p.route.param("nid");if(!k){if(!q){p.route("/");return}k="node/"+q}b(k).then(function(d){if(d){var b=new Date(1E3*d.created[0].value);v.title(d.title[0].value);v.body(d.body[0].value);v.submitted("Submitted "+b.toLocaleDateString());var b=[],p;for(p in d._links)if(!(1>p.indexOf("image")&&1>p.indexOf("tags"))&&d._links.hasOwnProperty(p)&&(0<p.indexOf("image")&&(h=d._links[p][0].href),0<p.indexOf("tags")))for(var k=0,q=d._links[p].length;k<q;k++){var u=d._links[p][k].href,u=u.substring(u.lastIndexOf("/")+
1,u.lastIndexOf("?"));orkjernTags[u]&&b.push({tid:u,title:orkjernTags[u]})}b.length&&v.tags(b);v.raw=d;setTimeout(function(){c(window)},200);window.disqus_shortname="{{ disqus_shortname }}";setTimeout(function(){n(window)},200)}},function(b){404===b&&(v.title("404 not found!"),v.body("The page you are looking for is nowhere to be found. Real sorry about that!"),v.imageClass("hide"));403===b&&(v.title("403 Forbidden!"),v.body("You are not allowed to access this page. I am guessing you already knew that!"))})}};
h.view=q;k.exports=h},{"../disqus":7,"../gist":8,"../http":9,"../views/node":11,mithril:12}],6:[function(h,k,q){q=h("../views/index");var p=h("../http"),b={},c=function(b){var c=b.m;return function(){var h=this;this.nodes=c.prop([]);var k=c.route.param("tid");p("api/taxonomy/term/"+k).then(function(c){c.map(function(b){b.body=""});h.nodes=c;window.disqus_shortname="{{ disqus_shortname }}";setTimeout(function(){b.booter.attach(".field-type-taxonomy-term-reference a")},2);window.disqus_shortname&&window.disqus_shortname.length&&
(window.DISQUSWIDGETS=void 0,function(){var b=document.createElement("script");b.async=!0;b.type="text/javascript";b.src="//"+window.disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(b)}())});this.navigate=function(c){b.booter.navigateEl(c,b.booter)}}};b.view=q;k.exports=function(n){b.controller=new c(n);return b}},{"../http":9,"../views/index":10}],7:[function(h,k,q){var p=h("mithril");k.exports=function(b){var c=
b.document;"undefined"===typeof p&&(p=b.m);var n=function(){if(b.disqus_shortname)if(b.disqus_identifier=p.route(),b.disqus_identifier||(b.disqus_identifier=b.location.pathname),b.disqus_loaded)b.DISQUS.reset({reload:!0,config:function(){this.page.identifier=b.disqus_identifier;this.page.url=b.location.origin+b.disqus_identifier}});else{b.disqus_loaded=!0;var n=c.createElement("script");n.type="text/javascript";n.async=!0;n.src="//"+b.disqus_shortname+".disqus.com/embed.js?url="+b.disqus_identifier;
(c.getElementsByTagName("head")[0]||c.getElementsByTagName("body")[0]).appendChild(n)}},h=c.getElementById("disqus_thread"),k=!1;b.onscroll=function(){h||(h=c.getElementById("disqus_thread"));!k&&b.scrollY&&h&&h.offsetTop&&b.innerHeight&&b.scrollY+b.innerHeight+50>h.offsetTop&&(k=!0,n())}}},{mithril:12}],8:[function(h,k,q){k.exports=function(h){for(var b=h.document,c=function(c,d){var n="gist_callback"+Math.floor(1E3*Math.random()),k=b.createElement("script");k.setAttribute("src","https://gist.github.com/"+
d+".json?callback="+n);h[n]=function(b){delete h[n];var d='<link href="'+b.stylesheet+'" rel="stylesheet">',d=d+b.div;c.innerHTML=d;k.parentNode.removeChild(k);c.className+="processed"};b.body.appendChild(k)},n=b.getElementsByTagName("gist"),k=0,q=n.length;k<q;k++){var u=n[k];u.className&&-1<u.className.indexOf("processed")||c(u,u.innerHTML)}}},{}],9:[function(h,k,q){k.exports=function(b){return p.request({method:"GET",url:"/"+b+"?_format=hal_json",config:function(b){b.setRequestHeader("Accept","application/hal+json")},
extract:function(b){return 200===b.status?b.responseText:JSON.stringify(b.status)},deserialize:function(b){var n;try{n=JSON.parse(b)}catch(h){n=""}return n}})};var p=h("mithril")},{mithril:12}],10:[function(h,k,q){var p=h("mithril");k.exports=function(b){var c=function(c){return{tag:"article",attrs:{class:"node node--view-mode-teaser clearfix",about:"/aa-cc",typeof:"schema:Article"},children:[{tag:"h2",attrs:{class:"node__title "},children:[{tag:"a",attrs:{href:c.path,onclick:function(){b.navigate(this);
return!1}},children:[c.title]}]},{tag:"div",attrs:{class:"node__meta"},children:["Post date: ",c.created]},{tag:"div",attrs:{class:"read-more"},children:[{tag:"a",attrs:{href:c.path,onclick:function(){b.navigate(this);return!1}},children:["Read more"]}]},{tag:"div",attrs:{class:"comment-count"},children:[{tag:"a",attrs:{"data-disqus-identifier":c.path,href:c.path,onclick:function(){b.navigate(this);return!1}}}]},p.trust(c.field_tags)]}};return{tag:"main",attrs:{id:"content",class:"column",role:"main"},
children:[{tag:"section",attrs:{class:"section"},children:[{tag:"div",attrs:{class:"content"},children:[{tag:"div",attrs:{},children:[b.nodes.map?b.nodes.map(c):""]}]}]}]}}},{mithril:12}],11:[function(h,k,q){var p=h("mithril");k.exports=function(b){var c=b.tags().map(function(b){return{tag:"li",attrs:{},children:[{tag:"a",attrs:{href:"/taxonomy/term/"+b.tid,hreflang:"en"},children:[b.title," "]}," "]}});return{tag:"main",attrs:{id:"content",class:"column",role:"main"},children:[{tag:"section",attrs:{class:"section"},
children:[{tag:"div",attrs:{class:"content"},children:[{tag:"article",attrs:{class:"node node--view-mode-full clearfix",about:"/aa-cc",typeof:"schema:Article"},children:[{tag:"h1",attrs:{class:"title",id:"page-title"},children:[b.title()]},{tag:"div",attrs:{class:"node__meta"},children:[b.submitted()]},{tag:"div",attrs:{class:"node__content clearfix "},children:[{tag:"p",attrs:{},children:[p.trust(b.body())]}]},{tag:"div",attrs:{class:b.imageClass()+" image",onclick:b.toggleImageClass},children:[{tag:"img",
attrs:{src:b.image()}},{tag:"h2",attrs:{},children:["Play"]}]},{tag:"div",attrs:{class:"clearfix field-type-taxonomy-term-reference"},children:[{tag:"ul",attrs:{class:"links field-items"},children:[c]}]}]},{tag:"div",attrs:{class:"twitter"},children:["This blog is written by me, ",{tag:"a",attrs:{href:"https://twitter.com/orkj"},children:["eiriksm. Feel free to say hi on twitter."]}]},{tag:"div",attrs:{id:"disqus_thread"}}]}]}]}}},{mithril:12}],12:[function(h,k,q){(function(h,b){var c=b(h);"undefined"===
typeof window&&c.deps({document:"undefined"!==typeof document?document:{},location:"undefined"!==typeof location?location:{},clearTimeout:clearTimeout,setTimeout:setTimeout});"object"===typeof k&&null!=k&&k.exports?k.exports=c:"function"===typeof define&&define.amd?define(function(){return c}):h.m=c})("undefined"!==typeof window?window:this,function b(c,h){function k(a){return"function"===typeof a}function q(a){return"[object Object]"===N.call(a)}function u(a){return"[object String]"===N.call(a)}
function H(){}function d(a,f){for(var g=[],b=1,e=arguments.length;b<e;b++)g[b-1]=arguments[b];if(a&&k(a.view))return ua(a,g);if(!u(a))throw Error("selector in m(selector, attrs, children) should be a string");b=(e=null!=f&&q(f)&&!("tag"in f||"view"in f||"subtree"in f))?f:{};g=e?g.slice(1):g;g=1===g.length&&I(g[0])?g[0]:g;for(var g={tag:"div",attrs:{},children:g},e=g.attrs,l=[],ba=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,m;m=ba.exec(a);)if(""===m[1]&&m[2])g.tag=
m[2];else if("#"===m[1])g.attrs.id=m[2];else if("."===m[1])l.push(m[2]);else if("["===m[3].charAt(0)){var d=m[6];d&&(d=d.replace(/\\(["'])/g,"$1"));"class"===m[4]?l.push(d):g.attrs[m[4]]=d||!0}var ba="class"in b?"class":"className",c;for(c in b)C.call(b,c)&&(c===ba&&null!=b[c]&&""!==b[c]?(l.push(b[c]),e[c]=""):e[c]=b[c]);l.length&&(e[ba]=l.join(" "));return g}function w(a,f){for(var g=0;g<a.length&&!f(a[g],g++););}function aa(a,f){w(a,function(a,b){return(a=a&&a.attrs)&&null!=a.key&&f(a,b)})}function Ga(a){for(var f=
0;f<a.length;f++)I(a[f])&&(a=a.concat.apply([],a),f--);return a}function M(a,f,g){a.insertBefore(f,a.childNodes[g]||null)}function R(a,f,g,b){aa(a,function(a,b){f[a=a.key]=f[a]?{action:3,index:b,from:f[a].index,element:g.nodes[f[a].index]||x.createElement("div")}:{action:2,index:b}});var e=[],l;for(l in f)C.call(f,l)&&e.push(f[l]);var e=e.sort(Ha),d=Array(g.length);d.nodes=g.nodes.slice();w(e,function(f){var e=f.index;1===f.action&&(J(g[e].nodes,g[e]),d.splice(e,1));if(2===f.action){var l=x.createElement("div");
l.key=a[e].attrs.key;M(b,l,e);d.splice(e,0,{attrs:{key:a[e].attrs.key},nodes:[l]});d.nodes[e]=l}if(3===f.action){var l=f.element,c=b.childNodes[e];c!==l&&null!==l&&b.insertBefore(l,c||null);d[e]=g[f.from];d.nodes[e]=l}});return d}function S(a,f,g,b){var e=a.length!==f.length;e||aa(a,function(a,g){var b=f[g];return e=b&&b.attrs&&b.attrs.key!==a.key});return e?R(a,g,f,b):f}function Ia(a,f,g){w(a,function(a,b){null!=f[b]&&g.push.apply(g,f[b].nodes)});w(f.nodes,function(a,b){null!=a.parentNode&&0>g.indexOf(a)&&
J([a],[f[b]])});a.length<f.length&&(f.length=a.length);f.nodes=g}function Ja(a){var f=0;aa(a,function(){w(a,function(a){(a=a&&a.attrs)&&null==a.key&&(a.key="__mithril__"+f++)});return 1})}function Ka(a,f,g){return a.tag!==f.tag||g.sort().join()!==Object.keys(f.attrs).sort().join()||a.attrs.id!==f.attrs.id||a.attrs.key!==f.attrs.key?!0:"all"===d.redraw.strategy()?!f.configContext||!0!==f.configContext.retain:"diff"===d.redraw.strategy()?f.configContext&&!1===f.configContext.retain:!1}function La(a,
f,g){if(Ka(a,f,g)){f.nodes.length&&J(f.nodes);if(f.configContext&&k(f.configContext.onunload))f.configContext.onunload();f.controllers&&w(f.controllers,function(a){if(a.onunload)a.onunload({preventDefault:H})})}}function Ma(a,f,g){g.length&&(a.views=f,a.controllers=g,w(g,function(a){a.onunload&&a.onunload.$old&&(a.onunload=a.onunload.$old);if(K&&a.onunload){var f=a.onunload;a.onunload=function(){};a.onunload.$old=f}}))}function Na(a,f,g,b,e){if(k(f.attrs.config)){var l=e.configContext=e.configContext||
{};a.push(function(){return f.attrs.config.call(f,g,!b,l,e)})}}function Oa(a){return a.$trusted?a.nodes.length:I(a)?a.length:1}function Pa(a,f,g,b,e,l,d,c,k){a=Ga(a);var z=[],t=f.length===a.length,q=0,r={},y=!1;aa(f,function(a,g){y=!0;r[f[g].attrs.key]={action:1,index:g}});Ja(a);y&&(f=S(a,f,r,g));for(var u=0,v=0,w=a.length;v<w;v++){var x=ca(g,e,f,b,a[v],f[u],l,b+q||q,d,c,k);x!==h&&(t=t&&x.nodes.intact,q+=Oa(x),f[u++]=x)}t||Ia(a,f,z);return f}function Qa(a,f,g,b){null!=b.onunload&&0>G.map(function(a){return a.handler}).indexOf(b.onunload)&&
G.push({controller:b,handler:b.onunload});a.push(g);f.push(b)}function ca(a,f,g,b,e,l,c,m,B,z,t){a:{try{if("boolean"!==typeof e&&null!=e&&null!=e.toString())break a}catch(w){}e=""}if("retain"===e.subtree)return l;a:{var E=e;if(null!=l){if(N.call(l)===N.call(E))break a;g&&g.nodes?(b=m-b,l=b+(I(E)?E:l.nodes).length,J(g.nodes.slice(b,l),g.slice(b,l))):l.nodes&&J(l.nodes,l)}l=new E.constructor;l.tag&&(l={});l.nodes=[]}if(I(e))return Pa(e,l,a,m,f,c,B,z,t);if(null!=e&&q(e)){E=l;f=z;z=[];g=[];var r=e;for(b=
(e=E)&&e.controllers;null!=r.view;){l=r;var r=r.view.$original||r.view,y=b,A=g,C=z,D;D=e.views;var F=r,L=y,H=l.controller,G=void 0,G="diff"===d.redraw.strategy()&&D?D.indexOf(F):-1;D=-1<G?L[G]:k(H)?new H:{};F=l&&l.attrs&&l.attrs.key;l=0===K||ja||y&&-1<y.indexOf(D)?l.view(D):{tag:"placeholder"};"retain"!==l.subtree&&(l.attrs=l.attrs||{},l.attrs.key=F,Qa(C,A,r,D));r=l}e=r;if("retain"===e.subtree)a=E;else{if(!e.tag&&g.length)throw Error("Component template must return a virtual element, not an array, string, etc.");
e.attrs=e.attrs||{};E.attrs=E.attrs||{};b=Object.keys(e.attrs);l=b.length>("key"in e.attrs?1:0);La(e,E,b);u(e.tag)?(b=0===E.nodes.length,f=e.attrs.xmlns?e.attrs.xmlns:"svg"===e.tag?"http://www.w3.org/2000/svg":"math"===e.tag?"http://www.w3.org/1998/Math/MathML":f,b?(r=e,y=f,r=r.attrs.is?null==y?x.createElement(r.tag,r.attrs.is):x.createElementNS(y,r.tag,r.attrs.is):null==y?x.createElement(r.tag):x.createElementNS(y,r.tag),y=e,l=l?ka(r,y.tag,y.attrs,{},f):y.attrs,M(a,r,m),y=e,B=null!=y.children&&0<
y.children.length?ca(r,y.tag,h,h,y.children,E.children,!0,0,y.attrs.contenteditable?r:B,f,t):y.children,B={tag:e.tag,attrs:l,children:B,nodes:[r]},Ma(B,z,g),B.children&&!B.children.nodes&&(B.children.nodes=[]),E=B):(r=E,y=e,A=f,C=r.nodes[0],l&&ka(C,y.tag,y.attrs,r.attrs,A),r.children=ca(C,y.tag,h,h,y.children,r.children,!1,0,y.attrs.contenteditable?C:B,A,t),r.nodes.intact=!0,g.length&&(r.views=z,r.controllers=g),r=C),"select"===e.tag&&"value"in e.attrs&&ka(r,e.tag,{value:e.attrs.value},{},f),b||!0!==
c||null==r||M(a,r,m),Na(t,e,r,b,E),a=E):a=void 0}return a}if(k(e))return l;z=l;t=e;if(z.nodes.length)if(z.valueOf()!==t.valueOf()||c){c=z.nodes;if(!B||B!==x.activeElement||t!==z)if(t.$trusted)J(c,z),c=va(a,m,t);else if("textarea"===f)a.value=t;else if(B)B.innerHTML=t,c=[].slice.call(B.childNodes);else{if(1===c[0].nodeType||1<c.length||c[0].nodeValue.trim&&!c[0].nodeValue.trim())J(z.nodes,z),c=[x.createTextNode(t)];B=c[0];try{M(a,B,m),B.nodeValue=t}catch(w){}}z=new t.constructor(t);z.nodes=c;z.$trusted=
t.$trusted;a=z}else a=(z.nodes.intact=!0,z);else t.$trusted?c=va(a,m,t):(c=[x.createTextNode(t)],a.nodeName in Ra||M(a,c[0],m)),a="string"===typeof t||"number"===typeof t||"boolean"===typeof t?new t.constructor(t):t,a.nodes=c;return a}function Ha(a,f){return a.action-f.action||a.index-f.index}function ka(a,f,g,b,e){for(var c in g)if(C.call(g,c)){var d=a,m=c,h=g[c],z=b[c],t=f,n=e;if(m in b&&z===h&&"object"!==typeof h&&x.activeElement!==d)"value"===m&&"input"===t&&d.value!=h&&(d.value=h);else{b[m]=
h;try{if("config"!==m&&"key"!==m)if(k(h)&&"on"===m.slice(0,2))d[m]=Sa(h,d);else if("style"===m&&null!=h&&q(h)){n=d;d=h;t=z;t===d&&(n.style="",t={});m=void 0;for(m in d)!C.call(d,m)||null!=t&&t[m]===d[m]||(n.style[m]=d[m]);for(m in t)C.call(t,m)&&(C.call(d,m)||(n.style[m]=""))}else if(null!=n)"href"===m?d.setAttributeNS("http://www.w3.org/1999/xlink","href",h):d.setAttribute("className"===m?"class":m,h);else if(m in d&&!Ta[m])try{if("input"!==t&&!d.isContentEditable||d[m]!=h)d[m]=h}catch(r){d.setAttribute(m,
h)}else try{d.setAttribute(m,h)}catch(r){}}catch(r){if(0>r.message.indexOf("Invalid argument"))throw r;}}}return b}function J(a,f){for(var b=a.length-1;-1<b;b--)if(a[b]&&a[b].parentNode){try{a[b].parentNode.removeChild(a[b])}catch(d){}f=[].concat(f);f[b]&&la(f[b])}a.length&&(a.length=0)}function la(a){a.configContext&&k(a.configContext.onunload)&&(a.configContext.onunload(),a.configContext.onunload=null);a.controllers&&w(a.controllers,function(a){if(k(a.onunload))a.onunload({preventDefault:H})});
a.children&&(I(a.children)?w(a.children,la):a.children.tag&&la(a.children))}function wa(a){if("SCRIPT"===a.tagName)a.parentNode.replaceChild(Ua(a),a);else{var f=a.childNodes;if(f&&f.length)for(var b=0;b<f.length;b++)wa(f[b])}return a}function Ua(a){for(var f=document.createElement("script"),b=a.attributes,d=0;d<b.length;d++)f.setAttribute(b[d].name,b[d].value);f.text=a.innerHTML;return f}function va(a,f,b){var d=a.childNodes[f];if(d){var c=1!==d.nodeType,l=x.createElement("span");c?(a.insertBefore(l,
d||null),l.insertAdjacentHTML("beforebegin",b),a.removeChild(l)):d.insertAdjacentHTML("beforebegin",b)}else try{a.appendChild(x.createRange().createContextualFragment(b))}catch(h){a.insertAdjacentHTML("beforeend",b),wa(a)}for(b=[];a.childNodes[f]!==d;)b.push(a.childNodes[f]),f++;return b}function Sa(a,f){return function(b){b=b||event;d.redraw.strategy("diff");d.startComputation();try{return a.call(f,b)}finally{xa()}}}function ma(a){var b=na.indexOf(a);return 0>b?na.push(a)-1:b}function Va(a){function b(){arguments.length&&
(a=arguments[0]);return a}b.toJSON=function(){return a&&k(a.toJSON)?a.toJSON():a};return b}function ua(a,b){function g(){return(a.controller||H).apply(this,b)||this}function d(g){for(var c=[g].concat(b),e=1;e<arguments.length;e++)c.push(arguments[e]);return a.view.apply(a,c)}a.controller&&(g.prototype=a.controller.prototype);d.$original=a.view;var c={controller:g,view:d};b[0]&&null!=b[0].key&&(c.attrs={key:b[0].key});return c}function Wa(a,b,g,c){if(c)null==a&&ya(b,g),T&&(A=T);else{d.redraw.strategy("all");
d.startComputation();U[g]=b;c=a?oa=a:oa=a={controller:H};var e=new (a.controller||H);c===oa&&(D[g]=e,pa[g]=a);xa();null===a&&ya(b,g);return D[g]}}function ya(a,b){U.splice(b,1);D.splice(b,1);pa.splice(b,1);za(a);na.splice(ma(a),1);G=[]}function Aa(){O&&(O(),O=null);w(U,function(a,b){var g=pa[b];if(D[b]){var c=[D[b]];d.render(a,g.view?g.view(D[b],c):"")}});V&&(V(),V=null);L=null;Ba=new Date;d.redraw.strategy("diff")}function xa(){"none"===d.redraw.strategy()?(K--,d.redraw.strategy("diff")):d.endComputation()}
function Xa(a,b,g){P={};var c=g.indexOf("?");-1!==c&&(P=da(g.substr(c+1,g.length)),g=g.substr(0,c));var c=Object.keys(b),e=c.indexOf(g);if(-1!==e)return d.mount(a,b[c[e]]),!0;for(var l in b)if(C.call(b,l)){if(l===g)return d.mount(a,b[l]),!0;c=new RegExp("^"+l.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(c.test(g))return g.replace(c,function(){var g=l.match(/:[^\/]+/g)||[],c=[].slice.call(arguments,1,-2);w(g,function(a,b){P[a.replace(/:|\./g,"")]=decodeURIComponent(c[b])});
d.mount(a,b[l])}),!0}}function ea(a){a=a||event;if(!(a.ctrlKey||a.metaKey||a.shiftKey||2===a.which)){a.preventDefault?a.preventDefault():a.returnValue=!1;a=a.currentTarget||a.srcElement;var b;for(b="pathname"===d.route.mode&&a.search?da(a.search.slice(1)):{};a&&!/a/i.test(a.nodeName);)a=a.parentNode;K=0;d.route(a[d.route.mode].slice(Q[d.route.mode].length),b)}}function Ca(){"hash"!==d.route.mode&&F.hash?F.hash=F.hash:c.scrollTo(0,0)}function W(a,b){var g={},c=[],d;for(d in a)if(C.call(a,d)){var l=
b?b+"["+d+"]":d,k=a[d];if(null===k)c.push(encodeURIComponent(l));else if(q(k))c.push(W(k,l));else if(I(k)){var m=[];g[l]=g[l]||{};w(k,function(a){g[l][a]||(g[l][a]=!0,m.push(encodeURIComponent(l)+"="+encodeURIComponent(a)))});c.push(m.join("&"))}else k!==h&&c.push(encodeURIComponent(l)+"="+encodeURIComponent(k))}return c.join("&")}function da(a){if(""===a||null==a)return{};"?"===a.charAt(0)&&(a=a.slice(1));a=a.split("&");var b={};w(a,function(a){var c=a.split("=");a=decodeURIComponent(c[0]);c=2===
c.length?decodeURIComponent(c[1]):null;null!=b[a]?(I(b[a])||(b[a]=[b[a]]),b[a].push(c)):b[a]=c});return b}function za(a){var b=ma(a);J(a.childNodes,X[b]);X[b]=h}function fa(a,b){var c=d.prop(b);a.then(c);c.then=function(c,d){return fa(a.then(c,d),b)};c["catch"]=c.then.bind(null,null);return c}function qa(a,b){function c(a){n=a||Da;u.map(function(a){n===ga?a.resolve(m):a.reject(m)})}function h(a,b,c,f){if((null!=m&&q(m)||k(m))&&k(a))try{var g=0;a.call(m,function(a){g++||(m=a,b())},function(a){g++||
(m=a,c())})}catch(e){d.deferred.onerror(e),m=e,c()}else f()}function e(){var q;try{q=m&&m.then}catch(t){return d.deferred.onerror(t),m=t,n=Y,e()}if(n===Y)d.deferred.onerror(m);h(q,function(){n=Z;e()},function(){n=Y;e()},function(){try{n===Z&&k(a)?m=a(m):n===Y&&k(b)&&(m=b(m),n=Z)}catch(e){return d.deferred.onerror(e),m=e,c()}m===l?(m=TypeError(),c()):h(q,function(){c(ga)},c,function(){c(n===Z&&ga)})})}var l=this,n=0,m=0,u=[];l.promise={};l.resolve=function(a){n||(m=a,n=Z,e());return l};l.reject=function(a){n||
(m=a,n=Y,e());return l};l.promise.then=function(a,b){var c=new qa(a,b);n===ga?c.resolve(m):n===Da?c.reject(m):u.push(c);return c.promise}}function Ya(a){return a}function Za(a){var b=a.callbackName||"mithril_callback_"+(new Date).getTime()+"_"+Math.round(1E16*Math.random()).toString(36),d=x.createElement("script");c[b]=function(k){d.parentNode.removeChild(d);a.onload({type:"load",target:{responseText:k}});c[b]=h};d.onerror=function(){d.parentNode.removeChild(d);a.onerror({type:"error",target:{status:500,
responseText:JSON.stringify({error:"Error making jsonp request"})}});c[b]=h;return!1};d.onload=function(){return!1};d.src=a.url+(0<a.url.indexOf("?")?"&":"?")+(a.callbackKey?a.callbackKey:"callback")+"="+b+"&"+W(a.data||{});x.body.appendChild(d)}function $a(a){var b=new c.XMLHttpRequest;b.open(a.method,a.url,!0,a.user,a.password);b.onreadystatechange=function(){if(4===b.readyState)if(200<=b.status&&300>b.status)a.onload({type:"load",target:b});else a.onerror({type:"error",target:b})};a.serialize===
JSON.stringify&&a.data&&"GET"!==a.method&&b.setRequestHeader("Content-Type","application/json; charset=utf-8");a.deserialize===JSON.parse&&b.setRequestHeader("Accept","application/json, text/*");if(q(a.headers))for(var d in a.headers)C.call(a.headers,d)&&b.setRequestHeader(d,a.headers[d]);k(a.config)&&(d=a.config(b,a),null!=d&&(b=d));if((d="GET"!==a.method&&a.data?a.data:"")&&!u(d)&&d.constructor!==c.FormData)throw Error("Request data should be either be a string or FormData. Check the `serialize` option in `m.request`");
b.send(d);return b}function ab(a){return a.dataType&&"jsonp"===a.dataType.toLowerCase()?Za(a):$a(a)}function bb(a,b,c){"GET"===a.method&&"jsonp"!==a.dataType?(c=0>a.url.indexOf("?")?"?":"&",b=W(b),a.url+=b?c+b:""):a.data=c(b)}function cb(a,b){b&&(a=a.replace(/:[a-z]\w+/gi,function(a){var c=a.slice(1);a=b[c]||a;delete b[c];return a}));return a}d.version=function(){return"v0.2.8"};var C={}.hasOwnProperty,N={}.toString,I=Array.isArray||function(a){return"[object Array]"===N.call(a)},Ra={AREA:1,BASE:1,
BR:1,COL:1,COMMAND:1,EMBED:1,HR:1,IMG:1,INPUT:1,KEYGEN:1,LINK:1,META:1,PARAM:1,SOURCE:1,TRACK:1,WBR:1},x,F,ha,Ea;d.deps=function(a){a=c=a||window;x=a.document;F=a.location;Ea=a.cancelAnimationFrame||a.clearTimeout;ha=a.requestAnimationFrame||a.setTimeout;return c};d.deps.factory=d.factory=b;d.deps(c);var K=0;d.startComputation=function(){K++};d.endComputation=function(){1<K?K--:(K=0,d.redraw())};var G=[],ja=!1,Ta={list:1,style:1,form:1,type:1,width:1,height:1},Fa,db={appendChild:function(a){Fa===
h&&(Fa=x.createElement("html"));x.documentElement&&x.documentElement!==a?x.replaceChild(a,x.documentElement):x.appendChild(a);this.childNodes=x.childNodes},insertBefore:function(a){this.appendChild(a)},childNodes:[]},na=[],X={};d.render=function(a,b,c){if(!a)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var d=[],e=ma(a),l=a===x,k;k=l||a===x.documentElement?db:a;l&&"html"!==b.tag&&(b={tag:"html",attrs:{},children:b});X[e]===h&&J(k.childNodes);!0===
c&&za(a);X[e]=ca(k,null,h,h,b,X[e],!1,0,null,h,d);w(d,function(a){a()})};d.trust=function(a){a=new String(a);a.$trusted=!0;return a};d.prop=function(a){return(null!=a&&(q(a)||k(a))||"undefined"!==typeof Promise&&a instanceof Promise)&&k(a.then)?fa(a):Va(a)};var U=[],pa=[],D=[],L=null,Ba=0,O=null,V=null,oa;d.component=function(a){for(var b=Array(arguments.length-1),c=1;c<arguments.length;c++)b[c-1]=arguments[c];return ua(a,b)};var A,T;d.mount=d.module=function(a,b){if(!a)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");
var c=U.indexOf(a);0>c&&(c=U.length);var d=!1,e={preventDefault:function(){d=!0;O=V=null}};w(G,function(a){a.handler.call(a.controller,e);a.controller.onunload=null});d?w(G,function(a){a.controller.onunload=a.handler}):G=[];if(D[c]&&k(D[c].onunload))D[c].onunload(e);return Wa(b,a,c,d)};var ra=!1;d.redraw=function(a){if(!ra){ra=!0;a&&(ja=!0);try{if(L&&!a){if(ha===c.requestAnimationFrame||16<new Date-Ba)0<L&&Ea(L),L=ha(Aa,16)}else Aa(),L=ha(function(){L=null},16)}finally{ra=ja=!1}}};d.redraw.strategy=
d.prop();d.withAttr=function(a,b,c){return function(d){d=d||window.event;var e=d.currentTarget||this;d=c||this;e=a in e?e[a]:e.getAttribute(a);b.call(d,e)}};var Q={pathname:"",hash:"#",search:"?"},sa=H,ta=!1,P;d.route=function(a,b,g,h){if(0===arguments.length)return A;if(3===arguments.length&&u(b)){sa=function(c){c=A=c.slice(Q[d.route.mode].length);if(!Xa(a,g,c)){if(ta)throw Error("Ensure the default route matches one of the routes defined in m.route");ta=!0;d.route(b,!0);ta=!1}};var e="hash"===d.route.mode?
"onhashchange":"onpopstate";c[e]=function(){var a=F[d.route.mode];"pathname"===d.route.mode&&(a+=F.search);A!==a.slice(Q[d.route.mode].length)&&sa(a)};O=Ca;c[e]()}else if(a.addEventListener||a.attachEvent)a.href=("pathname"!==d.route.mode?F.pathname:"")+Q[d.route.mode]+h.attrs.href,a.addEventListener?(a.removeEventListener("click",ea),a.addEventListener("click",ea)):(a.detachEvent("onclick",ea),a.attachEvent("onclick",ea));else if(u(a)){T=A;A=a;var l=b||{},e=A.indexOf("?"),k;k=-1<e?da(A.slice(e+1)):
{};for(var m in l)C.call(l,m)&&(k[m]=l[m]);l=W(k);e=-1<e?A.slice(0,e):A;l&&(A=e+(-1===e.indexOf("?")?"?":"&")+l);e=!0===(3===arguments.length?g:b)||T===A;if(c.history.pushState){var n=e?"replaceState":"pushState";O=Ca;V=function(){try{c.history[n](null,x.title,Q[d.route.mode]+A)}catch(a){F[d.route.mode]=A}}}else F[d.route.mode]=A;sa(Q[d.route.mode]+A);T=null}};d.route.param=function(a){if(!P)throw Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");return a?
P[a]:P};d.route.mode="search";d.route.buildQueryString=W;d.route.parseQueryString=da;d.deferred=function(){var a=new qa;a.promise=fa(a.promise);return a};var Z=1,Y=2,ga=3,Da=4;d.deferred.onerror=function(a){if("[object Error]"===N.call(a)&&!/ Error/.test(a.constructor.toString()))throw K=0,a;};d.sync=function(a){function b(a,d){return function(b){e[a]=b;d||(l="reject");0===--h&&(c.promise(e),c[l](e));return b}}var c=d.deferred(),h=a.length,e=[],l="resolve";0<a.length?w(a,function(a,c){a.then(b(c,
!0),b(c,!1))}):c.resolve([]);return c.promise};d.request=function(a){!0!==a.background&&d.startComputation();var b=new qa,c,h,e;a.dataType&&"jsonp"===a.dataType.toLowerCase()?(c=a.serialize=h=a.deserialize=Ya,e=function(a){return a.responseText}):(c=a.serialize=a.serialize||JSON.stringify,h=a.deserialize=a.deserialize||JSON.parse,e=a.extract||function(a){return a.responseText.length||h!==JSON.parse?a.responseText:null});a.method=(a.method||"GET").toUpperCase();a.url=cb(a.url,a.data);bb(a,a.data,c);
a.onload=a.onerror=function(c){try{c=c||event;var g=h(e(c.target,a));"load"===c.type?(a.unwrapSuccess&&(g=a.unwrapSuccess(g,c.target)),I(g)&&a.type?w(g,function(b,c){g[c]=new a.type(b)}):a.type&&(g=new a.type(g)),b.resolve(g)):(a.unwrapError&&(g=a.unwrapError(g,c.target)),b.reject(g))}catch(k){b.reject(k),d.deferred.onerror(k)}finally{!0!==a.background&&d.endComputation()}};ab(a);b.promise=fa(b.promise,a.initialValue);return b.promise};return d})},{}]},{},[1]);
