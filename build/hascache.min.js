(function e$$0(h,n,b){function t(g,W){if(!n[g]){if(!h[g]){var c="function"==typeof require&&require;if(!W&&c)return c(g,!0);if(k)return k(g,!0);c=Error("Cannot find module '"+g+"'");throw c.code="MODULE_NOT_FOUND",c;}c=n[g]={exports:{}};h[g][0].call(c.exports,function(c){var b=h[g][1][c];return t(b?b:c)},c,c.exports,e$$0,h,n,b)}return n[g].exports}for(var k="function"==typeof require&&require,g=0;g<b.length;g++)t(b[g]);return t})({1:[function(d,h,n){d=d("./src/app");h=d.getLsOrKickOut(window);try{var b=
h.getItem("orkjern_theme_cache");if(!b)throw Error("Have no cache data");var t=JSON.parse(b);if(!t)throw Error("Can not parse data");if(!t["{{cache_key}}"])throw Error("Have old cache");d.appendCss(t["{{cache_key}}"],window)}catch(k){h.clear("orkjern_theme_cache"),document.cookie="ORKJERN_THEME_CACHE=123",window.location.reload()}d.init(window)},{"./src/app":2}],2:[function(d,h,n){var b=d("mithril"),t=d("./booter"),k=d("./disqus"),g=d("./gist"),na=d("./controllers/node"),W=d("./controllers/index"),
c=d("./controllers/taxonomy");h.exports={appendCss:function(c,g){var b=g.document,t=b.getElementsByTagName("head")[0],k=b.createElement("style");k.type="text/css";k.styleSheet?k.styleSheet.cssText=c:k.appendChild(b.createTextNode(c));return t.appendChild(k)},getLsOrKickOut:function(c){var g=c.localStorage;return g?g:(c.alert("Your browser is bad, and you should feel bad. You are not welcome here. You will be redirected to a place where you can upgrade your browser."),c.location.href="http://browsehappy.com/")},
init:function(d){var z={window:d,m:b};d.test&&b.deps(d);var h=d.document;b.route.mode="pathname";z.controllers={index:new W(z),node:na,taxonomy:new c(z)};z.booter=new t(z);z.booter.attach();k(z.window);g(z.window);d.disqus_shortname="{{ disqus_shortname }}";if(!d.disqus_shortname||!d.disqus_shortname.length)return z;d.DISQUSWIDGETS=void 0;if(h.querySelectorAll&&0===h.querySelectorAll("a[data-disqus-identifier]").length)for(var u=h.querySelectorAll(".views-field-view-node a"),n=0,R=u.length;n<R;n++){var L=
h.createElement("div");L.className="comment-count";var I=h.createElement("a");I.href=u[n].pathname;I.setAttribute("data-disqus-identifier",u[n].pathname);L.appendChild(I);u[n].parentNode.parentNode.parentNode.insertBefore(L,u[n].parentNode.parentNode.nextSibling)}u=h.createElement("script");u.async=!0;u.type="text/javascript";u.src="//"+d.disqus_shortname+".disqus.com/count.js";(h.getElementsByTagName("HEAD")[0]||h.getElementsByTagName("BODY")[0]).appendChild(u);return z}}},{"./booter":3,"./controllers/index":4,
"./controllers/node":5,"./controllers/taxonomy":6,"./disqus":7,"./gist":8,mithril:12}],3:[function(d,h,n){function b(b){this.app=b;this.window=b.window;var k=b.controllers.index,g=b.controllers.node;b=b.controllers.taxonomy;this.booted=!1;this.routeConf={};this.routeConf["/"]=k;this.routeConf["/node"]=k;this.routeConf["/:alias"]=g;this.routeConf["/node/:nid"]=g;this.routeConf["/taxonomy/term/:tid"]=b;var d=this.app.m;this.m=d;var k=this.window.document,h=this;this.startFunction=function(){var c=this.getAttribute("href");
h.navigate(c);return!1};if(k=k.getElementById("logo"))k.onclick=function(){"/"!==d.route()&&h.navigate("/");return!1}}h.exports=b;b.prototype.attach=function(b){var k=this.window.document;if(k&&k.querySelectorAll){b=k.querySelectorAll(b||"#main-wrapper a");for(var k=0,g=b.length;k<g;k++)b[k].onclick=this.startFunction}};b.prototype.navigate=function(b){var k=this.window;!this.booted&&k&&k.document&&(this.m.route(k.document.getElementById("main-wrapper"),b,this.routeConf),this.booted=!0);this.m.route(b)};
b.prototype.navigateEl=function(b,k){var g=b.getAttribute("href");k.navigate(g);return!1}},{}],4:[function(d,h,n){n=d("../views/index");var b=d("../http"),t={},k=function(g){var k=g.m;return function(){var d=g.window,c=this;this.nodes=k.prop([]);b("node").then(function(b){c.nodes=b;setTimeout(function(){g.booter.attach(".field-type-taxonomy-term-reference a")},2);var k=g.window.document;d.DISQUSWIDGETS=void 0;d.disqus_shortname&&function(){var c=k.createElement("script");c.async=!0;c.type="text/javascript";
c.src="//"+d.disqus_shortname+".disqus.com/count.js";(k.getElementsByTagName("HEAD")[0]||k.getElementsByTagName("BODY")[0]).appendChild(c)}()});this.navigate=function(c){g.booter.navigateEl(c,g.booter)}}};t.view=n;h.exports=function(b){t.app=b;t.controller=new k(b);return t}},{"../http":9,"../views/index":10}],5:[function(d,h,n){var b=d("mithril");n=d("../views/node");var t=d("../http"),k=d("../gist"),g=d("../disqus");d={controller:function(){var d=this;this.title=b.prop("");this.body=b.prop("Loading...");
this.raw=b.prop({});this.image=b.prop("about:blank");d.submitted=b.prop("");var h;this.imageClass=b.prop("noplay");this.toggleImageClass=function(){b.startComputation();d.imageClass("play");h&&d.image(h);b.endComputation()};var c=b.route.param("alias"),n=b.route.param("nid");if(!c){if(!n){b.route("/");return}c="node/"+n}t(c).then(function(c){if(c){var b=new Date(1E3*c.created[0].value);d.title(c.title[0].value);d.body(c.body[0].value);d.submitted("Submitted "+b.toLocaleDateString());for(var t in c._links)1>
t.indexOf("image")||!c._links.hasOwnProperty(t)||!t.indexOf("image")||(h=c._links[t][0].href);d.raw=c;setTimeout(function(){k(window)},200);window.disqus_shortname="{{ disqus_shortname }}";setTimeout(function(){g(window)},200)}},function(c){404===c&&(d.title("404 not found!"),d.body("The page you are looking for is nowhere to be found. Real sorry about that!"),d.imageClass("hide"));403===c&&(d.title("403 Forbidden!"),d.body("You are not allowed to access this page. I am guessing you already knew that!"))})}};
d.view=n;h.exports=d},{"../disqus":7,"../gist":8,"../http":9,"../views/node":11,mithril:12}],6:[function(d,h,n){n=d("../views/index");var b=d("../http"),t={},k=function(g){var d=g.m;return function(){var k=this;this.nodes=d.prop([]);var c=d.route.param("tid");b("taxonomy/term/"+c).then(function(c){c.map(function(c){c.body=""});k.nodes=c;window.disqus_shortname="{{ disqus_shortname }}";setTimeout(function(){g.booter.attach(".field-type-taxonomy-term-reference a")},2);window.disqus_shortname&&window.disqus_shortname.length&&
(window.DISQUSWIDGETS=void 0,function(){var c=document.createElement("script");c.async=!0;c.type="text/javascript";c.src="//"+window.disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(c)}())});this.navigate=function(c){g.booter.navigateEl(c,g.booter)}}};t.view=n;h.exports=function(b){t.controller=new k(b);return t}},{"../http":9,"../views/index":10}],7:[function(d,h,n){h.exports=function(b){var d=b.document;"undefined"===
typeof m&&(m=b.m);var k=function(){if(b.disqus_shortname)if(b.disqus_identifier=m.route(),b.disqus_identifier||(b.disqus_identifier=b.location.pathname),b.disqus_loaded)b.DISQUS.reset({reload:!0,config:function(){this.page.identifier=b.disqus_identifier;this.page.url=b.location.origin+b.disqus_identifier}});else{b.disqus_loaded=!0;var g=d.createElement("script");g.type="text/javascript";g.async=!0;g.src="//"+b.disqus_shortname+".disqus.com/embed.js?url="+b.disqus_identifier;(d.getElementsByTagName("head")[0]||
d.getElementsByTagName("body")[0]).appendChild(g)}},g=d.getElementById("disqus_thread"),h=!1;b.onscroll=function(){g||(g=d.getElementById("disqus_thread"));!h&&b.scrollY&&g&&g.offsetTop&&b.innerHeight&&b.scrollY+b.innerHeight+50>g.offsetTop&&(h=!0,k())}}},{}],8:[function(d,h,n){h.exports=function(b){for(var d=b.document,k=function(c,g){var k="gist_callback"+Math.floor(1E3*Math.random()),h=d.createElement("script");h.setAttribute("src","https://gist.github.com/"+g+".json?callback="+k);b[k]=function(g){delete b[k];
var d='<link href="'+g.stylesheet+'" rel="stylesheet">',d=d+g.div;c.innerHTML=d;h.parentNode.removeChild(h);c.className+="processed"};d.body.appendChild(h)},g=d.getElementsByTagName("gist"),h=0,n=g.length;h<n;h++){var c=g[h];c.className&&-1<c.className.indexOf("processed")||k(c,c.innerHTML)}}},{}],9:[function(d,h,n){h.exports=function(d){return b.request({method:"GET",url:"/"+d+"?json",config:function(b){b.setRequestHeader("Accept","application/hal+json")},extract:function(b){return 200===b.status?
b.responseText:JSON.stringify(b.status)},deserialize:function(b){var g;try{g=JSON.parse(b)}catch(d){g=""}return g}})};var b=d("mithril")},{mithril:12}],10:[function(d,h,n){var b=d("mithril");h.exports=function(d){var h=function(g){return{tag:"article",attrs:{class:"node node--view-mode-teaser clearfix",about:"/aa-cc",typeof:"schema:Article"},children:[{tag:"h2",attrs:{class:"node__title "},children:[{tag:"a",attrs:{href:g.path,onclick:function(){d.navigate(this);return!1}},children:[g.title]}]},{tag:"div",
attrs:{class:"node__meta"},children:["Post date: ",g.created]},{tag:"div",attrs:{class:"read-more"},children:[{tag:"a",attrs:{href:g.path,onclick:function(){d.navigate(this);return!1}},children:["Read more"]}]},{tag:"div",attrs:{class:"comment-count"},children:[{tag:"a",attrs:{"data-disqus-identifier":g.path,href:g.path,onclick:function(){d.navigate(this);return!1}}}]},b.trust(g.field_tags)]}};return{tag:"main",attrs:{id:"content",class:"column",role:"main"},children:[{tag:"section",attrs:{class:"section"},
children:[{tag:"div",attrs:{class:"content"},children:[{tag:"div",attrs:{},children:[d.nodes.map?d.nodes.map(h):""]}]}]}]}}},{mithril:12}],11:[function(d,h,n){var b=d("mithril");h.exports=function(d){return{tag:"main",attrs:{id:"content",class:"column",role:"main"},children:[{tag:"section",attrs:{class:"section"},children:[{tag:"div",attrs:{class:"content"},children:[{tag:"article",attrs:{class:"node node--view-mode-full clearfix",about:"/aa-cc",typeof:"schema:Article"},children:[{tag:"h1",attrs:{class:"title",
id:"page-title"},children:[d.title()]},{tag:"div",attrs:{class:"node__meta"},children:[d.submitted()]},{tag:"div",attrs:{class:"node__content clearfix "},children:[{tag:"p",attrs:{},children:[b.trust(d.body())]}]},{tag:"div",attrs:{class:d.imageClass()+" image",onclick:d.toggleImageClass},children:[{tag:"img",attrs:{src:d.image()}},{tag:"h2",attrs:{},children:["Play"]}]}]},{tag:"div",attrs:{class:"twitter"},children:["This blog is written by me, ",{tag:"a",attrs:{href:"https://twitter.com/orkj"},
children:["eiriksm. Feel free to say hi on twitter."]}]},{tag:"div",attrs:{id:"disqus_thread"}}]}]}]}}},{mithril:12}],12:[function(d,h,n){var b=function k(b,d){function h(a){p=a.document;E=a.location;da=a.cancelAnimationFrame||a.clearTimeout;S=a.requestAnimationFrame||a.setTimeout}function c(){var a=[].slice.call(arguments),c=null!=a[1]&&w.call(a[1])===J&&!("tag"in a[1])&&!("subtree"in a[1]),q=c?a[1]:{},b="class"in q?"class":"className",f={tag:"div",attrs:{}},e,d=[];if(w.call(a[0])!=M)throw Error("selector in m(selector, attrs, children) should be a string");
for(;e=oa.exec(a[0]);)""===e[1]&&e[2]?f.tag=e[2]:"#"===e[1]?f.attrs.id=e[2]:"."===e[1]?d.push(e[2]):"["===e[3][0]&&(e=pa.exec(e[3]),f.attrs[e[1]]=e[3]||(e[2]?"":!0));0<d.length&&(f.attrs[b]=d.join(" "));d=c?a[2]:a[1];w.call(d)===F?f.children=d:f.children=c?a.slice(2):a.slice(1);for(var g in q)g===b?""!==q[g]&&(f.attrs[g]=(f.attrs[g]||"")+" "+q[g]):f.attrs[g]=q[g];return f}function n(a,c,q,b,f,e,g,h,k,v,T){if(null==f||null==f.toString())f="";if("retain"===f.subtree)return e;var r=w.call(e),l=w.call(f);
if(null==e||r!==l)null!=e&&(q&&q.nodes?(b=h-b,e=b+(l===F?f:e.nodes).length,u(q.nodes.slice(b,e),q.slice(b,e))):e.nodes&&u(e.nodes,e)),e=new f.constructor,e.tag&&(e={}),e.nodes=[];if(l===F){for(var l=0,x=f.length;l<x;l++)w.call(f[l])===F&&(f=f.concat.apply([],f),l--);q=[];b=e.length===f.length;for(var r=0,s={},D=[],x=!1,l=0;l<e.length;l++)e[l]&&e[l].attrs&&null!=e[l].attrs.key&&(x=!0,s[e[l].attrs.key]={action:1,index:l});if(x){-1<f.indexOf(null)&&(f=f.filter(function(a){return null!=a}));x=!1;if(f.length!=
e.length)x=!0;else for(var l=0,B,y;B=e[l],y=f[l];l++)if(B.attrs&&y.attrs&&B.attrs.key!=y.attrs.key){x=!0;break}if(x){l=0;for(x=f.length;l<x;l++)f[l]&&f[l].attrs&&(null!=f[l].attrs.key?(B=f[l].attrs.key,s[B]=s[B]?{action:3,index:l,from:s[B].index,element:e.nodes[s[B].index]||p.createElement("div")}:{action:2,index:l}):D.push({index:l,element:a.childNodes[l]||p.createElement("div")}));var l=[],A;for(A in s)l.push(s[A]);x=l.sort(z);A=Array(e.length);for(l=0;s=x[l];l++)1===s.action&&(u(e[s.index].nodes,
e[s.index]),A.splice(s.index,1)),2===s.action&&(B=p.createElement("div"),B.key=f[s.index].attrs.key,a.insertBefore(B,a.childNodes[s.index]||null),A.splice(s.index,0,{attrs:{key:f[s.index].attrs.key},nodes:[B]})),3===s.action&&(a.childNodes[s.index]!==s.element&&null!==s.element&&a.insertBefore(s.element,a.childNodes[s.index]||null),A[s.index]=e[s.from]);l=0;for(x=D.length;l<x;l++)s=D[l],a.insertBefore(s.element,a.childNodes[s.index]||null),A[s.index]=e[s.index];e=A;e.nodes=Array(a.childNodes.length);
for(l=0;A=a.childNodes[l];l++)e.nodes[l]=A}}A=l=0;for(x=f.length;l<x;l++)D=n(a,c,e,h,f[l],e[A],g,h+r||r,k,v,T),D!==d&&(D.nodes.intact||(b=!1),r=D.$trusted?r+(D.match(/<[^\/]|\>\s*[^<]/g)||[]).length:r+(w.call(D)===F?D.length:1),e[A++]=D);if(!b){l=0;for(x=f.length;l<x;l++)null!=e[l]&&q.push.apply(q,e[l].nodes);for(l=0;c=e.nodes[l];l++)null!=c.parentNode&&0>q.indexOf(c)&&u([c],[e[l]]);f.length<e.length&&(e.length=f.length);e.nodes=q}}else if(null!=f&&l===J){f.attrs||(f.attrs={});e.attrs||(e.attrs={});
c=Object.keys(f.attrs);q=c.length>("key"in f.attrs?1:0);if(f.tag!=e.tag||c.join()!=Object.keys(e.attrs).join()||f.attrs.id!=e.attrs.id)if(e.nodes.length&&u(e.nodes),e.configContext&&typeof e.configContext.onunload===C)e.configContext.onunload();if(w.call(f.tag)!=M)return;l=0===e.nodes.length;f.attrs.xmlns?v=f.attrs.xmlns:"svg"===f.tag?v="http://www.w3.org/2000/svg":"math"===f.tag&&(v="http://www.w3.org/1998/Math/MathML");l?(c=f.attrs.is?v===d?p.createElement(f.tag,f.attrs.is):p.createElementNS(v,
f.tag,f.attrs.is):v===d?p.createElement(f.tag):p.createElementNS(v,f.tag),e={tag:f.tag,attrs:q?X(c,f.tag,f.attrs,{},v):f.attrs,children:null!=f.children&&0<f.children.length?n(c,f.tag,d,d,f.children,e.children,!0,0,f.attrs.contenteditable?c:k,v,T):f.children,nodes:[c]},e.children&&!e.children.nodes&&(e.children.nodes=[]),"select"===f.tag&&f.attrs.value&&X(c,f.tag,{value:f.attrs.value},{},v),a.insertBefore(c,a.childNodes[h]||null)):(c=e.nodes[0],q&&X(c,f.tag,f.attrs,e.attrs,v),e.children=n(c,f.tag,
d,d,f.children,e.children,!1,0,f.attrs.contenteditable?c:k,v,T),e.nodes.intact=!0,!0===g&&null!=c&&a.insertBefore(c,a.childNodes[h]||null));typeof f.attrs.config===C&&(a=e.configContext=e.configContext||{},T.push(function(a,e){return function(){return a.attrs.config.apply(a,e)}}(f,[c,!l,a,e])))}else if(typeof l!=C)if(0===e.nodes.length)f.$trusted?q=R(a,h,f):(q=[p.createTextNode(f)],a.nodeName.match(qa)||a.insertBefore(q[0],a.childNodes[h]||null)),e=-1<"string number boolean".indexOf(typeof f)?new f.constructor(f):
f,e.nodes=q;else if(e.valueOf()!==f.valueOf()||!0===g){q=e.nodes;if(!k||k!==p.activeElement)if(f.$trusted)u(q,e),q=R(a,h,f);else if("textarea"===c)a.value=f;else if(k)k.innerHTML=f;else{if(1===q[0].nodeType||1<q.length)u(e.nodes,e),q=[p.createTextNode(f)];a.insertBefore(q[0],a.childNodes[h]||null);q[0].nodeValue=f}e=new f.constructor(f);e.nodes=q}else e.nodes.intact=!0;return e}function z(a,c){return a.action-c.action||a.index-c.index}function X(a,c,b,d,f){for(var e in b){var g=b[e],h=d[e];if(e in
d&&h===g)"value"===e&&"input"===c&&a.value!=g&&(a.value=g);else{d[e]=g;try{if("config"!==e&&"key"!=e)if(typeof g===C&&0===e.indexOf("on"))a[e]=L(g,a);else if("style"===e&&null!=g&&w.call(g)===J){for(var k in g)if(null==h||h[k]!==g[k])a.style[k]=g[k];for(k in h)k in g||(a.style[k]="")}else if(null!=f)"href"===e?a.setAttributeNS("http://www.w3.org/1999/xlink","href",g):"className"===e?a.setAttribute("class",g):a.setAttribute(e,g);else if(e in a&&"list"!==e&&"style"!==e&&"form"!==e&&"type"!==e){if("input"!==
c||a[e]!==g)a[e]=g}else a.setAttribute(e,g)}catch(n){if(0>n.message.indexOf("Invalid argument"))throw n;}}}return d}function u(a,c){for(var b=a.length-1;-1<b;b--)if(a[b]&&a[b].parentNode){try{a[b].parentNode.removeChild(a[b])}catch(d){}c=[].concat(c);c[b]&&Y(c[b])}0!=a.length&&(a.length=0)}function Y(a){if(a.configContext&&typeof a.configContext.onunload===C)a.configContext.onunload();if(a.children)if(w.call(a.children)===F)for(var c=0,b;b=a.children[c];c++)Y(b);else a.children.tag&&Y(a.children)}
function R(a,c,b){var d=a.childNodes[c];if(d){var f=1!=d.nodeType,e=p.createElement("span");f?(a.insertBefore(e,d||null),e.insertAdjacentHTML("beforebegin",b),a.removeChild(e)):d.insertAdjacentHTML("beforebegin",b)}else a.insertAdjacentHTML("beforeend",b);for(b=[];a.childNodes[c]!==d;)b.push(a.childNodes[c]),c++;return b}function L(a,b){return function(d){d=d||event;c.redraw.strategy("diff");c.startComputation();try{return a.call(b,d)}finally{ea()}}}function I(a){var c=fa.indexOf(a);return 0>c?fa.push(a)-
1:c}function ra(a){var c=function(){arguments.length&&(a=arguments[0]);return a};c.toJSON=function(){return a};return c}function ga(){for(var a="all"===c.redraw.strategy(),b=0,d;d=U[b];b++)G[b]&&c.render(d,Z[b].view?Z[b].view(G[b]):"",a);N&&(N(),N=null);H=null;ha=new Date;c.redraw.strategy("diff")}function sa(a,b,d){O={};var g=d.indexOf("?");-1!==g&&(O=$(d.substr(g+1,d.length)),d=d.substr(0,g));for(var f in b){if(f===d)return c.module(a,b[f]),!0;g=new RegExp("^"+f.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,
"([^\\/]+)")+"/?$");if(g.test(d))return d.replace(g,function(){for(var e=f.match(/:[^\/]+/g)||[],d=[].slice.call(arguments,1,-2),g=0,q=e.length;g<q;g++)O[e[g].replace(/:|\./g,"")]=decodeURIComponent(d[g]);c.module(a,b[f])}),!0}}function ia(a){a=a||event;if(!a.ctrlKey&&!a.metaKey&&2!==a.which){a.preventDefault?a.preventDefault():a.returnValue=!1;a=a.currentTarget||this;var b="pathname"===c.route.mode&&a.search?$(a.search.slice(1)):{};c.route(a[c.route.mode].slice(K[c.route.mode].length),b)}}function ja(){"hash"!=
c.route.mode&&E.hash?E.hash=E.hash:b.scrollTo(0,0)}function V(a,c){var b=[],d;for(d in a){var f=c?c+"["+d+"]":d,e=a[d],g=w.call(e),e=null!=e&&g===J?V(e,f):g===F?e.map(function(a){return encodeURIComponent(f+"[]")+"="+encodeURIComponent(a)}).join("&"):encodeURIComponent(f)+"="+encodeURIComponent(e);b.push(e)}return b.join("&")}function $(a){a=a.split("&");for(var c={},b=0,d=a.length;b<d;b++){var f=a[b].split("=");c[decodeURIComponent(f[0])]=f[1]?decodeURIComponent(f[1]):""}return c}function aa(a){var b=
c.prop();a.then(b);b.then=function(c,b){return aa(a.then(c,b))};return b}function ka(a,b){function d(a){p=a||n;l.map(function(a){p===k&&a.resolve(r)||a.reject(r)})}function g(a,b,d,e){if((null!=r&&w.call(r)===J||typeof r===C)&&typeof a===C)try{var f=0;a.call(r,function(a){f++||(r=a,b())},function(a){f++||(r=a,d())})}catch(h){c.deferred.onerror(h),r=h,d()}else e()}function f(){var l;try{l=r&&r.then}catch(n){return c.deferred.onerror(n),r=n,p=h,f()}g(l,function(){p=e;f()},function(){p=h;f()},function(){try{p===
e&&typeof a===C?r=a(r):p===h&&"function"===typeof b&&(r=b(r),p=e)}catch(f){return c.deferred.onerror(f),r=f,d()}r===v?(r=TypeError(),d()):g(l,function(){d(k)},d,function(){d(p===e&&k)})})}var e=1,h=2,k=3,n=4,v=this,p=0,r=0,l=[];v.promise={};v.resolve=function(a){p||(r=a,p=e,f());return this};v.reject=function(a){p||(r=a,p=h,f());return this};v.promise.then=function(a,c){var b=new ka(a,c);p===k?b.resolve(r):p===n?b.reject(r):l.push(b);return b.promise}}function ba(a){return a}function ta(a){if(a.dataType&&
"jsonp"===a.dataType.toLowerCase()){var c="mithril_callback_"+(new Date).getTime()+"_"+Math.round(1E16*Math.random()).toString(36),h=p.createElement("script");b[c]=function(e){h.parentNode.removeChild(h);a.onload({type:"load",target:{responseText:e}});b[c]=d};h.onerror=function(e){h.parentNode.removeChild(h);a.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}});b[c]=d;return!1};h.onload=function(a){return!1};h.src=a.url+(0<a.url.indexOf("?")?
"&":"?")+(a.callbackKey?a.callbackKey:"callback")+"="+c+"&"+V(a.data||{});p.body.appendChild(h)}else{var k=new b.XMLHttpRequest;k.open(a.method,a.url,!0,a.user,a.password);k.onreadystatechange=function(){if(4===k.readyState)if(200<=k.status&&300>k.status)a.onload({type:"load",target:k});else a.onerror({type:"error",target:k})};a.serialize===JSON.stringify&&a.data&&"GET"!==a.method&&k.setRequestHeader("Content-Type","application/json; charset=utf-8");a.deserialize===JSON.parse&&k.setRequestHeader("Accept",
"application/json, text/*");if(typeof a.config===C){var f=a.config(k,a);null!=f&&(k=f)}if((f="GET"!==a.method&&a.data?a.data:"")&&w.call(f)!=M&&f.constructor!=b.FormData)throw"Request data should be either be a string or FormData. Check the `serialize` option in `m.request`";k.send(f);return k}}function ua(a,c,b){"GET"===a.method&&"jsonp"!=a.dataType?(b=0>a.url.indexOf("?")?"?":"&",c=V(c),a.url+=c?b+c:""):a.data=b(c);return a}function va(a,c){var b=a.match(/:[a-z]\w+/gi);if(b&&c)for(var d=0;d<b.length;d++){var f=
b[d].slice(1);a=a.replace(b[d],c[f]);delete c[f]}return a}var J="[object Object]",F="[object Array]",M="[object String]",C="function",w={}.toString,oa=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g,pa=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/,qa=/^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/,p,E,S,da;h(b);var la,wa={appendChild:function(a){la===d&&(la=p.createElement("html"));p.documentElement&&p.documentElement!==a?p.replaceChild(a,p.documentElement):p.appendChild(a);this.childNodes=
p.childNodes},insertBefore:function(a){this.appendChild(a)},childNodes:[]},fa=[],P={};c.render=function(a,c,b){var g=[];if(!a)throw Error("Please ensure the DOM element exists before rendering a template into it.");var f=I(a),e=a===p,h=e||a===p.documentElement?wa:a;e&&"html"!=c.tag&&(c={tag:"html",attrs:{},children:c});P[f]===d&&u(h.childNodes);!0===b&&(b=I(a),u(a.childNodes,P[b]),P[b]=d);P[f]=n(h,null,d,d,c,P[f],!1,0,null,d,g);a=0;for(c=g.length;a<c;a++)g[a]()};c.trust=function(a){a=new String(a);
a.$trusted=!0;return a};c.prop=function(a){return(null!=a&&w.call(a)===J||typeof a===C)&&typeof a.then===C?aa(a):ra(a)};var U=[],Z=[],G=[],H=null,ha=0,N=null,ma;c.module=function(a,b){if(!a)throw Error("Please ensure the DOM element exists before rendering a template into it.");var d=U.indexOf(a);0>d&&(d=U.length);var g=!1;if(G[d]&&typeof G[d].onunload===C)G[d].onunload({preventDefault:function(){g=!0}});if(!g){c.redraw.strategy("all");c.startComputation();U[d]=a;var f=ma=b=b||{},e=new (b.controller||
function(){});f===ma&&(G[d]=e,Z[d]=b);ea();return G[d]}};c.redraw=function(a){if(H&&!0!==a){if(16<new Date-ha||S===b.requestAnimationFrame)0<H&&da(H),H=S(ga,16)}else ga(),H=S(function(){H=null},16)};c.redraw.strategy=c.prop();var Q=0;c.startComputation=function(){Q++};c.endComputation=function(){Q=Math.max(Q-1,0);0===Q&&c.redraw()};var ea=function(){"none"==c.redraw.strategy()?(Q--,c.redraw.strategy("diff")):c.endComputation()};c.withAttr=function(a,c){return function(b){b=b||event;b=b.currentTarget||
this;c(a in b?b[a]:b.getAttribute(a))}};var K={pathname:"",hash:"#",search:"?"},ca=function(){},O,y;c.route=function(){if(0===arguments.length)return y;if(3===arguments.length&&w.call(arguments[1])===M){var a=arguments[0],d=arguments[1],h=arguments[2];ca=function(b){b=y=b.slice(K[c.route.mode].length);sa(a,h,b)||c.route(d,!0)};var k="hash"===c.route.mode?"onhashchange":"onpopstate";b[k]=function(){var a=E[c.route.mode];"pathname"===c.route.mode&&(a+=E.search);y!=a.slice(K[c.route.mode].length)&&ca(a)};
N=ja;b[k]()}else if(arguments[0].addEventListener)k=arguments[0],k.href=("pathname"!==c.route.mode?E.pathname:"")+K[c.route.mode]+this.attrs.href,k.removeEventListener("click",ia),k.addEventListener("click",ia);else if(w.call(arguments[0])===M){k=y;y=arguments[0];var f=arguments[1]||{},e=y.indexOf("?"),n=-1<e?$(y.slice(e+1)):{},u;for(u in f)n[u]=f[u];f=V(n);e=-1<e?y.slice(0,e):y;f&&(y=e+(-1===e.indexOf("?")?"?":"&")+f);var z=!0===(3===arguments.length?arguments[2]:arguments[1])||k===arguments[0];
b.history.pushState?(N=function(){b.history[z?"replaceState":"pushState"](null,p.title,K[c.route.mode]+y);ja()},ca(K[c.route.mode]+y)):E[c.route.mode]=y}};c.route.param=function(a){if(!O)throw Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");return O[a]};c.route.mode="search";c.deferred=function(){var a=new ka;a.promise=aa(a.promise);return a};c.deferred.onerror=function(a){if("[object Error]"===w.call(a)&&!a.constructor.toString().match(/ Error/))throw a;
};c.sync=function(a){function b(a,c){return function(b){e[a]=b;c||(d="reject");0===--f&&(g.promise(e),g[d](e));return b}}var d="resolve",g=c.deferred(),f=a.length,e=Array(f);if(0<a.length)for(var h=0;h<a.length;h++)a[h].then(b(h,!0),b(h,!1));else g.resolve([]);return g.promise};c.request=function(a){!0!==a.background&&c.startComputation();var b=c.deferred(),d=a.dataType&&"jsonp"===a.dataType.toLowerCase(),g=a.serialize=d?ba:a.serialize||JSON.stringify,f=a.deserialize=d?ba:a.deserialize||JSON.parse,
e=a.extract||function(a){return 0===a.responseText.length&&f===JSON.parse?null:a.responseText};a.url=va(a.url,a.data);a=ua(a,a.data,g);a.onload=a.onerror=function(d){try{d=d||event;var g=(("load"===d.type?a.unwrapSuccess:a.unwrapError)||ba)(f(e(d.target,a)));if("load"===d.type)if(w.call(g)===F&&a.type)for(var h=0;h<g.length;h++)g[h]=new a.type(g[h]);else a.type&&(g=new a.type(g));b["load"===d.type?"resolve":"reject"](g)}catch(k){c.deferred.onerror(k),b.reject(k)}!0!==a.background&&c.endComputation()};
ta(a);b.promise(a.initialValue);return b.promise};c.deps=function(a){h(b=a||b);return b};c.deps.factory=k;return c}("undefined"!=typeof window?window:{});"undefined"!=typeof h&&null!==h&&h.exports?h.exports=b:"function"===typeof define&&define.amd&&define(function(){return b})},{}]},{},[1]);
