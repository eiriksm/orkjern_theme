(function e$$0(f,p,k){function h(n,W){if(!p[n]){if(!f[n]){var b="function"==typeof require&&require;if(!W&&b)return b(n,!0);if(g)return g(n,!0);b=Error("Cannot find module '"+n+"'");throw b.code="MODULE_NOT_FOUND",b;}b=p[n]={exports:{}};f[n][0].call(b.exports,function(b){var g=f[n][1][b];return h(g?g:b)},b,b.exports,e$$0,f,p,k)}return p[n].exports}for(var g="function"==typeof require&&require,n=0;n<k.length;n++)h(k[n]);return h})({1:[function(c,f,p){c=c("./src/app");f=c.getLsOrKickOut(window);try{var k=
f.getItem("orkjern_theme_cache");if(!k)throw Error("Have no cache data");var h=JSON.parse(k);if(!h)throw Error("Can not parse data");if(!h["{{cache_key}}"])throw Error("Have old cache");c.appendCss(h["{{cache_key}}"],window)}catch(g){f.clear("orkjern_theme_cache"),document.cookie="ORKJERN_THEME_CACHE=123",window.location.reload()}c.init(window)},{"./src/app":2}],2:[function(c,f,p){var k=c("mithril"),h=c("./booter"),g=c("./disqus"),n=c("./gist"),q=c("./controllers/node"),W=c("./controllers/index"),
b=c("./controllers/taxonomy");f.exports={appendCss:function(b,h){var n=h.document,g=n.getElementsByTagName("head")[0],q=n.createElement("style");q.type="text/css";q.styleSheet?q.styleSheet.cssText=b:q.appendChild(n.createTextNode(b));return g.appendChild(q)},getLsOrKickOut:function(b){var h=b.localStorage;return h?h:(b.alert("Your browser is bad, and you should feel bad. You are not welcome here. You will be redirected to a place where you can upgrade your browser."),b.location.href="http://browsehappy.com/")},
init:function(c){var A={window:c,m:k};c.test&&k.deps(c);var f=c.document;k.route.mode="pathname";A.controllers={index:new W(A),node:q,taxonomy:new b(A)};A.booter=new h(A);A.booter.attach();g(A.window);n(A.window);c.disqus_shortname="{{ disqus_shortname }}";if(!c.disqus_shortname||!c.disqus_shortname.length)return A;c.DISQUSWIDGETS=void 0;if(f.querySelectorAll&&0===f.querySelectorAll("a[data-disqus-identifier]").length)for(var u=f.querySelectorAll(".views-field-view-node a"),p=0,R=u.length;p<R;p++){var L=
f.createElement("div");L.className="comment-count";var I=f.createElement("a");I.href=u[p].pathname;I.setAttribute("data-disqus-identifier",u[p].pathname);L.appendChild(I);u[p].parentNode.parentNode.parentNode.insertBefore(L,u[p].parentNode.parentNode.nextSibling)}u=f.createElement("script");u.async=!0;u.type="text/javascript";u.src="//"+c.disqus_shortname+".disqus.com/count.js";(f.getElementsByTagName("HEAD")[0]||f.getElementsByTagName("BODY")[0]).appendChild(u);return A}}},{"./booter":3,"./controllers/index":4,
"./controllers/node":5,"./controllers/taxonomy":6,"./disqus":7,"./gist":8,mithril:12}],3:[function(c,f,p){function k(h){this.app=h;this.window=h.window;var g=h.controllers.index,n=h.controllers.node;h=h.controllers.taxonomy;this.booted=!1;this.routeConf={};this.routeConf["/"]=g;this.routeConf["/node"]=g;this.routeConf["/:alias"]=n;this.routeConf["/node/:nid"]=n;this.routeConf["/taxonomy/term/:tid"]=h;var q=this.app.m;this.m=q;var g=this.window.document,c=this;this.startFunction=function(){var b=this.getAttribute("href");
c.navigate(b);return!1};if(g=g.getElementById("logo"))g.onclick=function(){"/"!==q.route()&&c.navigate("/");return!1}}f.exports=k;k.prototype.attach=function(h){var g=this.window.document;if(g&&g.querySelectorAll){h=g.querySelectorAll(h||"#main-wrapper a");for(var g=0,n=h.length;g<n;g++)h[g].onclick=this.startFunction}};k.prototype.navigate=function(h){var g=this.window;!this.booted&&g&&g.document&&(this.m.route(g.document.getElementById("main-wrapper"),h,this.routeConf),this.booted=!0);this.m.route(h)};
k.prototype.navigateEl=function(h,g){var n=h.getAttribute("href");g.navigate(n);return!1}},{}],4:[function(c,f,p){p=c("../views/index");var k=c("../http"),h={},g=function(h){var g=h.m;return function(){var c=h.window,b=this;this.nodes=g.prop([]);k("node").then(function(g){b.nodes=g;setTimeout(function(){h.booter.attach(".field-type-taxonomy-term-reference a")},2);var q=h.window.document;c.DISQUSWIDGETS=void 0;c.disqus_shortname&&function(){var b=q.createElement("script");b.async=!0;b.type="text/javascript";
b.src="//"+c.disqus_shortname+".disqus.com/count.js";(q.getElementsByTagName("HEAD")[0]||q.getElementsByTagName("BODY")[0]).appendChild(b)}()});this.navigate=function(b){h.booter.navigateEl(b,h.booter)}}};h.view=p;f.exports=function(n){h.app=n;h.controller=new g(n);return h}},{"../http":9,"../views/index":10}],5:[function(c,f,p){var k=c("mithril");p=c("../views/node");var h=c("../http"),g=c("../gist"),n=c("../disqus");c={controller:function(){var q=this;this.title=k.prop("");this.body=k.prop("Loading...");
this.raw=k.prop({});this.image=k.prop("about:blank");q.submitted=k.prop("");var c;this.imageClass=k.prop("noplay");this.toggleImageClass=function(){k.startComputation();q.imageClass("play");c&&q.image(c);k.endComputation()};var b=k.route.param("alias"),f=k.route.param("nid");if(!b){if(!f){k.route("/");return}b="node/"+f}h(b).then(function(b){if(b){var h=new Date(1E3*b.created[0].value);q.title(b.title[0].value);q.body(b.body[0].value);q.submitted("Submitted "+h.toLocaleDateString());for(var k in b._links)1>
k.indexOf("image")||!b._links.hasOwnProperty(k)||!k.indexOf("image")||(c=b._links[k][0].href);q.raw=b;setTimeout(function(){g(window)},200);window.disqus_shortname="{{ disqus_shortname }}";setTimeout(function(){n(window)},200)}},function(b){404===b&&(q.title("404 not found!"),q.body("The page you are looking for is nowhere to be found. Real sorry about that!"),q.imageClass("hide"));403===b&&(q.title("403 Forbidden!"),q.body("You are not allowed to access this page. I am guessing you already knew that!"))})}};
c.view=p;f.exports=c},{"../disqus":7,"../gist":8,"../http":9,"../views/node":11,mithril:12}],6:[function(c,f,p){p=c("../views/index");var k=c("../http"),h={},g=function(h){var g=h.m;return function(){var c=this;this.nodes=g.prop([]);var b=g.route.param("tid");k("taxonomy/term/"+b).then(function(b){b.map(function(b){b.body=""});c.nodes=b;window.disqus_shortname="{{ disqus_shortname }}";setTimeout(function(){h.booter.attach(".field-type-taxonomy-term-reference a")},2);window.disqus_shortname&&window.disqus_shortname.length&&
(window.DISQUSWIDGETS=void 0,function(){var b=document.createElement("script");b.async=!0;b.type="text/javascript";b.src="//"+window.disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(b)}())});this.navigate=function(b){h.booter.navigateEl(b,h.booter)}}};h.view=p;f.exports=function(n){h.controller=new g(n);return h}},{"../http":9,"../views/index":10}],7:[function(c,f,p){var k=c("mithril");f.exports=function(h){var g=
h.document;"undefined"===typeof k&&(k=h.m);var n=function(){if(h.disqus_shortname)if(h.disqus_identifier=k.route(),h.disqus_identifier||(h.disqus_identifier=h.location.pathname),h.disqus_loaded)h.DISQUS.reset({reload:!0,config:function(){this.page.identifier=h.disqus_identifier;this.page.url=h.location.origin+h.disqus_identifier}});else{h.disqus_loaded=!0;var b=g.createElement("script");b.type="text/javascript";b.async=!0;b.src="//"+h.disqus_shortname+".disqus.com/embed.js?url="+h.disqus_identifier;
(g.getElementsByTagName("head")[0]||g.getElementsByTagName("body")[0]).appendChild(b)}},c=g.getElementById("disqus_thread"),f=!1;h.onscroll=function(){c||(c=g.getElementById("disqus_thread"));!f&&h.scrollY&&c&&c.offsetTop&&h.innerHeight&&h.scrollY+h.innerHeight+50>c.offsetTop&&(f=!0,n())}}},{mithril:12}],8:[function(c,f,p){f.exports=function(c){for(var h=c.document,g=function(b,n){var g="gist_callback"+Math.floor(1E3*Math.random()),f=h.createElement("script");f.setAttribute("src","https://gist.github.com/"+
n+".json?callback="+g);c[g]=function(h){delete c[g];var n='<link href="'+h.stylesheet+'" rel="stylesheet">',n=n+h.div;b.innerHTML=n;f.parentNode.removeChild(f);b.className+="processed"};h.body.appendChild(f)},n=h.getElementsByTagName("gist"),f=0,p=n.length;f<p;f++){var b=n[f];b.className&&-1<b.className.indexOf("processed")||g(b,b.innerHTML)}}},{}],9:[function(c,f,p){f.exports=function(h){return k.request({method:"GET",url:"/"+h+"?json",config:function(h){h.setRequestHeader("Accept","application/hal+json")},
extract:function(h){return 200===h.status?h.responseText:JSON.stringify(h.status)},deserialize:function(h){var c;try{c=JSON.parse(h)}catch(f){c=""}return c}})};var k=c("mithril")},{mithril:12}],10:[function(c,f,p){var k=c("mithril");f.exports=function(h){var c=function(c){return{tag:"article",attrs:{class:"node node--view-mode-teaser clearfix",about:"/aa-cc",typeof:"schema:Article"},children:[{tag:"h2",attrs:{class:"node__title "},children:[{tag:"a",attrs:{href:c.path,onclick:function(){h.navigate(this);
return!1}},children:[c.title]}]},{tag:"div",attrs:{class:"node__meta"},children:["Post date: ",c.created]},{tag:"div",attrs:{class:"read-more"},children:[{tag:"a",attrs:{href:c.path,onclick:function(){h.navigate(this);return!1}},children:["Read more"]}]},{tag:"div",attrs:{class:"comment-count"},children:[{tag:"a",attrs:{"data-disqus-identifier":c.path,href:c.path,onclick:function(){h.navigate(this);return!1}}}]},k.trust(c.field_tags)]}};return{tag:"main",attrs:{id:"content",class:"column",role:"main"},
children:[{tag:"section",attrs:{class:"section"},children:[{tag:"div",attrs:{class:"content"},children:[{tag:"div",attrs:{},children:[h.nodes.map?h.nodes.map(c):""]}]}]}]}}},{mithril:12}],11:[function(c,f,p){var k=c("mithril");f.exports=function(h){return{tag:"main",attrs:{id:"content",class:"column",role:"main"},children:[{tag:"section",attrs:{class:"section"},children:[{tag:"div",attrs:{class:"content"},children:[{tag:"article",attrs:{class:"node node--view-mode-full clearfix",about:"/aa-cc",typeof:"schema:Article"},
children:[{tag:"h1",attrs:{class:"title",id:"page-title"},children:[h.title()]},{tag:"div",attrs:{class:"node__meta"},children:[h.submitted()]},{tag:"div",attrs:{class:"node__content clearfix "},children:[{tag:"p",attrs:{},children:[k.trust(h.body())]}]},{tag:"div",attrs:{class:h.imageClass()+" image",onclick:h.toggleImageClass},children:[{tag:"img",attrs:{src:h.image()}},{tag:"h2",attrs:{},children:["Play"]}]}]},{tag:"div",attrs:{class:"twitter"},children:["This blog is written by me, ",{tag:"a",
attrs:{href:"https://twitter.com/orkj"},children:["eiriksm. Feel free to say hi on twitter."]}]},{tag:"div",attrs:{id:"disqus_thread"}}]}]}]}}},{mithril:12}],12:[function(c,f,p){var k=function g(c,f){function k(a){t=a.document;E=a.location;da=a.cancelAnimationFrame||a.clearTimeout;S=a.requestAnimationFrame||a.setTimeout}function b(){var a=[].slice.call(arguments),b=null!=a[1]&&v.call(a[1])===J&&!("tag"in a[1])&&!("subtree"in a[1]),l=b?a[1]:{},c="class"in l?"class":"className",e={tag:"div",attrs:{}},
d,f=[];if(v.call(a[0])!=M)throw Error("selector in m(selector, attrs, children) should be a string");for(;d=na.exec(a[0]);)""===d[1]&&d[2]?e.tag=d[2]:"#"===d[1]?e.attrs.id=d[2]:"."===d[1]?f.push(d[2]):"["===d[3][0]&&(d=oa.exec(d[3]),e.attrs[d[1]]=d[3]||(d[2]?"":!0));0<f.length&&(e.attrs[c]=f.join(" "));f=b?a[2]:a[1];v.call(f)===F?e.children=f:e.children=b?a.slice(2):a.slice(1);for(var g in l)g===c?""!==l[g]&&(e.attrs[g]=(e.attrs[g]||"")+" "+l[g]):e.attrs[g]=l[g];return e}function p(a,b,l,c,e,d,g,
k,n,y,T){if(null==e||null==e.toString())e="";if("retain"===e.subtree)return d;var r=v.call(d),m=v.call(e);if(null==d||r!==m)null!=d&&(l&&l.nodes?(c=k-c,d=c+(m===F?e:d.nodes).length,u(l.nodes.slice(c,d),l.slice(c,d))):d.nodes&&u(d.nodes,d)),d=new e.constructor,d.tag&&(d={}),d.nodes=[];if(m===F){for(var m=0,w=e.length;m<w;m++)v.call(e[m])===F&&(e=e.concat.apply([],e),m--);l=[];c=d.length===e.length;for(var r=0,s={},D=[],w=!1,m=0;m<d.length;m++)d[m]&&d[m].attrs&&null!=d[m].attrs.key&&(w=!0,s[d[m].attrs.key]=
{action:1,index:m});if(w){-1<e.indexOf(null)&&(e=e.filter(function(a){return null!=a}));w=!1;if(e.length!=d.length)w=!0;else for(var m=0,B,x;B=d[m],x=e[m];m++)if(B.attrs&&x.attrs&&B.attrs.key!=x.attrs.key){w=!0;break}if(w){m=0;for(w=e.length;m<w;m++)e[m]&&e[m].attrs&&(null!=e[m].attrs.key?(B=e[m].attrs.key,s[B]=s[B]?{action:3,index:m,from:s[B].index,element:d.nodes[s[B].index]||t.createElement("div")}:{action:2,index:m}):D.push({index:m,element:a.childNodes[m]||t.createElement("div")}));var m=[],
z;for(z in s)m.push(s[z]);w=m.sort(A);z=Array(d.length);for(m=0;s=w[m];m++)1===s.action&&(u(d[s.index].nodes,d[s.index]),z.splice(s.index,1)),2===s.action&&(B=t.createElement("div"),B.key=e[s.index].attrs.key,a.insertBefore(B,a.childNodes[s.index]||null),z.splice(s.index,0,{attrs:{key:e[s.index].attrs.key},nodes:[B]})),3===s.action&&(a.childNodes[s.index]!==s.element&&null!==s.element&&a.insertBefore(s.element,a.childNodes[s.index]||null),z[s.index]=d[s.from]);m=0;for(w=D.length;m<w;m++)s=D[m],a.insertBefore(s.element,
a.childNodes[s.index]||null),z[s.index]=d[s.index];d=z;d.nodes=Array(a.childNodes.length);for(m=0;z=a.childNodes[m];m++)d.nodes[m]=z}}z=m=0;for(w=e.length;m<w;m++)D=p(a,b,d,k,e[m],d[z],g,k+r||r,n,y,T),D!==f&&(D.nodes.intact||(c=!1),r=D.$trusted?r+(D.match(/<[^\/]|\>\s*[^<]/g)||[]).length:r+(v.call(D)===F?D.length:1),d[z++]=D);if(!c){m=0;for(w=e.length;m<w;m++)null!=d[m]&&l.push.apply(l,d[m].nodes);for(m=0;b=d.nodes[m];m++)null!=b.parentNode&&0>l.indexOf(b)&&u([b],[d[m]]);e.length<d.length&&(d.length=
e.length);d.nodes=l}}else if(null!=e&&m===J){e.attrs||(e.attrs={});d.attrs||(d.attrs={});b=Object.keys(e.attrs);l=b.length>("key"in e.attrs?1:0);if(e.tag!=d.tag||b.join()!=Object.keys(d.attrs).join()||e.attrs.id!=d.attrs.id)if(d.nodes.length&&u(d.nodes),d.configContext&&typeof d.configContext.onunload===C)d.configContext.onunload();if(v.call(e.tag)!=M)return;m=0===d.nodes.length;e.attrs.xmlns?y=e.attrs.xmlns:"svg"===e.tag?y="http://www.w3.org/2000/svg":"math"===e.tag&&(y="http://www.w3.org/1998/Math/MathML");
m?(b=e.attrs.is?y===f?t.createElement(e.tag,e.attrs.is):t.createElementNS(y,e.tag,e.attrs.is):y===f?t.createElement(e.tag):t.createElementNS(y,e.tag),d={tag:e.tag,attrs:l?X(b,e.tag,e.attrs,{},y):e.attrs,children:null!=e.children&&0<e.children.length?p(b,e.tag,f,f,e.children,d.children,!0,0,e.attrs.contenteditable?b:n,y,T):e.children,nodes:[b]},d.children&&!d.children.nodes&&(d.children.nodes=[]),"select"===e.tag&&e.attrs.value&&X(b,e.tag,{value:e.attrs.value},{},y),a.insertBefore(b,a.childNodes[k]||
null)):(b=d.nodes[0],l&&X(b,e.tag,e.attrs,d.attrs,y),d.children=p(b,e.tag,f,f,e.children,d.children,!1,0,e.attrs.contenteditable?b:n,y,T),d.nodes.intact=!0,!0===g&&null!=b&&a.insertBefore(b,a.childNodes[k]||null));typeof e.attrs.config===C&&(a=d.configContext=d.configContext||{},T.push(function(a,b){return function(){return a.attrs.config.apply(a,b)}}(e,[b,!m,a,d])))}else if(typeof m!=C)if(0===d.nodes.length)e.$trusted?l=R(a,k,e):(l=[t.createTextNode(e)],a.nodeName.match(pa)||a.insertBefore(l[0],
a.childNodes[k]||null)),d=-1<"string number boolean".indexOf(typeof e)?new e.constructor(e):e,d.nodes=l;else if(d.valueOf()!==e.valueOf()||!0===g){l=d.nodes;if(!n||n!==t.activeElement)if(e.$trusted)u(l,d),l=R(a,k,e);else if("textarea"===b)a.value=e;else if(n)n.innerHTML=e;else{if(1===l[0].nodeType||1<l.length)u(d.nodes,d),l=[t.createTextNode(e)];a.insertBefore(l[0],a.childNodes[k]||null);l[0].nodeValue=e}d=new e.constructor(e);d.nodes=l}else d.nodes.intact=!0;return d}function A(a,b){return a.action-
b.action||a.index-b.index}function X(a,b,l,c,e){for(var d in l){var f=l[d],g=c[d];if(d in c&&g===f)"value"===d&&"input"===b&&a.value!=f&&(a.value=f);else{c[d]=f;try{if("config"!==d&&"key"!=d)if(typeof f===C&&0===d.indexOf("on"))a[d]=L(f,a);else if("style"===d&&null!=f&&v.call(f)===J){for(var k in f)if(null==g||g[k]!==f[k])a.style[k]=f[k];for(k in g)k in f||(a.style[k]="")}else if(null!=e)"href"===d?a.setAttributeNS("http://www.w3.org/1999/xlink","href",f):"className"===d?a.setAttribute("class",f):
a.setAttribute(d,f);else if(d in a&&"list"!==d&&"style"!==d&&"form"!==d&&"type"!==d){if("input"!==b||a[d]!==f)a[d]=f}else a.setAttribute(d,f)}catch(n){if(0>n.message.indexOf("Invalid argument"))throw n;}}}return c}function u(a,b){for(var l=a.length-1;-1<l;l--)if(a[l]&&a[l].parentNode){try{a[l].parentNode.removeChild(a[l])}catch(c){}b=[].concat(b);b[l]&&Y(b[l])}0!=a.length&&(a.length=0)}function Y(a){if(a.configContext&&typeof a.configContext.onunload===C)a.configContext.onunload();if(a.children)if(v.call(a.children)===
F)for(var b=0,l;l=a.children[b];b++)Y(l);else a.children.tag&&Y(a.children)}function R(a,b,l){var c=a.childNodes[b];if(c){var e=1!=c.nodeType,d=t.createElement("span");e?(a.insertBefore(d,c||null),d.insertAdjacentHTML("beforebegin",l),a.removeChild(d)):c.insertAdjacentHTML("beforebegin",l)}else a.insertAdjacentHTML("beforeend",l);for(l=[];a.childNodes[b]!==c;)l.push(a.childNodes[b]),b++;return l}function L(a,c){return function(l){l=l||event;b.redraw.strategy("diff");b.startComputation();try{return a.call(c,
l)}finally{ea()}}}function I(a){var b=fa.indexOf(a);return 0>b?fa.push(a)-1:b}function qa(a){var b=function(){arguments.length&&(a=arguments[0]);return a};b.toJSON=function(){return a};return b}function ga(){for(var a="all"===b.redraw.strategy(),c=0,l;l=U[c];c++)G[c]&&b.render(l,Z[c].view?Z[c].view(G[c]):"",a);N&&(N(),N=null);H=null;ha=new Date;b.redraw.strategy("diff")}function ra(a,c,l){O={};var f=l.indexOf("?");-1!==f&&(O=$(l.substr(f+1,l.length)),l=l.substr(0,f));for(var e in c){if(e===l)return b.module(a,
c[e]),!0;f=new RegExp("^"+e.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(f.test(l))return l.replace(f,function(){for(var d=e.match(/:[^\/]+/g)||[],l=[].slice.call(arguments,1,-2),f=0,g=d.length;f<g;f++)O[d[f].replace(/:|\./g,"")]=decodeURIComponent(l[f]);b.module(a,c[e])}),!0}}function ia(a){a=a||event;if(!a.ctrlKey&&!a.metaKey&&2!==a.which){a.preventDefault?a.preventDefault():a.returnValue=!1;a=a.currentTarget||this;var c="pathname"===b.route.mode&&a.search?$(a.search.slice(1)):
{};b.route(a[b.route.mode].slice(K[b.route.mode].length),c)}}function ja(){"hash"!=b.route.mode&&E.hash?E.hash=E.hash:c.scrollTo(0,0)}function V(a,b){var c=[],f;for(f in a){var e=b?b+"["+f+"]":f,d=a[f],g=v.call(d),d=null!=d&&g===J?V(d,e):g===F?d.map(function(a){return encodeURIComponent(e+"[]")+"="+encodeURIComponent(a)}).join("&"):encodeURIComponent(e)+"="+encodeURIComponent(d);c.push(d)}return c.join("&")}function $(a){a=a.split("&");for(var b={},c=0,f=a.length;c<f;c++){var e=a[c].split("=");b[decodeURIComponent(e[0])]=
e[1]?decodeURIComponent(e[1]):""}return b}function aa(a){var c=b.prop();a.then(c);c.then=function(b,c){return aa(a.then(b,c))};return c}function ka(a,c){function l(a){q=a||n;m.map(function(a){q===k&&a.resolve(r)||a.reject(r)})}function f(a,d,c,e){if((null!=r&&v.call(r)===J||typeof r===C)&&typeof a===C)try{var l=0;a.call(r,function(a){l++||(r=a,d())},function(a){l++||(r=a,c())})}catch(g){b.deferred.onerror(g),r=g,c()}else e()}function e(){var m;try{m=r&&r.then}catch(n){return b.deferred.onerror(n),
r=n,q=g,e()}f(m,function(){q=d;e()},function(){q=g;e()},function(){try{q===d&&typeof a===C?r=a(r):q===g&&"function"===typeof c&&(r=c(r),q=d)}catch(e){return b.deferred.onerror(e),r=e,l()}r===p?(r=TypeError(),l()):f(m,function(){l(k)},l,function(){l(q===d&&k)})})}var d=1,g=2,k=3,n=4,p=this,q=0,r=0,m=[];p.promise={};p.resolve=function(a){q||(r=a,q=d,e());return this};p.reject=function(a){q||(r=a,q=g,e());return this};p.promise.then=function(a,b){var d=new ka(a,b);q===k?d.resolve(r):q===n?d.reject(r):
m.push(d);return d.promise}}function ba(a){return a}function sa(a){if(a.dataType&&"jsonp"===a.dataType.toLowerCase()){var b="mithril_callback_"+(new Date).getTime()+"_"+Math.round(1E16*Math.random()).toString(36),l=t.createElement("script");c[b]=function(d){l.parentNode.removeChild(l);a.onload({type:"load",target:{responseText:d}});c[b]=f};l.onerror=function(d){l.parentNode.removeChild(l);a.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}});
c[b]=f;return!1};l.onload=function(a){return!1};l.src=a.url+(0<a.url.indexOf("?")?"&":"?")+(a.callbackKey?a.callbackKey:"callback")+"="+b+"&"+V(a.data||{});t.body.appendChild(l)}else{var g=new c.XMLHttpRequest;g.open(a.method,a.url,!0,a.user,a.password);g.onreadystatechange=function(){if(4===g.readyState)if(200<=g.status&&300>g.status)a.onload({type:"load",target:g});else a.onerror({type:"error",target:g})};a.serialize===JSON.stringify&&a.data&&"GET"!==a.method&&g.setRequestHeader("Content-Type",
"application/json; charset=utf-8");a.deserialize===JSON.parse&&g.setRequestHeader("Accept","application/json, text/*");if(typeof a.config===C){var e=a.config(g,a);null!=e&&(g=e)}if((e="GET"!==a.method&&a.data?a.data:"")&&v.call(e)!=M&&e.constructor!=c.FormData)throw"Request data should be either be a string or FormData. Check the `serialize` option in `m.request`";g.send(e);return g}}function ta(a,b,c){"GET"===a.method&&"jsonp"!=a.dataType?(c=0>a.url.indexOf("?")?"?":"&",b=V(b),a.url+=b?c+b:""):a.data=
c(b);return a}function ua(a,b){var c=a.match(/:[a-z]\w+/gi);if(c&&b)for(var f=0;f<c.length;f++){var e=c[f].slice(1);a=a.replace(c[f],b[e]);delete b[e]}return a}var J="[object Object]",F="[object Array]",M="[object String]",C="function",v={}.toString,na=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g,oa=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/,pa=/^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/,t,E,S,da;k(c);var la,va={appendChild:function(a){la===f&&(la=t.createElement("html"));
t.documentElement&&t.documentElement!==a?t.replaceChild(a,t.documentElement):t.appendChild(a);this.childNodes=t.childNodes},insertBefore:function(a){this.appendChild(a)},childNodes:[]},fa=[],P={};b.render=function(a,b,c){var g=[];if(!a)throw Error("Please ensure the DOM element exists before rendering a template into it.");var e=I(a),d=a===t,k=d||a===t.documentElement?va:a;d&&"html"!=b.tag&&(b={tag:"html",attrs:{},children:b});P[e]===f&&u(k.childNodes);!0===c&&(c=I(a),u(a.childNodes,P[c]),P[c]=f);
P[e]=p(k,null,f,f,b,P[e],!1,0,null,f,g);a=0;for(b=g.length;a<b;a++)g[a]()};b.trust=function(a){a=new String(a);a.$trusted=!0;return a};b.prop=function(a){return(null!=a&&v.call(a)===J||typeof a===C)&&typeof a.then===C?aa(a):qa(a)};var U=[],Z=[],G=[],H=null,ha=0,N=null,ma;b.module=function(a,c){if(!a)throw Error("Please ensure the DOM element exists before rendering a template into it.");var f=U.indexOf(a);0>f&&(f=U.length);var g=!1;if(G[f]&&typeof G[f].onunload===C)G[f].onunload({preventDefault:function(){g=
!0}});if(!g){b.redraw.strategy("all");b.startComputation();U[f]=a;var e=ma=c=c||{},d=new (c.controller||function(){});e===ma&&(G[f]=d,Z[f]=c);ea();return G[f]}};b.redraw=function(a){if(H&&!0!==a){if(16<new Date-ha||S===c.requestAnimationFrame)0<H&&da(H),H=S(ga,16)}else ga(),H=S(function(){H=null},16)};b.redraw.strategy=b.prop();var Q=0;b.startComputation=function(){Q++};b.endComputation=function(){Q=Math.max(Q-1,0);0===Q&&b.redraw()};var ea=function(){"none"==b.redraw.strategy()?(Q--,b.redraw.strategy("diff")):
b.endComputation()};b.withAttr=function(a,b){return function(c){c=c||event;c=c.currentTarget||this;b(a in c?c[a]:c.getAttribute(a))}};var K={pathname:"",hash:"#",search:"?"},ca=function(){},O,x;b.route=function(){if(0===arguments.length)return x;if(3===arguments.length&&v.call(arguments[1])===M){var a=arguments[0],f=arguments[1],g=arguments[2];ca=function(c){c=x=c.slice(K[b.route.mode].length);ra(a,g,c)||b.route(f,!0)};var k="hash"===b.route.mode?"onhashchange":"onpopstate";c[k]=function(){var a=
E[b.route.mode];"pathname"===b.route.mode&&(a+=E.search);x!=a.slice(K[b.route.mode].length)&&ca(a)};N=ja;c[k]()}else if(arguments[0].addEventListener)k=arguments[0],k.href=("pathname"!==b.route.mode?E.pathname:"")+K[b.route.mode]+this.attrs.href,k.removeEventListener("click",ia),k.addEventListener("click",ia);else if(v.call(arguments[0])===M){k=x;x=arguments[0];var e=arguments[1]||{},d=x.indexOf("?"),q=-1<d?$(x.slice(d+1)):{},p;for(p in e)q[p]=e[p];e=V(q);d=-1<d?x.slice(0,d):x;e&&(x=d+(-1===d.indexOf("?")?
"?":"&")+e);var u=!0===(3===arguments.length?arguments[2]:arguments[1])||k===arguments[0];c.history.pushState?(N=function(){c.history[u?"replaceState":"pushState"](null,t.title,K[b.route.mode]+x);ja()},ca(K[b.route.mode]+x)):E[b.route.mode]=x}};b.route.param=function(a){if(!O)throw Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");return O[a]};b.route.mode="search";b.deferred=function(){var a=new ka;a.promise=aa(a.promise);return a};b.deferred.onerror=function(a){if("[object Error]"===
v.call(a)&&!a.constructor.toString().match(/ Error/))throw a;};b.sync=function(a){function c(a,b){return function(c){d[a]=c;b||(f="reject");0===--e&&(g.promise(d),g[f](d));return c}}var f="resolve",g=b.deferred(),e=a.length,d=Array(e);if(0<a.length)for(var k=0;k<a.length;k++)a[k].then(c(k,!0),c(k,!1));else g.resolve([]);return g.promise};b.request=function(a){!0!==a.background&&b.startComputation();var c=b.deferred(),f=a.dataType&&"jsonp"===a.dataType.toLowerCase(),g=a.serialize=f?ba:a.serialize||
JSON.stringify,e=a.deserialize=f?ba:a.deserialize||JSON.parse,d=a.extract||function(a){return 0===a.responseText.length&&e===JSON.parse?null:a.responseText};a.url=ua(a.url,a.data);a=ta(a,a.data,g);a.onload=a.onerror=function(f){try{f=f||event;var g=(("load"===f.type?a.unwrapSuccess:a.unwrapError)||ba)(e(d(f.target,a)));if("load"===f.type)if(v.call(g)===F&&a.type)for(var k=0;k<g.length;k++)g[k]=new a.type(g[k]);else a.type&&(g=new a.type(g));c["load"===f.type?"resolve":"reject"](g)}catch(l){b.deferred.onerror(l),
c.reject(l)}!0!==a.background&&b.endComputation()};sa(a);c.promise(a.initialValue);return c.promise};b.deps=function(a){k(c=a||c);return c};b.deps.factory=g;return b}("undefined"!=typeof window?window:{});"undefined"!=typeof f&&null!==f&&f.exports?f.exports=k:"function"===typeof define&&define.amd&&define(function(){return k})},{}]},{},[1]);
