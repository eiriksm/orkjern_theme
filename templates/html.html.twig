{#
/**
 * @file
 * html template for orkjern_theme.
#}
<!DOCTYPE html>
<html{{ html_attributes }}>
  <head>
    <head-placeholder token="{{ placeholder_token }}">
    <title>{{ head_title|safe_join(' | ') }}</title>
  </head>
  {{ tag_list }}
  {% if not has_css %}
    <style>.comment-count a,.image,.logo-wrapper{text-align:center}a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:'';content:none}table{border-collapse:collapse;border-spacing:0}.skip-link,.skip-link.visually-hidden.focusable{left:50%;margin-left:-5.25em;margin-top:0;position:absolute!important;width:auto;z-index:50;clip:rect(1px,1px,1px,1px)}.skip-link.visually-hidden.focusable:active,.skip-link.visually-hidden.focusable:focus,.skip-link.visually-hidden.focusable:hover,.skip-link:active,.skip-link:focus,.skip-link:hover{outline:0;clip:auto;overflow:visible;height:auto}.skip-link,.skip-link:link,.skip-link:visited{background:#444;background:rgba(0,0,0,.6);color:#fff;display:inline-block;font-size:.94em;line-height:1.7;padding:1px 10px 2px;text-decoration:none;border-radius:0 0 10px 10px}body{-webkit-font-smoothing:antialiased;font-family:Helvetica,Arial,sans-serif;color:#424242;font-size:18px;letter-spacing:-.1px;line-height:1.5555555555555556em}a{text-decoration:none;color:#00546B;border-bottom:1px solid #00a4d1}p{margin:1em 0}.climacon{height:310px}#page-wrapper{max-width:640px;margin:auto;padding:10px;overflow:hidden}.climacon_component-fill{fill:#424242}.svg-wrapper{margin:auto;z-index:-2;position:absolute;width:100%;top:-100px}#header{position:relative;height:140px}.logo-wrapper .letters,.logo-wrapper .letters a{border:none;display:block;line-height:1;padding-top:15px;padding-right:52px;margin:auto;z-index:1;color:#fff;top:-10px;width:90px;left:-26px}.climacon_wrapperComponent-lightning{-webkit-animation:lightning 3s infinite;animation:lightning 3s infinite}@-webkit-keyframes lightning{from{opacity:1}to{opacity:0}}@keyframes lightning{from{opacity:1}to{opacity:0}}h1{font-size:2em}code,pre{font-family:monospace;background:#eee;overflow-x:scroll}gist{display:none}gist.processed{display:block}blockquote{width:80%;margin:20px auto;font-style:italic;color:#555;padding:.2em 30px .2em 65px;border-left:8px solid gray;line-height:1.6;position:relative;background:#EDEDED}blockquote::before{content:"\201C";color:grey;font-size:3em;position:absolute;left:10px;top:-10px}blockquote::after{content:''}blockquote span{display:block;color:#333;font-style:normal;font-weight:700;margin-top:1em}.views-field-path{display:none}.views-field-title,.views-field-title-1,h2,h2.node__title{font-size:1.5em;margin-top:1em}.views-field-title a,.views-field-title span,.views-field-title-1 a,.views-field-title-1 span,h2 a,h2 span,h2.node__title a,h2.node__title span{color:#424242;border-bottom:1px solid #fff;transition:border .5s}.views-field-title a:hover,.views-field-title span:hover,.views-field-title-1 a:hover,.views-field-title-1 span:hover,h2 a:hover,h2 span:hover,h2.node__title a:hover,h2.node__title span:hover{border-bottom:1px solid #00a4d1}ul{list-style-type:disc;list-style-position:inside;margin:1em 0}ol li,ul li{margin-left:1em}.node__meta,.views-field-created{font-size:.8em;color:#616161;padding:1em 0}.node__content{padding:10px 0}article{margin:2em 0}.read-more,.views-field-view-node{display:inline-block}.read-more a,.views-field-view-node a{background:#00546B;padding:5px;border-radius:3px;display:inline-block;margin:1em 0;border:0;color:#fff;transition:background .5s}.read-more a:hover,.views-field-view-node a:hover{background:#002c38}.field-node--field-tags h3,.field-type-taxonomy-term-reference h3,.views-field-field-tags .views-label{display:none}.field-node--field-tags .field-item,.field-node--field-tags li,.field-type-taxonomy-term-reference .field-item,.field-type-taxonomy-term-reference li{display:inline-block;margin:0;padding-right:5px}.field-node--field-tags .field-item a,.field-node--field-tags li a,.field-type-taxonomy-term-reference .field-item a,.field-type-taxonomy-term-reference li a{padding:5px;display:inline-block;border-radius:3px;background:#75B08A;margin:2px 0;color:#fff;border:0;transition:background .5s}.field-node--field-tags .field-item a:hover,.field-node--field-tags li a:hover,.field-type-taxonomy-term-reference .field-item a:hover,.field-type-taxonomy-term-reference li a:hover{background:#589a70}.image{margin:auto}.image:hover{cursor:pointer}.image.noplay{background:#F0E797;border-radius:3px;height:100px;width:200px}.image.noplay img{display:none}.image.noplay h2{margin:.6em 0;color:#00546B;padding:5px 10px;border-radius:3px;background:#fff;display:inline-block}.image h2,.image.hide{display:none}.comment-count{display:inline-block}.comment-count a{position:relative;display:block;background-color:#FF9D84;margin:0 0 0 15px;padding:5px 0;width:110px;border:0}.comment-count a:after{display:block;content:"";border-color:transparent #FF9D84 transparent transparent;border-style:solid;border-width:10px;height:0;width:0;position:absolute;bottom:9px;left:-19px}.comment-count a:empty{display:none}.view-front-reset .views-row{margin:2em 0}</style>
  {% endif %}
  <body{{ attributes }}>
    <a href="#main-content" class="visually-hidden focusable skip-link">
      {{ 'Skip to main content'|t }}
    </a>
    {{ page_top }}
    {{ page }}
    {{ page_bottom }}
    {% if has_css %}
      <script>(function e$$0(k,q,p){function b(n,ia){if(!q[n]){if(!k[n]){var u="function"==typeof require&&require;if(!ia&&u)return u(n,!0);if(c)return c(n,!0);u=Error("Cannot find module '"+n+"'");throw u.code="MODULE_NOT_FOUND",u;}u=q[n]={exports:{}};k[n][0].call(u.exports,function(c){var d=k[n][1][c];return b(d?d:c)},u,u.exports,e$$0,k,q,p)}return q[n].exports}for(var c="function"==typeof require&&require,n=0;n<p.length;n++)b(p[n]);return b})({1:[function(h,k,q){h=h("./src/app");k=h.getLsOrKickOut(window);try{var p=
k.getItem("orkjern_theme_cache");if(!p)throw Error("Have no cache data");var b=JSON.parse(p);if(!b)throw Error("Can not parse data");if(!b["{{cache_key}}"])throw Error("Have old cache");h.appendCss(b["{{cache_key}}"],window)}catch(c){k.clear("orkjern_theme_cache"),document.cookie="ORKJERN_THEME_CACHE=123",window.location.reload()}h.init(window)},{"./src/app":2}],2:[function(h,k,q){var p=h("mithril"),b=h("./booter"),c=h("./disqus"),n=h("./gist"),v=h("./controllers/node"),ia=h("./controllers/index"),
u=h("./controllers/taxonomy");k.exports={appendCss:function(b,d){var c=d.document,n=c.getElementsByTagName("head")[0],v=c.createElement("style");v.type="text/css";v.styleSheet?v.styleSheet.cssText=b:v.appendChild(c.createTextNode(b));return n.appendChild(v)},getLsOrKickOut:function(b){var d=b.localStorage;if(!d){if(b.navigator&&b.navigator.userAgent&&b.navigator.userAgent.match(/Twitter/))return!1;b.alert("Your browser is bad, and you should feel bad. You are not welcome here. You will be redirected to a place where you can upgrade your browser.");
b.location.href="http://browsehappy.com/";return!1}return d},init:function(h){var d={window:h,m:p};h.test&&p.deps(h);var w=h.document;p.route.mode="pathname";d.controllers={index:new ia(d),node:v,taxonomy:new u(d)};d.booter=new b(d);d.booter.attach();c(d.window);n(d.window);h.disqus_shortname="{{ disqus_shortname }}";if(!h.disqus_shortname||!h.disqus_shortname.length)return d;h.DISQUSWIDGETS=void 0;if(w.querySelectorAll&&0===w.querySelectorAll("a[data-disqus-identifier]").length)for(var k=w.querySelectorAll(".views-field-view-node a"),
q=0,M=k.length;q<M;q++){var R=w.createElement("div");R.className="comment-count";var S=w.createElement("a");S.href=k[q].pathname;S.setAttribute("data-disqus-identifier",k[q].pathname);R.appendChild(S);k[q].parentNode.parentNode.parentNode.insertBefore(R,k[q].parentNode.parentNode.nextSibling)}k=w.createElement("script");k.async=!0;k.type="text/javascript";k.src="//"+h.disqus_shortname+".disqus.com/count.js";(w.getElementsByTagName("HEAD")[0]||w.getElementsByTagName("BODY")[0]).appendChild(k);return d}}},
{"./booter":3,"./controllers/index":4,"./controllers/node":5,"./controllers/taxonomy":6,"./disqus":7,"./gist":8,mithril:12}],3:[function(h,k,q){function p(b){this.app=b;this.window=b.window;var c=b.controllers.index,n=b.controllers.node;b=b.controllers.taxonomy;this.booted=!1;this.routeConf={};this.routeConf["/"]=c;this.routeConf["/node"]=c;this.routeConf["/:alias"]=n;this.routeConf["/node/:nid"]=n;this.routeConf["/taxonomy/term/:tid"]=b;var v=this.app.m;this.m=v;var c=this.window.document,p=this;
this.startFunction=function(){var b=this.getAttribute("href");p.navigate(b);return!1};if(c=c.querySelector(".site-name a"))c.onclick=function(){"/"!==v.route()&&p.navigate("/");return!1}}k.exports=p;p.prototype.attach=function(b){var c=this.window.document;if(c&&c.querySelectorAll){b=c.querySelectorAll(b||"#main-wrapper a");for(var c=0,n=b.length;c<n;c++){var v=!1;0===b[c].href.indexOf(window.location.protocol+"//"+window.location.hostname)&&(v=!0);0===b[c].href.indexOf("/")&&(v=!0);v&&(b[c].onclick=
this.startFunction)}}};p.prototype.navigate=function(b){var c=this.window;!this.booted&&c&&c.document&&(this.m.route(c.document.getElementById("main-wrapper"),b,this.routeConf),this.booted=!0);this.m.route(b)};p.prototype.navigateEl=function(b,c){var n=b.getAttribute("href");c.navigate(n);return!1}},{}],4:[function(h,k,q){q=h("../views/index");var p=h("../http"),b={},c=function(b){var c=b.m;return function(){var h=b.window,k=this;this.nodes=c.prop([]);p("api/node").then(function(c){k.nodes=c;setTimeout(function(){b.booter.attach(".field-type-taxonomy-term-reference a")},
2);var d=b.window.document;h.DISQUSWIDGETS=void 0;h.disqus_shortname&&function(){var b=d.createElement("script");b.async=!0;b.type="text/javascript";b.src="//"+h.disqus_shortname+".disqus.com/count.js";(d.getElementsByTagName("HEAD")[0]||d.getElementsByTagName("BODY")[0]).appendChild(b)}()});this.navigate=function(c){b.booter.navigateEl(c,b.booter)}}};b.view=q;k.exports=function(n){b.app=n;b.controller=new c(n);return b}},{"../http":9,"../views/index":10}],5:[function(h,k,q){var p=h("mithril");q=
h("../views/node");var b=h("../http"),c=h("../gist"),n=h("../disqus");h={controller:function(){var v=this;this.title=p.prop("");this.body=p.prop("Loading...");this.raw=p.prop({});this.tags=p.prop([]);this.image=p.prop("about:blank");v.submitted=p.prop("");var h;this.imageClass=p.prop("noplay");this.toggleImageClass=function(){p.startComputation();v.imageClass("play");h&&v.image(h);p.endComputation()};var k=p.route.param("alias"),q=p.route.param("nid");if(!k){if(!q){p.route("/");return}k="node/"+q}b(k).then(function(d){if(d){var b=
new Date(1E3*d.created[0].value);v.title(d.title[0].value);v.body(d.body[0].value);v.submitted("Submitted "+b.toLocaleDateString());var b=[],p;for(p in d._links)if(!(1>p.indexOf("image")&&1>p.indexOf("tags"))&&d._links.hasOwnProperty(p)&&(0<p.indexOf("image")&&(h=d._links[p][0].href),0<p.indexOf("tags")))for(var k=0,q=d._links[p].length;k<q;k++){var u=d._links[p][k].href,u=u.substring(u.lastIndexOf("/")+1,u.lastIndexOf("?"));orkjernTags[u]&&b.push({tid:u,title:orkjernTags[u]})}b.length&&v.tags(b);
v.raw=d;setTimeout(function(){c(window)},200);window.disqus_shortname="{{ disqus_shortname }}";setTimeout(function(){n(window)},200)}},function(b){404===b&&(v.title("404 not found!"),v.body("The page you are looking for is nowhere to be found. Real sorry about that!"),v.imageClass("hide"));403===b&&(v.title("403 Forbidden!"),v.body("You are not allowed to access this page. I am guessing you already knew that!"))})}};h.view=q;k.exports=h},{"../disqus":7,"../gist":8,"../http":9,"../views/node":11,mithril:12}],
6:[function(h,k,q){q=h("../views/index");var p=h("../http"),b={},c=function(b){var c=b.m;return function(){var h=this;this.nodes=c.prop([]);var k=c.route.param("tid");p("api/taxonomy/term/"+k).then(function(c){c.map(function(b){b.body=""});h.nodes=c;window.disqus_shortname="{{ disqus_shortname }}";setTimeout(function(){b.booter.attach(".field-type-taxonomy-term-reference a")},2);window.disqus_shortname&&window.disqus_shortname.length&&(window.DISQUSWIDGETS=void 0,function(){var b=document.createElement("script");
b.async=!0;b.type="text/javascript";b.src="//"+window.disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(b)}())});this.navigate=function(c){b.booter.navigateEl(c,b.booter)}}};b.view=q;k.exports=function(n){b.controller=new c(n);return b}},{"../http":9,"../views/index":10}],7:[function(h,k,q){var p=h("mithril");k.exports=function(b){var c=b.document;"undefined"===typeof p&&(p=b.m);var n=function(){if(b.disqus_shortname)if(b.disqus_identifier=
p.route(),b.disqus_identifier||(b.disqus_identifier=b.location.pathname),b.disqus_loaded)b.DISQUS.reset({reload:!0,config:function(){this.page.identifier=b.disqus_identifier;this.page.url=b.location.origin+b.disqus_identifier}});else{b.disqus_loaded=!0;var n=c.createElement("script");n.type="text/javascript";n.async=!0;n.src="//"+b.disqus_shortname+".disqus.com/embed.js?url="+b.disqus_identifier;(c.getElementsByTagName("head")[0]||c.getElementsByTagName("body")[0]).appendChild(n)}},h=c.getElementById("disqus_thread"),
k=!1;b.onscroll=function(){h||(h=c.getElementById("disqus_thread"));!k&&b.scrollY&&h&&h.offsetTop&&b.innerHeight&&b.scrollY+b.innerHeight+50>h.offsetTop&&(k=!0,n())}}},{mithril:12}],8:[function(h,k,q){k.exports=function(h){for(var b=h.document,c=function(c,d){var n="gist_callback"+Math.floor(1E3*Math.random()),k=b.createElement("script");k.setAttribute("src","https://gist.github.com/"+d+".json?callback="+n);h[n]=function(b){delete h[n];var d='<link href="'+b.stylesheet+'" rel="stylesheet">',d=d+b.div;
c.innerHTML=d;k.parentNode.removeChild(k);c.className+="processed"};b.body.appendChild(k)},n=b.getElementsByTagName("gist"),k=0,q=n.length;k<q;k++){var u=n[k];u.className&&-1<u.className.indexOf("processed")||c(u,u.innerHTML)}}},{}],9:[function(h,k,q){k.exports=function(b){return p.request({method:"GET",url:"/"+b+"?_format=hal_json",config:function(b){b.setRequestHeader("Accept","application/hal+json")},extract:function(b){return 200===b.status?b.responseText:JSON.stringify(b.status)},deserialize:function(b){var n;
try{n=JSON.parse(b)}catch(h){n=""}return n}})};var p=h("mithril")},{mithril:12}],10:[function(h,k,q){var p=h("mithril");k.exports=function(b){var c=function(c){return{tag:"article",attrs:{class:"node node--view-mode-teaser clearfix",about:"/aa-cc",typeof:"schema:Article"},children:[{tag:"h2",attrs:{class:"node__title "},children:[{tag:"a",attrs:{href:c.path,onclick:function(){b.navigate(this);return!1}},children:[c.title]}]},{tag:"div",attrs:{class:"node__meta"},children:["Post date: ",c.created]},
{tag:"div",attrs:{class:"read-more"},children:[{tag:"a",attrs:{href:c.path,onclick:function(){b.navigate(this);return!1}},children:["Read more"]}]},{tag:"div",attrs:{class:"comment-count"},children:[{tag:"a",attrs:{"data-disqus-identifier":c.path,href:c.path,onclick:function(){b.navigate(this);return!1}}}]},p.trust(c.field_tags)]}};return{tag:"main",attrs:{id:"content",class:"column",role:"main"},children:[{tag:"section",attrs:{class:"section"},children:[{tag:"div",attrs:{class:"content"},children:[{tag:"div",
attrs:{},children:[b.nodes.map?b.nodes.map(c):""]}]}]}]}}},{mithril:12}],11:[function(h,k,q){var p=h("mithril");k.exports=function(b){var c=b.tags().map(function(b){return{tag:"li",attrs:{},children:[{tag:"a",attrs:{href:"/taxonomy/term/"+b.tid,hreflang:"en"},children:[b.title," "]}," "]}});return{tag:"main",attrs:{id:"content",class:"column",role:"main"},children:[{tag:"section",attrs:{class:"section"},children:[{tag:"div",attrs:{class:"content"},children:[{tag:"article",attrs:{class:"node node--view-mode-full clearfix",
about:"/aa-cc",typeof:"schema:Article"},children:[{tag:"h1",attrs:{class:"title",id:"page-title"},children:[b.title()]},{tag:"div",attrs:{class:"node__meta"},children:[b.submitted()]},{tag:"div",attrs:{class:"node__content clearfix "},children:[{tag:"p",attrs:{},children:[p.trust(b.body())]}]},{tag:"div",attrs:{class:b.imageClass()+" image",onclick:b.toggleImageClass},children:[{tag:"img",attrs:{src:b.image()}},{tag:"h2",attrs:{},children:["Play"]}]},{tag:"div",attrs:{class:"clearfix field-type-taxonomy-term-reference"},
children:[{tag:"ul",attrs:{class:"links field-items"},children:[c]}]}]},{tag:"div",attrs:{class:"twitter"},children:["This blog is written by me, ",{tag:"a",attrs:{href:"https://twitter.com/orkj"},children:["eiriksm. Feel free to say hi on twitter."]}]},{tag:"div",attrs:{id:"disqus_thread"}}]}]}]}}},{mithril:12}],12:[function(h,k,q){(function(h,b){var c=b(h);"undefined"===typeof window&&c.deps({document:"undefined"!==typeof document?document:{},location:"undefined"!==typeof location?location:{},clearTimeout:clearTimeout,
setTimeout:setTimeout});"object"===typeof k&&null!=k&&k.exports?k.exports=c:"function"===typeof define&&define.amd?define(function(){return c}):h.m=c})("undefined"!==typeof window?window:this,function b(c,h){function k(a){return"function"===typeof a}function q(a){return"[object Object]"===N.call(a)}function u(a){return"[object String]"===N.call(a)}function H(){}function d(a,f){for(var g=[],b=1,e=arguments.length;b<e;b++)g[b-1]=arguments[b];if(a&&k(a.view))return ua(a,g);if(!u(a))throw Error("selector in m(selector, attrs, children) should be a string");
b=(e=null!=f&&q(f)&&!("tag"in f||"view"in f||"subtree"in f))?f:{};g=e?g.slice(1):g;g=1===g.length&&I(g[0])?g[0]:g;for(var g={tag:"div",attrs:{},children:g},e=g.attrs,l=[],ba=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,m;m=ba.exec(a);)if(""===m[1]&&m[2])g.tag=m[2];else if("#"===m[1])g.attrs.id=m[2];else if("."===m[1])l.push(m[2]);else if("["===m[3].charAt(0)){var d=m[6];d&&(d=d.replace(/\\(["'])/g,"$1"));"class"===m[4]?l.push(d):g.attrs[m[4]]=d||!0}var ba="class"in
b?"class":"className",c;for(c in b)C.call(b,c)&&(c===ba&&null!=b[c]&&""!==b[c]?(l.push(b[c]),e[c]=""):e[c]=b[c]);l.length&&(e[ba]=l.join(" "));return g}function w(a,f){for(var g=0;g<a.length&&!f(a[g],g++););}function aa(a,f){w(a,function(a,b){return(a=a&&a.attrs)&&null!=a.key&&f(a,b)})}function Ga(a){for(var f=0;f<a.length;f++)I(a[f])&&(a=a.concat.apply([],a),f--);return a}function M(a,f,g){a.insertBefore(f,a.childNodes[g]||null)}function R(a,f,g,b){aa(a,function(a,b){f[a=a.key]=f[a]?{action:3,index:b,
from:f[a].index,element:g.nodes[f[a].index]||x.createElement("div")}:{action:2,index:b}});var e=[],l;for(l in f)C.call(f,l)&&e.push(f[l]);var e=e.sort(Ha),d=Array(g.length);d.nodes=g.nodes.slice();w(e,function(f){var e=f.index;1===f.action&&(J(g[e].nodes,g[e]),d.splice(e,1));if(2===f.action){var l=x.createElement("div");l.key=a[e].attrs.key;M(b,l,e);d.splice(e,0,{attrs:{key:a[e].attrs.key},nodes:[l]});d.nodes[e]=l}if(3===f.action){var l=f.element,c=b.childNodes[e];c!==l&&null!==l&&b.insertBefore(l,
c||null);d[e]=g[f.from];d.nodes[e]=l}});return d}function S(a,f,g,b){var e=a.length!==f.length;e||aa(a,function(a,g){var b=f[g];return e=b&&b.attrs&&b.attrs.key!==a.key});return e?R(a,g,f,b):f}function Ia(a,f,g){w(a,function(a,b){null!=f[b]&&g.push.apply(g,f[b].nodes)});w(f.nodes,function(a,b){null!=a.parentNode&&0>g.indexOf(a)&&J([a],[f[b]])});a.length<f.length&&(f.length=a.length);f.nodes=g}function Ja(a){var f=0;aa(a,function(){w(a,function(a){(a=a&&a.attrs)&&null==a.key&&(a.key="__mithril__"+
f++)});return 1})}function Ka(a,f,g){return a.tag!==f.tag||g.sort().join()!==Object.keys(f.attrs).sort().join()||a.attrs.id!==f.attrs.id||a.attrs.key!==f.attrs.key?!0:"all"===d.redraw.strategy()?!f.configContext||!0!==f.configContext.retain:"diff"===d.redraw.strategy()?f.configContext&&!1===f.configContext.retain:!1}function La(a,f,g){if(Ka(a,f,g)){f.nodes.length&&J(f.nodes);if(f.configContext&&k(f.configContext.onunload))f.configContext.onunload();f.controllers&&w(f.controllers,function(a){if(a.onunload)a.onunload({preventDefault:H})})}}
function Ma(a,f,g){g.length&&(a.views=f,a.controllers=g,w(g,function(a){a.onunload&&a.onunload.$old&&(a.onunload=a.onunload.$old);if(K&&a.onunload){var f=a.onunload;a.onunload=function(){};a.onunload.$old=f}}))}function Na(a,f,g,b,e){if(k(f.attrs.config)){var l=e.configContext=e.configContext||{};a.push(function(){return f.attrs.config.call(f,g,!b,l,e)})}}function Oa(a){return a.$trusted?a.nodes.length:I(a)?a.length:1}function Pa(a,f,g,b,e,l,d,c,k){a=Ga(a);var z=[],t=f.length===a.length,q=0,r={},
y=!1;aa(f,function(a,g){y=!0;r[f[g].attrs.key]={action:1,index:g}});Ja(a);y&&(f=S(a,f,r,g));for(var u=0,v=0,w=a.length;v<w;v++){var x=ca(g,e,f,b,a[v],f[u],l,b+q||q,d,c,k);x!==h&&(t=t&&x.nodes.intact,q+=Oa(x),f[u++]=x)}t||Ia(a,f,z);return f}function Qa(a,f,g,b){null!=b.onunload&&0>G.map(function(a){return a.handler}).indexOf(b.onunload)&&G.push({controller:b,handler:b.onunload});a.push(g);f.push(b)}function ca(a,f,g,b,e,l,c,m,B,z,t){a:{try{if("boolean"!==typeof e&&null!=e&&null!=e.toString())break a}catch(w){}e=
""}if("retain"===e.subtree)return l;a:{var E=e;if(null!=l){if(N.call(l)===N.call(E))break a;g&&g.nodes?(b=m-b,l=b+(I(E)?E:l.nodes).length,J(g.nodes.slice(b,l),g.slice(b,l))):l.nodes&&J(l.nodes,l)}l=new E.constructor;l.tag&&(l={});l.nodes=[]}if(I(e))return Pa(e,l,a,m,f,c,B,z,t);if(null!=e&&q(e)){E=l;f=z;z=[];g=[];var r=e;for(b=(e=E)&&e.controllers;null!=r.view;){l=r;var r=r.view.$original||r.view,y=b,A=g,C=z,D;D=e.views;var F=r,L=y,H=l.controller,G=void 0,G="diff"===d.redraw.strategy()&&D?D.indexOf(F):
-1;D=-1<G?L[G]:k(H)?new H:{};F=l&&l.attrs&&l.attrs.key;l=0===K||ja||y&&-1<y.indexOf(D)?l.view(D):{tag:"placeholder"};"retain"!==l.subtree&&(l.attrs=l.attrs||{},l.attrs.key=F,Qa(C,A,r,D));r=l}e=r;if("retain"===e.subtree)a=E;else{if(!e.tag&&g.length)throw Error("Component template must return a virtual element, not an array, string, etc.");e.attrs=e.attrs||{};E.attrs=E.attrs||{};b=Object.keys(e.attrs);l=b.length>("key"in e.attrs?1:0);La(e,E,b);u(e.tag)?(b=0===E.nodes.length,f=e.attrs.xmlns?e.attrs.xmlns:
"svg"===e.tag?"http://www.w3.org/2000/svg":"math"===e.tag?"http://www.w3.org/1998/Math/MathML":f,b?(r=e,y=f,r=r.attrs.is?null==y?x.createElement(r.tag,r.attrs.is):x.createElementNS(y,r.tag,r.attrs.is):null==y?x.createElement(r.tag):x.createElementNS(y,r.tag),y=e,l=l?ka(r,y.tag,y.attrs,{},f):y.attrs,M(a,r,m),y=e,B=null!=y.children&&0<y.children.length?ca(r,y.tag,h,h,y.children,E.children,!0,0,y.attrs.contenteditable?r:B,f,t):y.children,B={tag:e.tag,attrs:l,children:B,nodes:[r]},Ma(B,z,g),B.children&&
!B.children.nodes&&(B.children.nodes=[]),E=B):(r=E,y=e,A=f,C=r.nodes[0],l&&ka(C,y.tag,y.attrs,r.attrs,A),r.children=ca(C,y.tag,h,h,y.children,r.children,!1,0,y.attrs.contenteditable?C:B,A,t),r.nodes.intact=!0,g.length&&(r.views=z,r.controllers=g),r=C),"select"===e.tag&&"value"in e.attrs&&ka(r,e.tag,{value:e.attrs.value},{},f),b||!0!==c||null==r||M(a,r,m),Na(t,e,r,b,E),a=E):a=void 0}return a}if(k(e))return l;z=l;t=e;if(z.nodes.length)if(z.valueOf()!==t.valueOf()||c){c=z.nodes;if(!B||B!==x.activeElement||
t!==z)if(t.$trusted)J(c,z),c=va(a,m,t);else if("textarea"===f)a.value=t;else if(B)B.innerHTML=t,c=[].slice.call(B.childNodes);else{if(1===c[0].nodeType||1<c.length||c[0].nodeValue.trim&&!c[0].nodeValue.trim())J(z.nodes,z),c=[x.createTextNode(t)];B=c[0];try{M(a,B,m),B.nodeValue=t}catch(w){}}z=new t.constructor(t);z.nodes=c;z.$trusted=t.$trusted;a=z}else a=(z.nodes.intact=!0,z);else t.$trusted?c=va(a,m,t):(c=[x.createTextNode(t)],a.nodeName in Ra||M(a,c[0],m)),a="string"===typeof t||"number"===typeof t||
"boolean"===typeof t?new t.constructor(t):t,a.nodes=c;return a}function Ha(a,f){return a.action-f.action||a.index-f.index}function ka(a,f,g,b,e){for(var c in g)if(C.call(g,c)){var d=a,m=c,h=g[c],z=b[c],t=f,n=e;if(m in b&&z===h&&"object"!==typeof h&&x.activeElement!==d)"value"===m&&"input"===t&&d.value!=h&&(d.value=h);else{b[m]=h;try{if("config"!==m&&"key"!==m)if(k(h)&&"on"===m.slice(0,2))d[m]=Sa(h,d);else if("style"===m&&null!=h&&q(h)){n=d;d=h;t=z;t===d&&(n.style="",t={});m=void 0;for(m in d)!C.call(d,
m)||null!=t&&t[m]===d[m]||(n.style[m]=d[m]);for(m in t)C.call(t,m)&&(C.call(d,m)||(n.style[m]=""))}else if(null!=n)"href"===m?d.setAttributeNS("http://www.w3.org/1999/xlink","href",h):d.setAttribute("className"===m?"class":m,h);else if(m in d&&!Ta[m])try{if("input"!==t&&!d.isContentEditable||d[m]!=h)d[m]=h}catch(r){d.setAttribute(m,h)}else try{d.setAttribute(m,h)}catch(r){}}catch(r){if(0>r.message.indexOf("Invalid argument"))throw r;}}}return b}function J(a,f){for(var b=a.length-1;-1<b;b--)if(a[b]&&
a[b].parentNode){try{a[b].parentNode.removeChild(a[b])}catch(d){}f=[].concat(f);f[b]&&la(f[b])}a.length&&(a.length=0)}function la(a){a.configContext&&k(a.configContext.onunload)&&(a.configContext.onunload(),a.configContext.onunload=null);a.controllers&&w(a.controllers,function(a){if(k(a.onunload))a.onunload({preventDefault:H})});a.children&&(I(a.children)?w(a.children,la):a.children.tag&&la(a.children))}function wa(a){if("SCRIPT"===a.tagName)a.parentNode.replaceChild(Ua(a),a);else{var f=a.childNodes;
if(f&&f.length)for(var b=0;b<f.length;b++)wa(f[b])}return a}function Ua(a){for(var f=document.createElement("script"),b=a.attributes,d=0;d<b.length;d++)f.setAttribute(b[d].name,b[d].value);f.text=a.innerHTML;return f}function va(a,f,b){var d=a.childNodes[f];if(d){var c=1!==d.nodeType,l=x.createElement("span");c?(a.insertBefore(l,d||null),l.insertAdjacentHTML("beforebegin",b),a.removeChild(l)):d.insertAdjacentHTML("beforebegin",b)}else try{a.appendChild(x.createRange().createContextualFragment(b))}catch(h){a.insertAdjacentHTML("beforeend",
b),wa(a)}for(b=[];a.childNodes[f]!==d;)b.push(a.childNodes[f]),f++;return b}function Sa(a,f){return function(b){b=b||event;d.redraw.strategy("diff");d.startComputation();try{return a.call(f,b)}finally{xa()}}}function ma(a){var b=na.indexOf(a);return 0>b?na.push(a)-1:b}function Va(a){function b(){arguments.length&&(a=arguments[0]);return a}b.toJSON=function(){return a&&k(a.toJSON)?a.toJSON():a};return b}function ua(a,b){function g(){return(a.controller||H).apply(this,b)||this}function d(g){for(var c=
[g].concat(b),e=1;e<arguments.length;e++)c.push(arguments[e]);return a.view.apply(a,c)}a.controller&&(g.prototype=a.controller.prototype);d.$original=a.view;var c={controller:g,view:d};b[0]&&null!=b[0].key&&(c.attrs={key:b[0].key});return c}function Wa(a,b,g,c){if(c)null==a&&ya(b,g),T&&(A=T);else{d.redraw.strategy("all");d.startComputation();U[g]=b;c=a?oa=a:oa=a={controller:H};var e=new (a.controller||H);c===oa&&(D[g]=e,pa[g]=a);xa();null===a&&ya(b,g);return D[g]}}function ya(a,b){U.splice(b,1);D.splice(b,
1);pa.splice(b,1);za(a);na.splice(ma(a),1);G=[]}function Aa(){O&&(O(),O=null);w(U,function(a,b){var g=pa[b];if(D[b]){var c=[D[b]];d.render(a,g.view?g.view(D[b],c):"")}});V&&(V(),V=null);L=null;Ba=new Date;d.redraw.strategy("diff")}function xa(){"none"===d.redraw.strategy()?(K--,d.redraw.strategy("diff")):d.endComputation()}function Xa(a,b,g){P={};var c=g.indexOf("?");-1!==c&&(P=da(g.substr(c+1,g.length)),g=g.substr(0,c));var c=Object.keys(b),e=c.indexOf(g);if(-1!==e)return d.mount(a,b[c[e]]),!0;for(var l in b)if(C.call(b,
l)){if(l===g)return d.mount(a,b[l]),!0;c=new RegExp("^"+l.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(c.test(g))return g.replace(c,function(){var g=l.match(/:[^\/]+/g)||[],c=[].slice.call(arguments,1,-2);w(g,function(a,b){P[a.replace(/:|\./g,"")]=decodeURIComponent(c[b])});d.mount(a,b[l])}),!0}}function ea(a){a=a||event;if(!(a.ctrlKey||a.metaKey||a.shiftKey||2===a.which)){a.preventDefault?a.preventDefault():a.returnValue=!1;a=a.currentTarget||a.srcElement;var b;for(b=
"pathname"===d.route.mode&&a.search?da(a.search.slice(1)):{};a&&!/a/i.test(a.nodeName);)a=a.parentNode;K=0;d.route(a[d.route.mode].slice(Q[d.route.mode].length),b)}}function Ca(){"hash"!==d.route.mode&&F.hash?F.hash=F.hash:c.scrollTo(0,0)}function W(a,b){var g={},c=[],d;for(d in a)if(C.call(a,d)){var l=b?b+"["+d+"]":d,k=a[d];if(null===k)c.push(encodeURIComponent(l));else if(q(k))c.push(W(k,l));else if(I(k)){var m=[];g[l]=g[l]||{};w(k,function(a){g[l][a]||(g[l][a]=!0,m.push(encodeURIComponent(l)+"="+
encodeURIComponent(a)))});c.push(m.join("&"))}else k!==h&&c.push(encodeURIComponent(l)+"="+encodeURIComponent(k))}return c.join("&")}function da(a){if(""===a||null==a)return{};"?"===a.charAt(0)&&(a=a.slice(1));a=a.split("&");var b={};w(a,function(a){var c=a.split("=");a=decodeURIComponent(c[0]);c=2===c.length?decodeURIComponent(c[1]):null;null!=b[a]?(I(b[a])||(b[a]=[b[a]]),b[a].push(c)):b[a]=c});return b}function za(a){var b=ma(a);J(a.childNodes,X[b]);X[b]=h}function fa(a,b){var c=d.prop(b);a.then(c);
c.then=function(c,d){return fa(a.then(c,d),b)};c["catch"]=c.then.bind(null,null);return c}function qa(a,b){function c(a){n=a||Da;u.map(function(a){n===ga?a.resolve(m):a.reject(m)})}function h(a,b,c,f){if((null!=m&&q(m)||k(m))&&k(a))try{var g=0;a.call(m,function(a){g++||(m=a,b())},function(a){g++||(m=a,c())})}catch(e){d.deferred.onerror(e),m=e,c()}else f()}function e(){var q;try{q=m&&m.then}catch(t){return d.deferred.onerror(t),m=t,n=Y,e()}if(n===Y)d.deferred.onerror(m);h(q,function(){n=Z;e()},function(){n=
Y;e()},function(){try{n===Z&&k(a)?m=a(m):n===Y&&k(b)&&(m=b(m),n=Z)}catch(e){return d.deferred.onerror(e),m=e,c()}m===l?(m=TypeError(),c()):h(q,function(){c(ga)},c,function(){c(n===Z&&ga)})})}var l=this,n=0,m=0,u=[];l.promise={};l.resolve=function(a){n||(m=a,n=Z,e());return l};l.reject=function(a){n||(m=a,n=Y,e());return l};l.promise.then=function(a,b){var c=new qa(a,b);n===ga?c.resolve(m):n===Da?c.reject(m):u.push(c);return c.promise}}function Ya(a){return a}function Za(a){var b=a.callbackName||"mithril_callback_"+
(new Date).getTime()+"_"+Math.round(1E16*Math.random()).toString(36),d=x.createElement("script");c[b]=function(k){d.parentNode.removeChild(d);a.onload({type:"load",target:{responseText:k}});c[b]=h};d.onerror=function(){d.parentNode.removeChild(d);a.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}});c[b]=h;return!1};d.onload=function(){return!1};d.src=a.url+(0<a.url.indexOf("?")?"&":"?")+(a.callbackKey?a.callbackKey:"callback")+"="+b+"&"+W(a.data||
{});x.body.appendChild(d)}function $a(a){var b=new c.XMLHttpRequest;b.open(a.method,a.url,!0,a.user,a.password);b.onreadystatechange=function(){if(4===b.readyState)if(200<=b.status&&300>b.status)a.onload({type:"load",target:b});else a.onerror({type:"error",target:b})};a.serialize===JSON.stringify&&a.data&&"GET"!==a.method&&b.setRequestHeader("Content-Type","application/json; charset=utf-8");a.deserialize===JSON.parse&&b.setRequestHeader("Accept","application/json, text/*");if(q(a.headers))for(var d in a.headers)C.call(a.headers,
d)&&b.setRequestHeader(d,a.headers[d]);k(a.config)&&(d=a.config(b,a),null!=d&&(b=d));if((d="GET"!==a.method&&a.data?a.data:"")&&!u(d)&&d.constructor!==c.FormData)throw Error("Request data should be either be a string or FormData. Check the `serialize` option in `m.request`");b.send(d);return b}function ab(a){return a.dataType&&"jsonp"===a.dataType.toLowerCase()?Za(a):$a(a)}function bb(a,b,c){"GET"===a.method&&"jsonp"!==a.dataType?(c=0>a.url.indexOf("?")?"?":"&",b=W(b),a.url+=b?c+b:""):a.data=c(b)}
function cb(a,b){b&&(a=a.replace(/:[a-z]\w+/gi,function(a){var c=a.slice(1);a=b[c]||a;delete b[c];return a}));return a}d.version=function(){return"v0.2.8"};var C={}.hasOwnProperty,N={}.toString,I=Array.isArray||function(a){return"[object Array]"===N.call(a)},Ra={AREA:1,BASE:1,BR:1,COL:1,COMMAND:1,EMBED:1,HR:1,IMG:1,INPUT:1,KEYGEN:1,LINK:1,META:1,PARAM:1,SOURCE:1,TRACK:1,WBR:1},x,F,ha,Ea;d.deps=function(a){a=c=a||window;x=a.document;F=a.location;Ea=a.cancelAnimationFrame||a.clearTimeout;ha=a.requestAnimationFrame||
a.setTimeout;return c};d.deps.factory=d.factory=b;d.deps(c);var K=0;d.startComputation=function(){K++};d.endComputation=function(){1<K?K--:(K=0,d.redraw())};var G=[],ja=!1,Ta={list:1,style:1,form:1,type:1,width:1,height:1},Fa,db={appendChild:function(a){Fa===h&&(Fa=x.createElement("html"));x.documentElement&&x.documentElement!==a?x.replaceChild(a,x.documentElement):x.appendChild(a);this.childNodes=x.childNodes},insertBefore:function(a){this.appendChild(a)},childNodes:[]},na=[],X={};d.render=function(a,
b,c){if(!a)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var d=[],e=ma(a),l=a===x,k;k=l||a===x.documentElement?db:a;l&&"html"!==b.tag&&(b={tag:"html",attrs:{},children:b});X[e]===h&&J(k.childNodes);!0===c&&za(a);X[e]=ca(k,null,h,h,b,X[e],!1,0,null,h,d);w(d,function(a){a()})};d.trust=function(a){a=new String(a);a.$trusted=!0;return a};d.prop=function(a){return(null!=a&&(q(a)||k(a))||"undefined"!==typeof Promise&&a instanceof Promise)&&k(a.then)?fa(a):
Va(a)};var U=[],pa=[],D=[],L=null,Ba=0,O=null,V=null,oa;d.component=function(a){for(var b=Array(arguments.length-1),c=1;c<arguments.length;c++)b[c-1]=arguments[c];return ua(a,b)};var A,T;d.mount=d.module=function(a,b){if(!a)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var c=U.indexOf(a);0>c&&(c=U.length);var d=!1,e={preventDefault:function(){d=!0;O=V=null}};w(G,function(a){a.handler.call(a.controller,e);a.controller.onunload=null});d?w(G,function(a){a.controller.onunload=
a.handler}):G=[];if(D[c]&&k(D[c].onunload))D[c].onunload(e);return Wa(b,a,c,d)};var ra=!1;d.redraw=function(a){if(!ra){ra=!0;a&&(ja=!0);try{if(L&&!a){if(ha===c.requestAnimationFrame||16<new Date-Ba)0<L&&Ea(L),L=ha(Aa,16)}else Aa(),L=ha(function(){L=null},16)}finally{ra=ja=!1}}};d.redraw.strategy=d.prop();d.withAttr=function(a,b,c){return function(d){d=d||window.event;var e=d.currentTarget||this;d=c||this;e=a in e?e[a]:e.getAttribute(a);b.call(d,e)}};var Q={pathname:"",hash:"#",search:"?"},sa=H,ta=
!1,P;d.route=function(a,b,g,h){if(0===arguments.length)return A;if(3===arguments.length&&u(b)){sa=function(c){c=A=c.slice(Q[d.route.mode].length);if(!Xa(a,g,c)){if(ta)throw Error("Ensure the default route matches one of the routes defined in m.route");ta=!0;d.route(b,!0);ta=!1}};var e="hash"===d.route.mode?"onhashchange":"onpopstate";c[e]=function(){var a=F[d.route.mode];"pathname"===d.route.mode&&(a+=F.search);A!==a.slice(Q[d.route.mode].length)&&sa(a)};O=Ca;c[e]()}else if(a.addEventListener||a.attachEvent)a.href=
("pathname"!==d.route.mode?F.pathname:"")+Q[d.route.mode]+h.attrs.href,a.addEventListener?(a.removeEventListener("click",ea),a.addEventListener("click",ea)):(a.detachEvent("onclick",ea),a.attachEvent("onclick",ea));else if(u(a)){T=A;A=a;var l=b||{},e=A.indexOf("?"),k;k=-1<e?da(A.slice(e+1)):{};for(var m in l)C.call(l,m)&&(k[m]=l[m]);l=W(k);e=-1<e?A.slice(0,e):A;l&&(A=e+(-1===e.indexOf("?")?"?":"&")+l);e=!0===(3===arguments.length?g:b)||T===A;if(c.history.pushState){var n=e?"replaceState":"pushState";
O=Ca;V=function(){try{c.history[n](null,x.title,Q[d.route.mode]+A)}catch(a){F[d.route.mode]=A}}}else F[d.route.mode]=A;sa(Q[d.route.mode]+A);T=null}};d.route.param=function(a){if(!P)throw Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");return a?P[a]:P};d.route.mode="search";d.route.buildQueryString=W;d.route.parseQueryString=da;d.deferred=function(){var a=new qa;a.promise=fa(a.promise);return a};var Z=1,Y=2,ga=3,Da=4;d.deferred.onerror=function(a){if("[object Error]"===
N.call(a)&&!/ Error/.test(a.constructor.toString()))throw K=0,a;};d.sync=function(a){function b(a,d){return function(b){e[a]=b;d||(l="reject");0===--h&&(c.promise(e),c[l](e));return b}}var c=d.deferred(),h=a.length,e=[],l="resolve";0<a.length?w(a,function(a,c){a.then(b(c,!0),b(c,!1))}):c.resolve([]);return c.promise};d.request=function(a){!0!==a.background&&d.startComputation();var b=new qa,c,h,e;a.dataType&&"jsonp"===a.dataType.toLowerCase()?(c=a.serialize=h=a.deserialize=Ya,e=function(a){return a.responseText}):
(c=a.serialize=a.serialize||JSON.stringify,h=a.deserialize=a.deserialize||JSON.parse,e=a.extract||function(a){return a.responseText.length||h!==JSON.parse?a.responseText:null});a.method=(a.method||"GET").toUpperCase();a.url=cb(a.url,a.data);bb(a,a.data,c);a.onload=a.onerror=function(c){try{c=c||event;var g=h(e(c.target,a));"load"===c.type?(a.unwrapSuccess&&(g=a.unwrapSuccess(g,c.target)),I(g)&&a.type?w(g,function(b,c){g[c]=new a.type(b)}):a.type&&(g=new a.type(g)),b.resolve(g)):(a.unwrapError&&(g=
a.unwrapError(g,c.target)),b.reject(g))}catch(k){b.reject(k),d.deferred.onerror(k)}finally{!0!==a.background&&d.endComputation()}};ab(a);b.promise=fa(b.promise,a.initialValue);return b.promise};return d})},{}]},{},[1]);
</script>
    {% else %}
      <script>(function e$$0(h,p,q){function b(m,ia){if(!p[m]){if(!h[m]){var v="function"==typeof require&&require;if(!ia&&v)return v(m,!0);if(c)return c(m,!0);v=Error("Cannot find module '"+m+"'");throw v.code="MODULE_NOT_FOUND",v;}v=p[m]={exports:{}};h[m][0].call(v.exports,function(c){var f=h[m][1][c];return b(f?f:c)},v,v.exports,e$$0,h,p,q)}return p[m].exports}for(var c="function"==typeof require&&require,m=0;m<q.length;m++)b(q[m]);return b})({1:[function(g,h,p){g=g("./src/app");if(h=document.getElementsByTagName("style")[0])if(p=
g.getLsOrKickOut(window)){var q={};q["{{cache_key}}"]=h.innerHTML;p.setItem("orkjern_theme_cache",JSON.stringify(q));document.cookie="ORKJERN_THEME_CACHE={{ cache_key }}"}g.init(window)},{"./src/app":2}],2:[function(g,h,p){var q=g("mithril"),b=g("./booter"),c=g("./disqus"),m=g("./gist"),w=g("./controllers/node"),ia=g("./controllers/index"),v=g("./controllers/taxonomy");h.exports={appendCss:function(b,f){var c=f.document,m=c.getElementsByTagName("head")[0],w=c.createElement("style");w.type="text/css";
w.styleSheet?w.styleSheet.cssText=b:w.appendChild(c.createTextNode(b));return m.appendChild(w)},getLsOrKickOut:function(b){var f=b.localStorage;if(!f){if(b.navigator&&b.navigator.userAgent&&b.navigator.userAgent.match(/Twitter/))return!1;b.alert("Your browser is bad, and you should feel bad. You are not welcome here. You will be redirected to a place where you can upgrade your browser.");b.location.href="http://browsehappy.com/";return!1}return f},init:function(g){var f={window:g,m:q};g.test&&q.deps(g);
var x=g.document;q.route.mode="pathname";f.controllers={index:new ia(f),node:w,taxonomy:new v(f)};f.booter=new b(f);f.booter.attach();c(f.window);m(f.window);g.disqus_shortname="{{ disqus_shortname }}";if(!g.disqus_shortname||!g.disqus_shortname.length)return f;g.DISQUSWIDGETS=void 0;if(x.querySelectorAll&&0===x.querySelectorAll("a[data-disqus-identifier]").length)for(var h=x.querySelectorAll(".views-field-view-node a"),p=0,N=h.length;p<N;p++){var S=x.createElement("div");S.className="comment-count";
var T=x.createElement("a");T.href=h[p].pathname;T.setAttribute("data-disqus-identifier",h[p].pathname);S.appendChild(T);h[p].parentNode.parentNode.parentNode.insertBefore(S,h[p].parentNode.parentNode.nextSibling)}h=x.createElement("script");h.async=!0;h.type="text/javascript";h.src="//"+g.disqus_shortname+".disqus.com/count.js";(x.getElementsByTagName("HEAD")[0]||x.getElementsByTagName("BODY")[0]).appendChild(h);return f}}},{"./booter":3,"./controllers/index":4,"./controllers/node":5,"./controllers/taxonomy":6,
"./disqus":7,"./gist":8,mithril:12}],3:[function(g,h,p){function q(b){this.app=b;this.window=b.window;var c=b.controllers.index,m=b.controllers.node;b=b.controllers.taxonomy;this.booted=!1;this.routeConf={};this.routeConf["/"]=c;this.routeConf["/node"]=c;this.routeConf["/:alias"]=m;this.routeConf["/node/:nid"]=m;this.routeConf["/taxonomy/term/:tid"]=b;var w=this.app.m;this.m=w;var c=this.window.document,q=this;this.startFunction=function(){var b=this.getAttribute("href");q.navigate(b);return!1};if(c=
c.querySelector(".site-name a"))c.onclick=function(){"/"!==w.route()&&q.navigate("/");return!1}}h.exports=q;q.prototype.attach=function(b){var c=this.window.document;if(c&&c.querySelectorAll){b=c.querySelectorAll(b||"#main-wrapper a");for(var c=0,m=b.length;c<m;c++){var w=!1;0===b[c].href.indexOf(window.location.protocol+"//"+window.location.hostname)&&(w=!0);0===b[c].href.indexOf("/")&&(w=!0);w&&(b[c].onclick=this.startFunction)}}};q.prototype.navigate=function(b){var c=this.window;!this.booted&&
c&&c.document&&(this.m.route(c.document.getElementById("main-wrapper"),b,this.routeConf),this.booted=!0);this.m.route(b)};q.prototype.navigateEl=function(b,c){var m=b.getAttribute("href");c.navigate(m);return!1}},{}],4:[function(g,h,p){p=g("../views/index");var q=g("../http"),b={},c=function(b){var c=b.m;return function(){var g=b.window,h=this;this.nodes=c.prop([]);q("api/node").then(function(c){h.nodes=c;setTimeout(function(){b.booter.attach(".field-type-taxonomy-term-reference a")},2);var f=b.window.document;
g.DISQUSWIDGETS=void 0;g.disqus_shortname&&function(){var b=f.createElement("script");b.async=!0;b.type="text/javascript";b.src="//"+g.disqus_shortname+".disqus.com/count.js";(f.getElementsByTagName("HEAD")[0]||f.getElementsByTagName("BODY")[0]).appendChild(b)}()});this.navigate=function(c){b.booter.navigateEl(c,b.booter)}}};b.view=p;h.exports=function(m){b.app=m;b.controller=new c(m);return b}},{"../http":9,"../views/index":10}],5:[function(g,h,p){var q=g("mithril");p=g("../views/node");var b=g("../http"),
c=g("../gist"),m=g("../disqus");g={controller:function(){var w=this;this.title=q.prop("");this.body=q.prop("Loading...");this.raw=q.prop({});this.tags=q.prop([]);this.image=q.prop("about:blank");w.submitted=q.prop("");var g;this.imageClass=q.prop("noplay");this.toggleImageClass=function(){q.startComputation();w.imageClass("play");g&&w.image(g);q.endComputation()};var h=q.route.param("alias"),p=q.route.param("nid");if(!h){if(!p){q.route("/");return}h="node/"+p}b(h).then(function(f){if(f){var b=new Date(1E3*
f.created[0].value);w.title(f.title[0].value);w.body(f.body[0].value);w.submitted("Submitted "+b.toLocaleDateString());var b=[],q;for(q in f._links)if(!(1>q.indexOf("image")&&1>q.indexOf("tags"))&&f._links.hasOwnProperty(q)&&(0<q.indexOf("image")&&(g=f._links[q][0].href),0<q.indexOf("tags")))for(var h=0,p=f._links[q].length;h<p;h++){var v=f._links[q][h].href,v=v.substring(v.lastIndexOf("/")+1,v.lastIndexOf("?"));orkjernTags[v]&&b.push({tid:v,title:orkjernTags[v]})}b.length&&w.tags(b);w.raw=f;setTimeout(function(){c(window)},
200);window.disqus_shortname="{{ disqus_shortname }}";setTimeout(function(){m(window)},200)}},function(f){404===f&&(w.title("404 not found!"),w.body("The page you are looking for is nowhere to be found. Real sorry about that!"),w.imageClass("hide"));403===f&&(w.title("403 Forbidden!"),w.body("You are not allowed to access this page. I am guessing you already knew that!"))})}};g.view=p;h.exports=g},{"../disqus":7,"../gist":8,"../http":9,"../views/node":11,mithril:12}],6:[function(g,h,p){p=g("../views/index");
var q=g("../http"),b={},c=function(b){var c=b.m;return function(){var g=this;this.nodes=c.prop([]);var h=c.route.param("tid");q("api/taxonomy/term/"+h).then(function(c){c.map(function(b){b.body=""});g.nodes=c;window.disqus_shortname="{{ disqus_shortname }}";setTimeout(function(){b.booter.attach(".field-type-taxonomy-term-reference a")},2);window.disqus_shortname&&window.disqus_shortname.length&&(window.DISQUSWIDGETS=void 0,function(){var b=document.createElement("script");b.async=!0;b.type="text/javascript";
b.src="//"+window.disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(b)}())});this.navigate=function(c){b.booter.navigateEl(c,b.booter)}}};b.view=p;h.exports=function(m){b.controller=new c(m);return b}},{"../http":9,"../views/index":10}],7:[function(g,h,p){var q=g("mithril");h.exports=function(b){var c=b.document;"undefined"===typeof q&&(q=b.m);var m=function(){if(b.disqus_shortname)if(b.disqus_identifier=q.route(),
b.disqus_identifier||(b.disqus_identifier=b.location.pathname),b.disqus_loaded)b.DISQUS.reset({reload:!0,config:function(){this.page.identifier=b.disqus_identifier;this.page.url=b.location.origin+b.disqus_identifier}});else{b.disqus_loaded=!0;var m=c.createElement("script");m.type="text/javascript";m.async=!0;m.src="//"+b.disqus_shortname+".disqus.com/embed.js?url="+b.disqus_identifier;(c.getElementsByTagName("head")[0]||c.getElementsByTagName("body")[0]).appendChild(m)}},g=c.getElementById("disqus_thread"),
h=!1;b.onscroll=function(){g||(g=c.getElementById("disqus_thread"));!h&&b.scrollY&&g&&g.offsetTop&&b.innerHeight&&b.scrollY+b.innerHeight+50>g.offsetTop&&(h=!0,m())}}},{mithril:12}],8:[function(g,h,p){h.exports=function(g){for(var b=g.document,c=function(c,f){var m="gist_callback"+Math.floor(1E3*Math.random()),h=b.createElement("script");h.setAttribute("src","https://gist.github.com/"+f+".json?callback="+m);g[m]=function(b){delete g[m];var f='<link href="'+b.stylesheet+'" rel="stylesheet">',f=f+b.div;
c.innerHTML=f;h.parentNode.removeChild(h);c.className+="processed"};b.body.appendChild(h)},m=b.getElementsByTagName("gist"),h=0,p=m.length;h<p;h++){var v=m[h];v.className&&-1<v.className.indexOf("processed")||c(v,v.innerHTML)}}},{}],9:[function(g,h,p){h.exports=function(b){return q.request({method:"GET",url:"/"+b+"?_format=hal_json",config:function(b){b.setRequestHeader("Accept","application/hal+json")},extract:function(b){return 200===b.status?b.responseText:JSON.stringify(b.status)},deserialize:function(b){var m;
try{m=JSON.parse(b)}catch(g){m=""}return m}})};var q=g("mithril")},{mithril:12}],10:[function(g,h,p){var q=g("mithril");h.exports=function(b){var c=function(c){return{tag:"article",attrs:{class:"node node--view-mode-teaser clearfix",about:"/aa-cc",typeof:"schema:Article"},children:[{tag:"h2",attrs:{class:"node__title "},children:[{tag:"a",attrs:{href:c.path,onclick:function(){b.navigate(this);return!1}},children:[c.title]}]},{tag:"div",attrs:{class:"node__meta"},children:["Post date: ",c.created]},
{tag:"div",attrs:{class:"read-more"},children:[{tag:"a",attrs:{href:c.path,onclick:function(){b.navigate(this);return!1}},children:["Read more"]}]},{tag:"div",attrs:{class:"comment-count"},children:[{tag:"a",attrs:{"data-disqus-identifier":c.path,href:c.path,onclick:function(){b.navigate(this);return!1}}}]},q.trust(c.field_tags)]}};return{tag:"main",attrs:{id:"content",class:"column",role:"main"},children:[{tag:"section",attrs:{class:"section"},children:[{tag:"div",attrs:{class:"content"},children:[{tag:"div",
attrs:{},children:[b.nodes.map?b.nodes.map(c):""]}]}]}]}}},{mithril:12}],11:[function(g,h,p){var q=g("mithril");h.exports=function(b){var c=b.tags().map(function(b){return{tag:"li",attrs:{},children:[{tag:"a",attrs:{href:"/taxonomy/term/"+b.tid,hreflang:"en"},children:[b.title," "]}," "]}});return{tag:"main",attrs:{id:"content",class:"column",role:"main"},children:[{tag:"section",attrs:{class:"section"},children:[{tag:"div",attrs:{class:"content"},children:[{tag:"article",attrs:{class:"node node--view-mode-full clearfix",
about:"/aa-cc",typeof:"schema:Article"},children:[{tag:"h1",attrs:{class:"title",id:"page-title"},children:[b.title()]},{tag:"div",attrs:{class:"node__meta"},children:[b.submitted()]},{tag:"div",attrs:{class:"node__content clearfix "},children:[{tag:"p",attrs:{},children:[q.trust(b.body())]}]},{tag:"div",attrs:{class:b.imageClass()+" image",onclick:b.toggleImageClass},children:[{tag:"img",attrs:{src:b.image()}},{tag:"h2",attrs:{},children:["Play"]}]},{tag:"div",attrs:{class:"clearfix field-type-taxonomy-term-reference"},
children:[{tag:"ul",attrs:{class:"links field-items"},children:[c]}]}]},{tag:"div",attrs:{class:"twitter"},children:["This blog is written by me, ",{tag:"a",attrs:{href:"https://twitter.com/orkj"},children:["eiriksm. Feel free to say hi on twitter."]}]},{tag:"div",attrs:{id:"disqus_thread"}}]}]}]}}},{mithril:12}],12:[function(g,h,p){(function(g,b){var c=b(g);"undefined"===typeof window&&c.deps({document:"undefined"!==typeof document?document:{},location:"undefined"!==typeof location?location:{},clearTimeout:clearTimeout,
setTimeout:setTimeout});"object"===typeof h&&null!=h&&h.exports?h.exports=c:"function"===typeof define&&define.amd?define(function(){return c}):g.m=c})("undefined"!==typeof window?window:this,function b(c,g){function h(a){return"function"===typeof a}function p(a){return"[object Object]"===O.call(a)}function v(a){return"[object String]"===O.call(a)}function I(){}function f(a,d){for(var e=[],G=1,b=arguments.length;G<b;G++)e[G-1]=arguments[G];if(a&&h(a.view))return ua(a,e);if(!v(a))throw Error("selector in m(selector, attrs, children) should be a string");
G=(b=null!=d&&p(d)&&!("tag"in d||"view"in d||"subtree"in d))?d:{};e=b?e.slice(1):e;e=1===e.length&&J(e[0])?e[0]:e;for(var e={tag:"div",attrs:{},children:e},b=e.attrs,k=[],f=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,l;l=f.exec(a);)if(""===l[1]&&l[2])e.tag=l[2];else if("#"===l[1])e.attrs.id=l[2];else if("."===l[1])k.push(l[2]);else if("["===l[3].charAt(0)){var c=l[6];c&&(c=c.replace(/\\(["'])/g,"$1"));"class"===l[4]?k.push(c):e.attrs[l[4]]=c||!0}var f="class"in G?
"class":"className",g;for(g in G)C.call(G,g)&&(g===f&&null!=G[g]&&""!==G[g]?(k.push(G[g]),b[g]=""):b[g]=G[g]);k.length&&(b[f]=k.join(" "));return e}function x(a,d){for(var e=0;e<a.length&&!d(a[e],e++););}function ba(a,d){x(a,function(a,b){return(a=a&&a.attrs)&&null!=a.key&&d(a,b)})}function Ga(a){for(var d=0;d<a.length;d++)J(a[d])&&(a=a.concat.apply([],a),d--);return a}function N(a,d,e){a.insertBefore(d,a.childNodes[e]||null)}function S(a,d,e,b){ba(a,function(a,b){d[a=a.key]=d[a]?{action:3,index:b,
from:d[a].index,element:e.nodes[d[a].index]||y.createElement("div")}:{action:2,index:b}});var n=[],k;for(k in d)C.call(d,k)&&n.push(d[k]);var n=n.sort(Ha),f=Array(e.length);f.nodes=e.nodes.slice();x(n,function(d){var n=d.index;1===d.action&&(K(e[n].nodes,e[n]),f.splice(n,1));if(2===d.action){var k=y.createElement("div");k.key=a[n].attrs.key;N(b,k,n);f.splice(n,0,{attrs:{key:a[n].attrs.key},nodes:[k]});f.nodes[n]=k}if(3===d.action){var k=d.element,c=b.childNodes[n];c!==k&&null!==k&&b.insertBefore(k,
c||null);f[n]=e[d.from];f.nodes[n]=k}});return f}function T(a,d,e,b){var n=a.length!==d.length;n||ba(a,function(a,e){var b=d[e];return n=b&&b.attrs&&b.attrs.key!==a.key});return n?S(a,e,d,b):d}function Ia(a,d,e){x(a,function(a,b){null!=d[b]&&e.push.apply(e,d[b].nodes)});x(d.nodes,function(a,b){null!=a.parentNode&&0>e.indexOf(a)&&K([a],[d[b]])});a.length<d.length&&(d.length=a.length);d.nodes=e}function Ja(a){var d=0;ba(a,function(){x(a,function(a){(a=a&&a.attrs)&&null==a.key&&(a.key="__mithril__"+
d++)});return 1})}function Ka(a,d,e){return a.tag!==d.tag||e.sort().join()!==Object.keys(d.attrs).sort().join()||a.attrs.id!==d.attrs.id||a.attrs.key!==d.attrs.key?!0:"all"===f.redraw.strategy()?!d.configContext||!0!==d.configContext.retain:"diff"===f.redraw.strategy()?d.configContext&&!1===d.configContext.retain:!1}function La(a,d,e){if(Ka(a,d,e)){d.nodes.length&&K(d.nodes);if(d.configContext&&h(d.configContext.onunload))d.configContext.onunload();d.controllers&&x(d.controllers,function(a){if(a.onunload)a.onunload({preventDefault:I})})}}
function Ma(a,d,e){e.length&&(a.views=d,a.controllers=e,x(e,function(a){a.onunload&&a.onunload.$old&&(a.onunload=a.onunload.$old);if(L&&a.onunload){var d=a.onunload;a.onunload=function(){};a.onunload.$old=d}}))}function Na(a,d,e,b,n){if(h(d.attrs.config)){var k=n.configContext=n.configContext||{};a.push(function(){return d.attrs.config.call(d,e,!b,k,n)})}}function Oa(a){return a.$trusted?a.nodes.length:J(a)?a.length:1}function Pa(a,d,e,b,n,k,f,c,h){a=Ga(a);var A=[],t=d.length===a.length,p=0,r={},
z=!1;ba(d,function(a,e){z=!0;r[d[e].attrs.key]={action:1,index:e}});Ja(a);z&&(d=T(a,d,r,e));for(var v=0,w=0,x=a.length;w<x;w++){var y=ca(e,n,d,b,a[w],d[v],k,b+p||p,f,c,h);y!==g&&(t=t&&y.nodes.intact,p+=Oa(y),d[v++]=y)}t||Ia(a,d,A);return d}function Qa(a,d,e,b){null!=b.onunload&&0>H.map(function(a){return a.handler}).indexOf(b.onunload)&&H.push({controller:b,handler:b.onunload});a.push(e);d.push(b)}function ca(a,d,e,b,n,k,c,l,u,A,t){a:{try{if("boolean"!==typeof n&&null!=n&&null!=n.toString())break a}catch(x){}n=
""}if("retain"===n.subtree)return k;a:{var E=n;if(null!=k){if(O.call(k)===O.call(E))break a;e&&e.nodes?(b=l-b,k=b+(J(E)?E:k.nodes).length,K(e.nodes.slice(b,k),e.slice(b,k))):k.nodes&&K(k.nodes,k)}k=new E.constructor;k.tag&&(k={});k.nodes=[]}if(J(n))return Pa(n,k,a,l,d,c,u,A,t);if(null!=n&&p(n)){E=k;d=A;A=[];e=[];var r=n;for(b=(n=E)&&n.controllers;null!=r.view;){k=r;var r=r.view.$original||r.view,z=b,B=e,C=A,D;D=n.views;var F=r,M=z,I=k.controller,H=void 0,H="diff"===f.redraw.strategy()&&D?D.indexOf(F):
-1;D=-1<H?M[H]:h(I)?new I:{};F=k&&k.attrs&&k.attrs.key;k=0===L||ja||z&&-1<z.indexOf(D)?k.view(D):{tag:"placeholder"};"retain"!==k.subtree&&(k.attrs=k.attrs||{},k.attrs.key=F,Qa(C,B,r,D));r=k}n=r;if("retain"===n.subtree)a=E;else{if(!n.tag&&e.length)throw Error("Component template must return a virtual element, not an array, string, etc.");n.attrs=n.attrs||{};E.attrs=E.attrs||{};b=Object.keys(n.attrs);k=b.length>("key"in n.attrs?1:0);La(n,E,b);v(n.tag)?(b=0===E.nodes.length,d=n.attrs.xmlns?n.attrs.xmlns:
"svg"===n.tag?"http://www.w3.org/2000/svg":"math"===n.tag?"http://www.w3.org/1998/Math/MathML":d,b?(r=n,z=d,r=r.attrs.is?null==z?y.createElement(r.tag,r.attrs.is):y.createElementNS(z,r.tag,r.attrs.is):null==z?y.createElement(r.tag):y.createElementNS(z,r.tag),z=n,k=k?ka(r,z.tag,z.attrs,{},d):z.attrs,N(a,r,l),z=n,u=null!=z.children&&0<z.children.length?ca(r,z.tag,g,g,z.children,E.children,!0,0,z.attrs.contenteditable?r:u,d,t):z.children,u={tag:n.tag,attrs:k,children:u,nodes:[r]},Ma(u,A,e),u.children&&
!u.children.nodes&&(u.children.nodes=[]),E=u):(r=E,z=n,B=d,C=r.nodes[0],k&&ka(C,z.tag,z.attrs,r.attrs,B),r.children=ca(C,z.tag,g,g,z.children,r.children,!1,0,z.attrs.contenteditable?C:u,B,t),r.nodes.intact=!0,e.length&&(r.views=A,r.controllers=e),r=C),"select"===n.tag&&"value"in n.attrs&&ka(r,n.tag,{value:n.attrs.value},{},d),b||!0!==c||null==r||N(a,r,l),Na(t,n,r,b,E),a=E):a=void 0}return a}if(h(n))return k;A=k;t=n;if(A.nodes.length)if(A.valueOf()!==t.valueOf()||c){c=A.nodes;if(!u||u!==y.activeElement||
t!==A)if(t.$trusted)K(c,A),c=va(a,l,t);else if("textarea"===d)a.value=t;else if(u)u.innerHTML=t,c=[].slice.call(u.childNodes);else{if(1===c[0].nodeType||1<c.length||c[0].nodeValue.trim&&!c[0].nodeValue.trim())K(A.nodes,A),c=[y.createTextNode(t)];u=c[0];try{N(a,u,l),u.nodeValue=t}catch(x){}}A=new t.constructor(t);A.nodes=c;A.$trusted=t.$trusted;a=A}else a=(A.nodes.intact=!0,A);else t.$trusted?c=va(a,l,t):(c=[y.createTextNode(t)],a.nodeName in Ra||N(a,c[0],l)),a="string"===typeof t||"number"===typeof t||
"boolean"===typeof t?new t.constructor(t):t,a.nodes=c;return a}function Ha(a,d){return a.action-d.action||a.index-d.index}function ka(a,d,e,b,c){for(var f in e)if(C.call(e,f)){var g=a,l=f,u=e[f],A=b[f],t=d,m=c;if(l in b&&A===u&&"object"!==typeof u&&y.activeElement!==g)"value"===l&&"input"===t&&g.value!=u&&(g.value=u);else{b[l]=u;try{if("config"!==l&&"key"!==l)if(h(u)&&"on"===l.slice(0,2))g[l]=Sa(u,g);else if("style"===l&&null!=u&&p(u)){m=g;g=u;t=A;t===g&&(m.style="",t={});l=void 0;for(l in g)!C.call(g,
l)||null!=t&&t[l]===g[l]||(m.style[l]=g[l]);for(l in t)C.call(t,l)&&(C.call(g,l)||(m.style[l]=""))}else if(null!=m)"href"===l?g.setAttributeNS("http://www.w3.org/1999/xlink","href",u):g.setAttribute("className"===l?"class":l,u);else if(l in g&&!Ta[l])try{if("input"!==t&&!g.isContentEditable||g[l]!=u)g[l]=u}catch(r){g.setAttribute(l,u)}else try{g.setAttribute(l,u)}catch(r){}}catch(r){if(0>r.message.indexOf("Invalid argument"))throw r;}}}return b}function K(a,d){for(var e=a.length-1;-1<e;e--)if(a[e]&&
a[e].parentNode){try{a[e].parentNode.removeChild(a[e])}catch(b){}d=[].concat(d);d[e]&&la(d[e])}a.length&&(a.length=0)}function la(a){a.configContext&&h(a.configContext.onunload)&&(a.configContext.onunload(),a.configContext.onunload=null);a.controllers&&x(a.controllers,function(a){if(h(a.onunload))a.onunload({preventDefault:I})});a.children&&(J(a.children)?x(a.children,la):a.children.tag&&la(a.children))}function wa(a){if("SCRIPT"===a.tagName)a.parentNode.replaceChild(Ua(a),a);else{var d=a.childNodes;
if(d&&d.length)for(var e=0;e<d.length;e++)wa(d[e])}return a}function Ua(a){for(var d=document.createElement("script"),e=a.attributes,b=0;b<e.length;b++)d.setAttribute(e[b].name,e[b].value);d.text=a.innerHTML;return d}function va(a,d,e){var b=a.childNodes[d];if(b){var f=1!==b.nodeType,c=y.createElement("span");f?(a.insertBefore(c,b||null),c.insertAdjacentHTML("beforebegin",e),a.removeChild(c)):b.insertAdjacentHTML("beforebegin",e)}else try{a.appendChild(y.createRange().createContextualFragment(e))}catch(g){a.insertAdjacentHTML("beforeend",
e),wa(a)}for(e=[];a.childNodes[d]!==b;)e.push(a.childNodes[d]),d++;return e}function Sa(a,d){return function(b){b=b||event;f.redraw.strategy("diff");f.startComputation();try{return a.call(d,b)}finally{xa()}}}function ma(a){var d=na.indexOf(a);return 0>d?na.push(a)-1:d}function Va(a){function d(){arguments.length&&(a=arguments[0]);return a}d.toJSON=function(){return a&&h(a.toJSON)?a.toJSON():a};return d}function ua(a,d){function b(){return(a.controller||I).apply(this,d)||this}function c(b){for(var e=
[b].concat(d),f=1;f<arguments.length;f++)e.push(arguments[f]);return a.view.apply(a,e)}a.controller&&(b.prototype=a.controller.prototype);c.$original=a.view;var f={controller:b,view:c};d[0]&&null!=d[0].key&&(f.attrs={key:d[0].key});return f}function Wa(a,d,b,c){if(c)null==a&&ya(d,b),U&&(B=U);else{f.redraw.strategy("all");f.startComputation();V[b]=d;c=a?oa=a:oa=a={controller:I};var g=new (a.controller||I);c===oa&&(D[b]=g,pa[b]=a);xa();null===a&&ya(d,b);return D[b]}}function ya(a,d){V.splice(d,1);D.splice(d,
1);pa.splice(d,1);za(a);na.splice(ma(a),1);H=[]}function Aa(){P&&(P(),P=null);x(V,function(a,d){var b=pa[d];if(D[d]){var c=[D[d]];f.render(a,b.view?b.view(D[d],c):"")}});W&&(W(),W=null);M=null;Ba=new Date;f.redraw.strategy("diff")}function xa(){"none"===f.redraw.strategy()?(L--,f.redraw.strategy("diff")):f.endComputation()}function Xa(a,d,b){Q={};var c=b.indexOf("?");-1!==c&&(Q=da(b.substr(c+1,b.length)),b=b.substr(0,c));var c=Object.keys(d),g=c.indexOf(b);if(-1!==g)return f.mount(a,d[c[g]]),!0;for(var k in d)if(C.call(d,
k)){if(k===b)return f.mount(a,d[k]),!0;c=new RegExp("^"+k.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(c.test(b))return b.replace(c,function(){var b=k.match(/:[^\/]+/g)||[],e=[].slice.call(arguments,1,-2);x(b,function(a,b){Q[a.replace(/:|\./g,"")]=decodeURIComponent(e[b])});f.mount(a,d[k])}),!0}}function ea(a){a=a||event;if(!(a.ctrlKey||a.metaKey||a.shiftKey||2===a.which)){a.preventDefault?a.preventDefault():a.returnValue=!1;a=a.currentTarget||a.srcElement;var b;for(b=
"pathname"===f.route.mode&&a.search?da(a.search.slice(1)):{};a&&!/a/i.test(a.nodeName);)a=a.parentNode;L=0;f.route(a[f.route.mode].slice(R[f.route.mode].length),b)}}function Ca(){"hash"!==f.route.mode&&F.hash?F.hash=F.hash:c.scrollTo(0,0)}function X(a,b){var e={},c=[],f;for(f in a)if(C.call(a,f)){var k=b?b+"["+f+"]":f,h=a[f];if(null===h)c.push(encodeURIComponent(k));else if(p(h))c.push(X(h,k));else if(J(h)){var l=[];e[k]=e[k]||{};x(h,function(a){e[k][a]||(e[k][a]=!0,l.push(encodeURIComponent(k)+"="+
encodeURIComponent(a)))});c.push(l.join("&"))}else h!==g&&c.push(encodeURIComponent(k)+"="+encodeURIComponent(h))}return c.join("&")}function da(a){if(""===a||null==a)return{};"?"===a.charAt(0)&&(a=a.slice(1));a=a.split("&");var b={};x(a,function(a){var c=a.split("=");a=decodeURIComponent(c[0]);c=2===c.length?decodeURIComponent(c[1]):null;null!=b[a]?(J(b[a])||(b[a]=[b[a]]),b[a].push(c)):b[a]=c});return b}function za(a){var b=ma(a);K(a.childNodes,Y[b]);Y[b]=g}function fa(a,b){var e=f.prop(b);a.then(e);
e.then=function(e,c){return fa(a.then(e,c),b)};e["catch"]=e.then.bind(null,null);return e}function qa(a,b){function e(a){m=a||Da;u.map(function(a){m===ga?a.resolve(l):a.reject(l)})}function c(a,b,d,e){if((null!=l&&p(l)||h(l))&&h(a))try{var g=0;a.call(l,function(a){g++||(l=a,b())},function(a){g++||(l=a,d())})}catch(k){f.deferred.onerror(k),l=k,d()}else e()}function g(){var p;try{p=l&&l.then}catch(t){return f.deferred.onerror(t),l=t,m=Z,g()}if(m===Z)f.deferred.onerror(l);c(p,function(){m=aa;g()},function(){m=
Z;g()},function(){try{m===aa&&h(a)?l=a(l):m===Z&&h(b)&&(l=b(l),m=aa)}catch(g){return f.deferred.onerror(g),l=g,e()}l===k?(l=TypeError(),e()):c(p,function(){e(ga)},e,function(){e(m===aa&&ga)})})}var k=this,m=0,l=0,u=[];k.promise={};k.resolve=function(a){m||(l=a,m=aa,g());return k};k.reject=function(a){m||(l=a,m=Z,g());return k};k.promise.then=function(a,b){var d=new qa(a,b);m===ga?d.resolve(l):m===Da?d.reject(l):u.push(d);return d.promise}}function Ya(a){return a}function Za(a){var b=a.callbackName||
"mithril_callback_"+(new Date).getTime()+"_"+Math.round(1E16*Math.random()).toString(36),e=y.createElement("script");c[b]=function(f){e.parentNode.removeChild(e);a.onload({type:"load",target:{responseText:f}});c[b]=g};e.onerror=function(){e.parentNode.removeChild(e);a.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}});c[b]=g;return!1};e.onload=function(){return!1};e.src=a.url+(0<a.url.indexOf("?")?"&":"?")+(a.callbackKey?a.callbackKey:"callback")+
"="+b+"&"+X(a.data||{});y.body.appendChild(e)}function $a(a){var b=new c.XMLHttpRequest;b.open(a.method,a.url,!0,a.user,a.password);b.onreadystatechange=function(){if(4===b.readyState)if(200<=b.status&&300>b.status)a.onload({type:"load",target:b});else a.onerror({type:"error",target:b})};a.serialize===JSON.stringify&&a.data&&"GET"!==a.method&&b.setRequestHeader("Content-Type","application/json; charset=utf-8");a.deserialize===JSON.parse&&b.setRequestHeader("Accept","application/json, text/*");if(p(a.headers))for(var e in a.headers)C.call(a.headers,
e)&&b.setRequestHeader(e,a.headers[e]);h(a.config)&&(e=a.config(b,a),null!=e&&(b=e));if((e="GET"!==a.method&&a.data?a.data:"")&&!v(e)&&e.constructor!==c.FormData)throw Error("Request data should be either be a string or FormData. Check the `serialize` option in `m.request`");b.send(e);return b}function ab(a){return a.dataType&&"jsonp"===a.dataType.toLowerCase()?Za(a):$a(a)}function bb(a,b,e){"GET"===a.method&&"jsonp"!==a.dataType?(e=0>a.url.indexOf("?")?"?":"&",b=X(b),a.url+=b?e+b:""):a.data=e(b)}
function cb(a,b){b&&(a=a.replace(/:[a-z]\w+/gi,function(a){var c=a.slice(1);a=b[c]||a;delete b[c];return a}));return a}f.version=function(){return"v0.2.8"};var C={}.hasOwnProperty,O={}.toString,J=Array.isArray||function(a){return"[object Array]"===O.call(a)},Ra={AREA:1,BASE:1,BR:1,COL:1,COMMAND:1,EMBED:1,HR:1,IMG:1,INPUT:1,KEYGEN:1,LINK:1,META:1,PARAM:1,SOURCE:1,TRACK:1,WBR:1},y,F,ha,Ea;f.deps=function(a){a=c=a||window;y=a.document;F=a.location;Ea=a.cancelAnimationFrame||a.clearTimeout;ha=a.requestAnimationFrame||
a.setTimeout;return c};f.deps.factory=f.factory=b;f.deps(c);var L=0;f.startComputation=function(){L++};f.endComputation=function(){1<L?L--:(L=0,f.redraw())};var H=[],ja=!1,Ta={list:1,style:1,form:1,type:1,width:1,height:1},Fa,db={appendChild:function(a){Fa===g&&(Fa=y.createElement("html"));y.documentElement&&y.documentElement!==a?y.replaceChild(a,y.documentElement):y.appendChild(a);this.childNodes=y.childNodes},insertBefore:function(a){this.appendChild(a)},childNodes:[]},na=[],Y={};f.render=function(a,
b,e){if(!a)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var c=[],f=ma(a),k=a===y,h;h=k||a===y.documentElement?db:a;k&&"html"!==b.tag&&(b={tag:"html",attrs:{},children:b});Y[f]===g&&K(h.childNodes);!0===e&&za(a);Y[f]=ca(h,null,g,g,b,Y[f],!1,0,null,g,c);x(c,function(a){a()})};f.trust=function(a){a=new String(a);a.$trusted=!0;return a};f.prop=function(a){return(null!=a&&(p(a)||h(a))||"undefined"!==typeof Promise&&a instanceof Promise)&&h(a.then)?fa(a):
Va(a)};var V=[],pa=[],D=[],M=null,Ba=0,P=null,W=null,oa;f.component=function(a){for(var b=Array(arguments.length-1),c=1;c<arguments.length;c++)b[c-1]=arguments[c];return ua(a,b)};var B,U;f.mount=f.module=function(a,b){if(!a)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var c=V.indexOf(a);0>c&&(c=V.length);var f=!1,g={preventDefault:function(){f=!0;P=W=null}};x(H,function(a){a.handler.call(a.controller,g);a.controller.onunload=null});f?x(H,function(a){a.controller.onunload=
a.handler}):H=[];if(D[c]&&h(D[c].onunload))D[c].onunload(g);return Wa(b,a,c,f)};var ra=!1;f.redraw=function(a){if(!ra){ra=!0;a&&(ja=!0);try{if(M&&!a){if(ha===c.requestAnimationFrame||16<new Date-Ba)0<M&&Ea(M),M=ha(Aa,16)}else Aa(),M=ha(function(){M=null},16)}finally{ra=ja=!1}}};f.redraw.strategy=f.prop();f.withAttr=function(a,b,c){return function(f){f=f||window.event;var g=f.currentTarget||this;f=c||this;g=a in g?g[a]:g.getAttribute(a);b.call(f,g)}};var R={pathname:"",hash:"#",search:"?"},sa=I,ta=
!1,Q;f.route=function(a,b,e,g){if(0===arguments.length)return B;if(3===arguments.length&&v(b)){sa=function(c){c=B=c.slice(R[f.route.mode].length);if(!Xa(a,e,c)){if(ta)throw Error("Ensure the default route matches one of the routes defined in m.route");ta=!0;f.route(b,!0);ta=!1}};var h="hash"===f.route.mode?"onhashchange":"onpopstate";c[h]=function(){var a=F[f.route.mode];"pathname"===f.route.mode&&(a+=F.search);B!==a.slice(R[f.route.mode].length)&&sa(a)};P=Ca;c[h]()}else if(a.addEventListener||a.attachEvent)a.href=
("pathname"!==f.route.mode?F.pathname:"")+R[f.route.mode]+g.attrs.href,a.addEventListener?(a.removeEventListener("click",ea),a.addEventListener("click",ea)):(a.detachEvent("onclick",ea),a.attachEvent("onclick",ea));else if(v(a)){U=B;B=a;var k=b||{},h=B.indexOf("?"),m;m=-1<h?da(B.slice(h+1)):{};for(var l in k)C.call(k,l)&&(m[l]=k[l]);k=X(m);h=-1<h?B.slice(0,h):B;k&&(B=h+(-1===h.indexOf("?")?"?":"&")+k);h=!0===(3===arguments.length?e:b)||U===B;if(c.history.pushState){var p=h?"replaceState":"pushState";
P=Ca;W=function(){try{c.history[p](null,y.title,R[f.route.mode]+B)}catch(a){F[f.route.mode]=B}}}else F[f.route.mode]=B;sa(R[f.route.mode]+B);U=null}};f.route.param=function(a){if(!Q)throw Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");return a?Q[a]:Q};f.route.mode="search";f.route.buildQueryString=X;f.route.parseQueryString=da;f.deferred=function(){var a=new qa;a.promise=fa(a.promise);return a};var aa=1,Z=2,ga=3,Da=4;f.deferred.onerror=function(a){if("[object Error]"===
O.call(a)&&!/ Error/.test(a.constructor.toString()))throw L=0,a;};f.sync=function(a){function b(a,d){return function(b){h[a]=b;d||(k="reject");0===--g&&(c.promise(h),c[k](h));return b}}var c=f.deferred(),g=a.length,h=[],k="resolve";0<a.length?x(a,function(a,c){a.then(b(c,!0),b(c,!1))}):c.resolve([]);return c.promise};f.request=function(a){!0!==a.background&&f.startComputation();var b=new qa,c,g,h;a.dataType&&"jsonp"===a.dataType.toLowerCase()?(c=a.serialize=g=a.deserialize=Ya,h=function(a){return a.responseText}):
(c=a.serialize=a.serialize||JSON.stringify,g=a.deserialize=a.deserialize||JSON.parse,h=a.extract||function(a){return a.responseText.length||g!==JSON.parse?a.responseText:null});a.method=(a.method||"GET").toUpperCase();a.url=cb(a.url,a.data);bb(a,a.data,c);a.onload=a.onerror=function(c){try{c=c||event;var e=g(h(c.target,a));"load"===c.type?(a.unwrapSuccess&&(e=a.unwrapSuccess(e,c.target)),J(e)&&a.type?x(e,function(b,c){e[c]=new a.type(b)}):a.type&&(e=new a.type(e)),b.resolve(e)):(a.unwrapError&&(e=
a.unwrapError(e,c.target)),b.reject(e))}catch(l){b.reject(l),f.deferred.onerror(l)}finally{!0!==a.background&&f.endComputation()}};ab(a);b.promise=fa(b.promise,a.initialValue);return b.promise};return f})},{}]},{},[1]);
</script>
    {% endif %}
    {% if is_admin %}
      <css-placeholder token="{{ placeholder_token|raw }}">
      <js-placeholder token="{{ placeholder_token|raw }}">
      <js-bottom-placeholder token="{{ placeholder_token|raw }}">

    {% endif %}
    {% if ga_id %}

      <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', '{{ ga_id }}']);
      _gaq.push(['_trackPageview']);

        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
      </script>
    {% endif %}
  </body>
</html>
